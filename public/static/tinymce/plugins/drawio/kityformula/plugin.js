CKEDITOR.plugins.add("kityformula",{icons:"kityformula",requires:["dialog"],init:function(t){t.addCommand("kityformula",new CKEDITOR.dialogCommand("kityformula")),t.ui.addButton("kityformula",{label:"数学公式",command:"kityformula",icon:this.path+"/icons/kityformula.png"}),t.contextMenu&&(t.addMenuGroup("kityMathGroup"),t.addMenuItem("mathEditorItem",{label:"编辑数学公式",icon:this.path+"/icons/kityformula.png",command:"kityformula",group:"kityMathGroup"}),t.contextMenu.addListener(function(t){if(t.getAscendant("img",!0))return{mathEditorItem:CKEDITOR.TRISTATE_OFF}})),CKEDITOR.dialog.add("kityformula",this.path+"dialogs/kityformula.js")}});