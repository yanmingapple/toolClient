function mxShapeElectricalTestPoint(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeElectricalStraightBus(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeElectricalTwoLineBusElbow(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1,this.notch=0}function mxShapeElectricalThreeLineBusElbow(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1,this.notch=0}function mxShapeElectricalFourLineBusElbow(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1,this.notch=0}function mxShapeElectricalEightLineBusElbow(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1,this.notch=0}function mxShapeElectricalLogicGate(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeElectricalBuffer(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeElectricalDualInLineIC(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeElectricalQFPIC(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeElectricalMux(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeElectricalBatteryStack(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeElectricalDCSource3_v2(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeElectricalSource(e,t,n,i){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=i?i:1}mxUtils.extend(mxShapeElectricalTestPoint,mxShape),mxShapeElectricalTestPoint.prototype.cst={SHAPE_TEST_POINT:"mxgraph.electrical.transmission.testPoint"},mxShapeElectricalTestPoint.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n);t=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,"#000000"),n=Math.min(i,o);e.setFillColor(t),e.begin(),e.ellipse(.5*i-n/2,0,n,n),e.fillAndStroke(),i<o&&(e.begin(),e.moveTo(.5*i,n),e.lineTo(.5*i,o),e.stroke())},mxCellRenderer.registerShape(mxShapeElectricalTestPoint.prototype.cst.SHAPE_TEST_POINT,mxShapeElectricalTestPoint),mxShapeElectricalTestPoint.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0)],mxUtils.extend(mxShapeElectricalStraightBus,mxShape),mxShapeElectricalStraightBus.prototype.cst={SHAPE_STRAIGHT_BUS:"mxgraph.electrical.transmission.straightBus"},mxShapeElectricalStraightBus.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n);t=.2*i,n=0,n=o<i?.5*o:i/2;e.begin(),e.moveTo(i-t,0),e.lineTo(i-t,o-n),e.lineTo(i,o-n),e.lineTo(.5*i,o),e.lineTo(0,o-n),e.lineTo(t,o-n),e.lineTo(t,0),e.fillAndStroke()},mxCellRenderer.registerShape(mxShapeElectricalStraightBus.prototype.cst.SHAPE_STRAIGHT_BUS,mxShapeElectricalStraightBus),mxShapeElectricalStraightBus.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0)],mxUtils.extend(mxShapeElectricalTwoLineBusElbow,mxShape),mxShapeElectricalTwoLineBusElbow.prototype.cst={SHAPE_TWO_LINE_BUS_ELBOW:"mxgraph.electrical.transmission.twoLineBusElbow"},mxShapeElectricalTwoLineBusElbow.prototype.customProperties=[{name:"notch",dispName:"Spacing",type:"float",min:0,defVal:25}],mxShapeElectricalTwoLineBusElbow.prototype.paintVertexShape=function(e,t,n,i,o){var l=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"notch",this.notch))));e.translate(t,n),e.begin(),e.moveTo(0,o),e.lineTo(i,o),e.lineTo(i,0),e.stroke();n=Math.min(i,l),l=Math.min(o,l);e.begin(),e.moveTo(0,o-l),e.lineTo(i-n,o-l),e.lineTo(i-n,0),e.stroke()},mxCellRenderer.registerShape(mxShapeElectricalTwoLineBusElbow.prototype.cst.SHAPE_TWO_LINE_BUS_ELBOW,mxShapeElectricalTwoLineBusElbow),mxShapeElectricalTwoLineBusElbow.prototype.constraints=null,Graph.handleFactory[mxShapeElectricalTwoLineBusElbow.prototype.cst.SHAPE_TWO_LINE_BUS_ELBOW]=function(e){return[Graph.createHandle(e,["notch"],function(e){var t=Math.max(Math.min(e.height,parseFloat(mxUtils.getValue(this.state.style,"notch",this.notch))),0);return new mxPoint(e.x+e.width/4,e.y+e.height-t)},function(e,t){this.state.style.notch=Math.round(.2*Math.max(0,e.width-t.y+e.y))/.2})]},mxUtils.extend(mxShapeElectricalThreeLineBusElbow,mxShape),mxShapeElectricalThreeLineBusElbow.prototype.cst={SHAPE_THREE_LINE_BUS_ELBOW:"mxgraph.electrical.transmission.threeLineBusElbow"},mxShapeElectricalThreeLineBusElbow.prototype.customProperties=[{name:"notch",dispName:"Spacing",type:"float",min:0,defVal:30}],mxShapeElectricalThreeLineBusElbow.prototype.paintVertexShape=function(e,t,n,i,o){var l=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"notch",this.notch))));e.translate(t,n),e.begin(),e.moveTo(0,o),e.lineTo(i,o),e.lineTo(i,0),e.stroke();n=Math.min(i,l),l=Math.min(o,l);e.begin(),e.moveTo(0,o-l),e.lineTo(i-n,o-l),e.lineTo(i-n,0),e.stroke(),e.begin(),e.moveTo(0,o-l/2),e.lineTo(i-n/2,o-l/2),e.lineTo(i-n/2,0),e.stroke()},mxCellRenderer.registerShape(mxShapeElectricalThreeLineBusElbow.prototype.cst.SHAPE_THREE_LINE_BUS_ELBOW,mxShapeElectricalThreeLineBusElbow),mxShapeElectricalThreeLineBusElbow.prototype.constraints=null,Graph.handleFactory[mxShapeElectricalThreeLineBusElbow.prototype.cst.SHAPE_THREE_LINE_BUS_ELBOW]=function(e){return[Graph.createHandle(e,["notch"],function(e){var t=Math.max(Math.min(e.height,parseFloat(mxUtils.getValue(this.state.style,"notch",this.notch))),0);return new mxPoint(e.x+e.width/4,e.y+e.height-t)},function(e,t){this.state.style.notch=Math.round(.2*Math.max(0,e.width-t.y+e.y))/.2})]},mxUtils.extend(mxShapeElectricalFourLineBusElbow,mxShape),mxShapeElectricalFourLineBusElbow.prototype.cst={SHAPE_FOUR_LINE_BUS_ELBOW:"mxgraph.electrical.transmission.fourLineBusElbow"},mxShapeElectricalFourLineBusElbow.prototype.customProperties=[{name:"notch",dispName:"Spacing",type:"float",min:0,defVal:75}],mxShapeElectricalFourLineBusElbow.prototype.paintVertexShape=function(e,t,n,i,o){var l=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"notch",this.notch))));e.translate(t,n),e.begin(),e.moveTo(0,o),e.lineTo(i,o),e.lineTo(i,0),e.stroke();n=Math.min(i,l),l=Math.min(o,l);e.begin(),e.moveTo(0,o-l),e.lineTo(i-n,o-l),e.lineTo(i-n,0),e.stroke(),e.begin(),e.moveTo(0,o-l/3),e.lineTo(i-n/3,o-l/3),e.lineTo(i-n/3,0),e.stroke(),e.begin(),e.moveTo(0,o-2*l/3),e.lineTo(i-2*n/3,o-2*l/3),e.lineTo(i-2*n/3,0),e.stroke()},mxCellRenderer.registerShape(mxShapeElectricalFourLineBusElbow.prototype.cst.SHAPE_FOUR_LINE_BUS_ELBOW,mxShapeElectricalFourLineBusElbow),mxShapeElectricalFourLineBusElbow.prototype.constraints=null,Graph.handleFactory[mxShapeElectricalFourLineBusElbow.prototype.cst.SHAPE_FOUR_LINE_BUS_ELBOW]=function(e){return[Graph.createHandle(e,["notch"],function(e){var t=Math.max(Math.min(e.height,parseFloat(mxUtils.getValue(this.state.style,"notch",this.notch))),0);return new mxPoint(e.x+e.width/4,e.y+e.height-t)},function(e,t){this.state.style.notch=Math.round(.2*Math.max(0,e.width-t.y+e.y))/.2})]},mxUtils.extend(mxShapeElectricalEightLineBusElbow,mxShape),mxShapeElectricalEightLineBusElbow.prototype.cst={SHAPE_EIGHT_LINE_BUS_ELBOW:"mxgraph.electrical.transmission.eightLineBusElbow"},mxShapeElectricalEightLineBusElbow.prototype.customProperties=[{name:"notch",dispName:"Spacing",type:"float",min:0,defVal:180}],mxShapeElectricalEightLineBusElbow.prototype.paintVertexShape=function(e,t,n,i,o){var l=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"notch",this.notch))));e.translate(t,n),e.begin(),e.moveTo(0,o),e.lineTo(i,o),e.lineTo(i,0),e.stroke();n=Math.min(i,l),l=Math.min(o,l);e.begin(),e.moveTo(0,o-l),e.lineTo(i-n,o-l),e.lineTo(i-n,0),e.stroke(),e.begin(),e.moveTo(0,o-l/7),e.lineTo(i-n/7,o-l/7),e.lineTo(i-n/7,0),e.stroke(),e.begin(),e.moveTo(0,o-2*l/7),e.lineTo(i-2*n/7,o-2*l/7),e.lineTo(i-2*n/7,0),e.stroke(),e.begin(),e.moveTo(0,o-3*l/7),e.lineTo(i-3*n/7,o-3*l/7),e.lineTo(i-3*n/7,0),e.stroke(),e.begin(),e.moveTo(0,o-4*l/7),e.lineTo(i-4*n/7,o-4*l/7),e.lineTo(i-4*n/7,0),e.stroke(),e.begin(),e.moveTo(0,o-5*l/7),e.lineTo(i-5*n/7,o-5*l/7),e.lineTo(i-5*n/7,0),e.stroke(),e.begin(),e.moveTo(0,o-6*l/7),e.lineTo(i-6*n/7,o-6*l/7),e.lineTo(i-6*n/7,0),e.stroke()},mxCellRenderer.registerShape(mxShapeElectricalEightLineBusElbow.prototype.cst.SHAPE_EIGHT_LINE_BUS_ELBOW,mxShapeElectricalEightLineBusElbow),mxShapeElectricalEightLineBusElbow.prototype.constraints=null,Graph.handleFactory[mxShapeElectricalEightLineBusElbow.prototype.cst.SHAPE_EIGHT_LINE_BUS_ELBOW]=function(e){return[Graph.createHandle(e,["notch"],function(e){var t=Math.max(Math.min(e.height,parseFloat(mxUtils.getValue(this.state.style,"notch",this.notch))),0);return new mxPoint(e.x+e.width/4,e.y+e.height-t)},function(e,t){this.state.style.notch=Math.round(.2*Math.max(0,e.width-t.y+e.y))/.2})]},mxUtils.extend(mxShapeElectricalLogicGate,mxShape),mxShapeElectricalLogicGate.prototype.cst={SHAPE_LOGIC_GATE:"mxgraph.electrical.logic_gates.logic_gate"},mxShapeElectricalLogicGate.prototype.customProperties=[{name:"operation",dispName:"Operation",type:"enum",defVal:"and",enumList:[{val:"and",dispName:"And"},{val:"or",dispName:"Or"},{val:"xor",dispName:"Xor"}]},{name:"numInputs",dispName:"Inputs",type:"int",min:2,defVal:2},{name:"negating",dispName:"Negating",type:"bool",defVal:0}],mxShapeElectricalLogicGate.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n);var l=parseInt(mxUtils.getValue(this.style,"numInputs","2")),a=o/l,s=.5*a;e.begin(),e.moveTo(.8*i,.5*o),e.lineTo(i,.5*o);for(var r,m=mxUtils.getValue(this.style,"operation","and"),c=0;c<l;c++)e.moveTo(0,s),"and"==m?e.lineTo(.2*i,s):e.lineTo(.23*i,s),s+=a;switch(e.stroke(),m){case"xor":e.begin(),e.moveTo(.1*i,0),e.arcTo(.6*i,o,0,0,1,.1*i,o),e.stroke();case"or":e.begin(),e.moveTo(.4*i,0),e.arcTo(.45*i,.83*o,0,0,1,.8*i,.5*o),e.arcTo(.45*i,.83*o,0,0,1,.4*i,o),e.lineTo(.15*i,o),e.arcTo(.6*i,o,0,0,0,.15*i,0),e.close(),e.fillAndStroke();break;default:e.begin(),e.moveTo(.2*i,0),e.lineTo(.5*i,0),e.arcTo(.3*i,.5*o,0,0,1,.5*i,o),e.lineTo(.2*i,o),e.close(),e.fillAndStroke()}"1"==mxUtils.getValue(this.style,"negating","0")&&(r=this.style.negSize?(r=parseFloat(mxUtils.getValue(this.style,"negSize","0.13")),Math.min(i*r*.5,o*r)):Math.min(.04*i,.07*o),e.begin(),e.ellipse(.8*i,.5*o-.5*r,r,r),e.fillAndStroke())},mxCellRenderer.registerShape(mxShapeElectricalLogicGate.prototype.cst.SHAPE_LOGIC_GATE,mxShapeElectricalLogicGate),mxShapeElectricalLogicGate.prototype.getConstraints=function(e){for(var t=[new mxConnectionConstraint(new mxPoint(1,.5),!1)],n=parseInt(mxUtils.getValue(e,"numInputs","2")),i=1/n,o=.5*i,l=0;l<n;l++)t.push(new mxConnectionConstraint(new mxPoint(0,o),!1)),o+=i;return t},mxUtils.extend(mxShapeElectricalBuffer,mxShape),mxShapeElectricalBuffer.prototype.cst={SHAPE_BUFFER2:"mxgraph.electrical.logic_gates.buffer2"},mxShapeElectricalBuffer.prototype.customProperties=[{name:"negating",dispName:"Negating",type:"bool",defVal:0}],mxShapeElectricalBuffer.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n),e.begin(),e.moveTo(0,.5*o),e.lineTo(.2*i,.5*o),e.moveTo(.8*i,.5*o),e.lineTo(i,.5*o),e.stroke(),e.begin(),e.moveTo(.2*i,0),e.lineTo(.8*i,.5*o),e.lineTo(.2*i,o),e.close(),e.fillAndStroke(),"1"==mxUtils.getValue(this.style,"negating","0")&&(n=Math.min(.04*i,.07*o),e.begin(),e.ellipse(.8*i,.5*o-.5*n,n,n),e.fillAndStroke())},mxCellRenderer.registerShape(mxShapeElectricalBuffer.prototype.cst.SHAPE_BUFFER2,mxShapeElectricalBuffer),mxShapeElectricalBuffer.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0)],mxUtils.extend(mxShapeElectricalDualInLineIC,mxShape),mxShapeElectricalDualInLineIC.prototype.cst={SHAPE_DUAL_INLINE_IC:"mxgraph.electrical.logic_gates.dual_inline_ic"},mxShapeElectricalDualInLineIC.prototype.customProperties=[{name:"pinStyle",dispName:"Pin Style",type:"enum",defVal:"line",enumList:[{val:"line",dispName:"Line"},{val:"square",dispName:"Square"}]},{name:"startPin",dispName:"Starting Pin",type:"enum",defVal:"n",enumList:[{val:"n",dispName:"N"},{val:"e",dispName:"E"},{val:"s",dispName:"S"},{val:"w",dispName:"W"}]},{name:"pinSpacing",dispName:"Pin Spacing",type:"float",min:1,defVal:20},{name:"pinLabelType",dispName:"Pin Label Type",type:"enum",defVal:"gen",enumList:[{val:"gen",dispName:"Generated"},{val:"cust",dispName:"Custom"}]},{name:"labelCount",dispName:"Number of Labels",type:"int",defVal:20,dependentProps:["labelNames"]},{name:"labelNames",dispName:"Label Names",type:"staticArr",subType:"string",sizeProperty:"labelCount",subDefVal:"a"}],mxShapeElectricalDualInLineIC.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n);t=mxUtils.getValue(this.style,"fontColor","#000000");e.setFontColor(t);var l=mxUtils.getValue(this.style,"startPin","n"),a=mxUtils.getValue(this.style,"pinLabelType","gen"),s=mxUtils.getValue(this.style,"labelNames","").toString().split(",");e.begin(),"n"==l||"s"==l?e.rect(10,0,i-20,o):e.rect(0,10,i,o-20),e.fillAndStroke();var r,m=parseFloat(mxUtils.getValue(this.style,"pinSpacing","20")),n=mxUtils.getValue(this.style,"pinStyle","line"),t=parseFloat(mxUtils.getValue(this.style,"fontSize","12"));if(r="n"==l||"s"==l?parseInt(o/m):parseInt(i/m),"line"==n){e.setFontSize(.8*t);var c=1,p=.5*m;if(e.begin(),"n"==l||"s"==l)for(;c*m<=o;)e.moveTo(0,p),e.lineTo(10,p),e.moveTo(i-10,p),e.lineTo(i,p),h="n"==l?c:r+c,"gen"==a?e.text(20,p,0,0,h.toString(),mxConstants.ALIGN_LEFT,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):h-1<s.length&&e.text(20,p,0,0,s[h-1].toString(),mxConstants.ALIGN_LEFT,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),x="n"==l?2*r-c+1:r-c+1,"gen"==a?e.text(i-20,p,0,0,x.toString(),mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):x-1<s.length&&e.text(i-20,p,0,0,s[x-1].toString(),mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),p+=m,c++;else for(;c*m<=i;)e.moveTo(p,0),e.lineTo(p,10),e.moveTo(p,o-10),e.lineTo(p,o),h="e"==l?r-c+1:2*r-c+1,"gen"==a?e.text(p,20,0,0,h.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):h-1<s.length&&e.text(p,20,0,0,s[h-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),x="e"==l?r+c:c,"gen"==a?e.text(p,o-20,0,0,x.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):x-1<s.length&&e.text(p,o-20,0,0,s[x-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),p+=m,c++;e.stroke()}else{e.setFontSize(.5*t);var h,x,c=1,p=.5*m;if("n"==l||"s"==l)for(;c*m<=o;)e.begin(),e.rect(0,p-.25*m,10,.5*m),e.fillAndStroke(),e.begin(),e.rect(i-10,p-.25*m,10,.5*m),e.fillAndStroke(),h="n"==l?c:r+c,"gen"==a?e.text(5,p+1,0,0,h.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):h-1<s.length&&e.text(5,p+1,0,0,s[h-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),x="n"==l?2*r-c+1:r-c+1,"gen"==a?e.text(i-5,p+1,0,0,x.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):x-1<s.length&&e.text(i-5,p+1,0,0,s[x-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),p+=m,c++;else for(;c*m<=i;)e.begin(),e.rect(p-.25*m,0,.5*m,10),e.fillAndStroke(),e.begin(),e.rect(p-.25*m,o-10,.5*m,10),e.fillAndStroke(),h="e"==l?r-c+1:2*r-c+1,"gen"==a?e.text(p,5,0,0,h.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):h-1<s.length&&e.text(p,5,0,0,s[h-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),x="e"==l?r+c:c,"gen"==a?e.text(p,o-5,0,0,x.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):x-1<s.length&&e.text(p,o-5,0,0,s[x-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),p+=m,c++}switch(e.setShadow(!1),e.begin(),l){case"e":40<o&&(e.moveTo(i,.5*o-10),e.arcTo(12,12,0,0,0,i,.5*o+10));break;case"s":40<i&&(e.moveTo(.5*i-10,o),e.arcTo(12,12,0,0,1,.5*i+10,o));break;case"w":40<o&&(e.moveTo(0,.5*o-10),e.arcTo(12,12,0,0,1,0,.5*o+10));break;default:40<i&&(e.moveTo(.5*i-10,0),e.arcTo(12,12,0,0,0,.5*i+10,0))}e.stroke()},mxCellRenderer.registerShape(mxShapeElectricalDualInLineIC.prototype.cst.SHAPE_DUAL_INLINE_IC,mxShapeElectricalDualInLineIC),mxShapeElectricalDualInLineIC.prototype.getConstraints=function(e,t,n){var i=[],o=parseFloat(mxUtils.getValue(this.style,"pinSpacing","20")),l=mxUtils.getValue(this.style,"startPin","n"),a=1,s=.5*o;parseInt(n/o);if("n"==l||"s"==l)for(;a*o<=n;)i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,s)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,s)),s+=o,a++;else for(;a*o<=t;)i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,0)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1,null,s,0)),s+=o,a++;return i},mxUtils.extend(mxShapeElectricalQFPIC,mxShape),mxShapeElectricalQFPIC.prototype.cst={SHAPE_QFP_IC:"mxgraph.electrical.logic_gates.qfp_ic"},mxShapeElectricalQFPIC.prototype.customProperties=[{name:"pinStyle",dispName:"Pin Style",type:"enum",defVal:"line",enumList:[{val:"line",dispName:"Line"},{val:"square",dispName:"Square"}]},{name:"startPin",dispName:"Starting Pin",type:"enum",defVal:"sw",enumList:[{val:"sw",dispName:"SW"},{val:"nw",dispName:"NW"},{val:"ne",dispName:"NE"},{val:"se",dispName:"SE"}]},{name:"pinSpacing",dispName:"Pin Spacing",type:"float",min:1,defVal:20},{name:"pinLabelType",dispName:"Pin Label Type",type:"enum",defVal:"gen",enumList:[{val:"gen",dispName:"Generated"},{val:"cust",dispName:"Custom"}]},{name:"labelCount",dispName:"Number of Labels",type:"int",defVal:40,dependentProps:["labelNames"]},{name:"labelNames",dispName:"Label Names",type:"staticArr",subType:"string",sizeProperty:"labelCount",subDefVal:"a"}],mxShapeElectricalQFPIC.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n),e.begin(),e.moveTo(15,10),e.lineTo(i-15,10),e.lineTo(i-10,15),e.lineTo(i-10,o-15),e.lineTo(i-15,o-10),e.lineTo(15,o-10),e.lineTo(10,o-15),e.lineTo(10,15),e.close(),e.fillAndStroke();var l=parseFloat(mxUtils.getValue(this.style,"pinSpacing","20")),a=mxUtils.getValue(this.style,"pinStyle","line"),s=mxUtils.getValue(this.style,"pinLabelType","gen"),r=mxUtils.getValue(this.style,"labelNames","").toString().split(","),t=parseFloat(mxUtils.getValue(this.style,"fontSize","12")),n=mxUtils.getValue(this.style,"fontColor","#000000");e.setFontColor(n);var m=mxUtils.getValue(this.style,"startPin","sw");if("line"==a){e.setFontSize(.8*t);var c=1,p=.5*l+20;e.begin();for(var h=parseInt((o-l-40)/l)+1,x=parseInt((i-l-40)/l)+1;p<=o-.5*l-20;){switch(e.moveTo(0,p),e.lineTo(10,p),e.moveTo(i-10,p),e.lineTo(i,p),m){case"nw":var u=c;break;case"ne":u=x+c;break;case"se":u=h+x+c;break;default:u=h+2*x+c}switch("gen"==s?e.text(20,p,0,0,u.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):u-1<r.length&&e.text(20,p,0,0,r[u-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),m){case"nw":var S=x+2*h-c+1;break;case"ne":S=2*x+2*h-c+1;break;case"se":S=h-c+1;break;default:S=x+h-c+1}"gen"==s?e.text(i-20,p,0,0,S.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):S-1<r.length&&e.text(i-20,p,0,0,r[S-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),p+=l,c++}for(c=1,p=.5*l+20;p<=i-.5*l-20;){switch(e.moveTo(p,0),e.lineTo(p,10),e.moveTo(p,o-10),e.lineTo(p,o),m){case"nw":u=h+c;break;case"ne":u=h+x+c;break;case"se":u=2*h+x+c;break;default:u=c}switch("gen"==s?e.text(p,o-20,0,0,u.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):u-1<r.length&&e.text(p,o-20,0,0,r[u-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),m){case"nw":S=2*x+2*h-c+1;break;case"ne":S=x-c+1;break;case"se":S=x+h-c+1;break;default:S=2*x+h-c+1}"gen"==s?e.text(p,20,0,0,S.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):S-1<r.length&&e.text(p,20,0,0,r[S-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),p+=l,c++}e.stroke()}else{e.setFontSize(.5*t);for(c=1,p=.5*l+20,h=parseInt((o-l-40)/l)+1,x=parseInt((i-l-40)/l)+1;p<=o-.5*l-20;){switch(e.begin(),e.rect(0,p-.25*l,10,.5*l),e.fillAndStroke(),e.begin(),e.rect(i-10,p-.25*l,10,.5*l),e.fillAndStroke(),m){case"nw":u=c;break;case"ne":u=x+c;break;case"se":u=h+x+c;break;default:u=h+2*x+c}switch("gen"==s?e.text(5,p+1,0,0,u.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):u-1<r.length&&e.text(5,p+1,0,0,r[u-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),m){case"nw":S=x+2*h-c+1;break;case"ne":S=2*x+2*h-c+1;break;case"se":S=h-c+1;break;default:S=x+h-c+1}"gen"==s?e.text(i-5,p+1,0,0,S.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):S-1<r.length&&e.text(i-5,p+1,0,0,r[S-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),p+=l,c++}for(c=1,p=.5*l+20;p<=i-.5*l-20;){switch(e.begin(),e.rect(p-.25*l,0,.5*l,10),e.fillAndStroke(),e.begin(),e.rect(p-.25*l,o-10,.5*l,10),e.fillAndStroke(),m){case"nw":u=h+c;break;case"ne":u=h+x+c;break;case"se":u=2*h+x+c;break;default:u=c}switch("gen"==s?e.text(p,o-4,0,0,u.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):u-1<r.length&&e.text(p,o-4,0,0,r[u-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),m){case"nw":S=2*x+2*h-c+1;break;case"ne":S=x-c+1;break;case"se":S=x+h-c+1;break;default:S=2*x+h-c+1}"gen"==s?e.text(p,6,0,0,S.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0):S-1<r.length&&e.text(p,6,0,0,r[S-1].toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,0),p+=l,c++}}if(e.setShadow(!1),40<i){switch(e.setFillColor(mxUtils.getValue(this.style,"strokeColor","#000000")),e.begin(),m){case"nw":e.ellipse(15,15,10,10);break;case"ne":e.ellipse(i-25,15,10,10);break;case"se":e.ellipse(i-25,o-25,10,10);break;default:e.ellipse(15,o-25,10,10)}e.fillAndStroke()}},mxCellRenderer.registerShape(mxShapeElectricalQFPIC.prototype.cst.SHAPE_QFP_IC,mxShapeElectricalQFPIC),mxShapeElectricalQFPIC.prototype.getConstraints=function(e,t,n){var i=[],o=parseFloat(mxUtils.getValue(this.style,"pinSpacing","20")),l=.5*o+20;for(parseInt(n/o);l<=n-.5*o-20;)i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,l)),l+=o;for(l=.5*o+20;l<=t-.5*o-20;)i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1,null,l,0)),l+=o;return i},mxUtils.extend(mxShapeElectricalMux,mxShape),mxShapeElectricalMux.prototype.cst={SHAPE_MUX:"mxgraph.electrical.abstract.mux2"},mxShapeElectricalMux.prototype.customProperties=[{name:"operation",dispName:"Operation",type:"enum",defVal:"mux",enumList:[{val:"mux",dispName:"Mux"},{val:"demux",dispName:"Demux"}]},{name:"selectorPins",dispName:"Selector Pins",type:"int",min:1,max:8,defVal:1}],mxShapeElectricalMux.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n);var l=parseInt(mxUtils.getValue(this.style,"selectorPins","1")),a=mxUtils.getValue(this.style,"operation","mux"),n=parseFloat(mxUtils.getValue(this.style,"fontSize","12"));e.setFontSize(.5*n);n=mxUtils.getValue(this.style,"fontColor","#000000");e.setFontColor(n);var s=0;switch(mxUtils.getValue(this.style,"direction","east")){case"south":s=270;break;case"west":s=180;break;case"north":s=90}"demux"===a?(e.begin(),e.moveTo(i-10,0),e.lineTo(10,.1*o),e.lineTo(10,.9*o-10),e.lineTo(i-10,o-10)):(e.begin(),e.moveTo(10,0),e.lineTo(i-10,.1*o),e.lineTo(i-10,.9*o-10),e.lineTo(10,o-10)),e.close(),e.fillAndStroke();var r=1,m=1,c=3+.5*(h="mux"==a?(o-16)/(r=Math.pow(2,l)):(o-16)/(m=Math.pow(2,l)));if(e.begin(),1==r)e.moveTo(0,.5*(o-10)),e.lineTo(10,.5*(o-10));else for(var p=0;p<r;p++)e.moveTo(0,c),e.lineTo(10,c),e.text(14,c+1,0,0,""+p.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,s),c+=h;if(1==m)e.moveTo(i-10,.5*(o-10)),e.lineTo(i,.5*(o-10));else for(p=0;p<m;p++)e.moveTo(i-10,c),e.lineTo(i,c),e.text(i-14,c+1,0,0,""+p.toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,s),c+=h;for(var h,x=10+.5*(h=(i-20)/l),p=0;p<l;p++)"mux"==a?e.moveTo(x,o-10-(x-10)/(i-20)*o*.1):e.moveTo(x,o-10-(i-x-10)/(i-20)*o*.1),e.lineTo(x,o),e.text(x+5,o-4,0,0,"S"+(l-p-1).toString(),mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,0,null,0,0,s),x+=h;e.stroke()},mxCellRenderer.registerShape(mxShapeElectricalMux.prototype.cst.SHAPE_MUX,mxShapeElectricalMux),mxShapeElectricalMux.prototype.getConstraints=function(e,t,n){var i=[],o=(n-16)/n,l=parseInt(mxUtils.getValue(this.style,"selectorPins","1")),a=1,s=1,r=.5*(c="mux"==mxUtils.getValue(this.style,"operation","mux")?o/(a=Math.pow(2,l)):o/(s=Math.pow(2,l)));if(1==a)i.push(new mxConnectionConstraint(new mxPoint(0,.5*(n-10)/n),!1,0,0));else for(var m=0;m<a;m++)i.push(new mxConnectionConstraint(new mxPoint(0,r),!1,null,0,3)),r+=c;if(1==s)i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1,null,0,-5));else for(m=0;m<s;m++)i.push(new mxConnectionConstraint(new mxPoint(1,r),!1,null,0,3)),r+=c;for(var c,p=.5*(c=(t-20)/(t*l)),m=0;m<l;m++)i.push(new mxConnectionConstraint(new mxPoint(p,1),!1,null,10,0)),p+=c;return i},mxUtils.extend(mxShapeElectricalBatteryStack,mxShape),mxShapeElectricalBatteryStack.prototype.cst={SHAPE_BATTERY_STACK:"mxgraph.electrical.miscellaneous.batteryStack"},mxShapeElectricalBatteryStack.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n);var l=.3*o,t=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,"#000000"),a=mxUtils.getValue(this.style,mxConstants.STYLE_DASHED,"0"),s=Math.floor((i-20)/l),n=.5*(i-s*l);if(0<s){e.begin(),e.moveTo(0,.5*o),e.lineTo(n+.2*l,.5*o),e.moveTo(i-n-.2*l,.5*o),e.lineTo(i,.5*o),e.stroke();var r=n;e.setFillColor(t);for(var m=0;m<s;m++)e.rect(r+.2*l,.25*o,.2*l,.5*o),e.fillAndStroke(),e.begin(),e.moveTo(r+.8*l,0),e.lineTo(r+.8*l,o),e.stroke(),0<m&&(e.setDashed("1"),e.begin(),e.moveTo(r-.2*l,.5*o),e.lineTo(r+.2*l,.5*o),e.stroke(),e.setDashed(a)),r+=l}},mxCellRenderer.registerShape(mxShapeElectricalBatteryStack.prototype.cst.SHAPE_BATTERY_STACK,mxShapeElectricalBatteryStack),mxShapeElectricalBatteryStack.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0)],mxUtils.extend(mxShapeElectricalDCSource3_v2,mxShape),mxShapeElectricalDCSource3_v2.prototype.cst={SHAPE_DC_SOURCE_3_V2:"mxgraph.electrical.signal_sources.dc_source_3_v2"},mxShapeElectricalDCSource3_v2.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n);n=Math.max(3,.05*Math.min(o,i));e.ellipse(0,0,i,o),e.fillAndStroke(),e.begin(),e.moveTo(.5*i-n,.05*o+3),e.lineTo(.5*i+n,.05*o+3),e.moveTo(.5*i,.05*o-n+3),e.lineTo(.5*i,.05*o+n+3),e.moveTo(.5*i-n,.95*o-3),e.lineTo(.5*i+n,.95*o-3),e.stroke()},mxCellRenderer.registerShape(mxShapeElectricalDCSource3_v2.prototype.cst.SHAPE_DC_SOURCE_3_V2,mxShapeElectricalDCSource3_v2),mxShapeElectricalDCSource3_v2.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0)],mxUtils.extend(mxShapeElectricalSource,mxShape),mxShapeElectricalSource.prototype.cst={SHAPE_SOURCE:"mxgraph.electrical.signal_sources.source"},mxShapeElectricalSource.prototype.customProperties=[{name:"elSourceType",dispName:"Source Type",type:"enum",defVal:"independent",enumList:[{val:"independent",dispName:"Independent"},{val:"dependent",dispName:"Dependent"}]},{name:"elSignalType",dispName:"Signal Type",type:"enum",defVal:"ac",enumList:[{val:"ac",dispName:"AC"},{val:"none",dispName:"None"},{val:"square",dispName:"Square"},{val:"triangular",dispName:"Triangular"},{val:"sawtooth",dispName:"Sawtooth"},{val:"noise",dispName:"Noise"},{val:"ideal",dispName:"Ideal"},{val:"expSquib",dispName:"Explosive Squib"},{val:"pulse",dispName:"Pulse"},{val:"invPulse",dispName:"Inverse Pulse"},{val:"chopSquare",dispName:"Chopped Square"},{val:"stepOn",dispName:"Step On"},{val:"stepOff",dispName:"Step Off"},{val:"dc1",dispName:"DC Horizontal"},{val:"dc2",dispName:"DC Vertical"},{val:"dc3",dispName:"DC Plus minus"}]}],mxShapeElectricalSource.prototype.paintVertexShape=function(e,t,n,i,o){e.translate(t,n);var l=mxUtils.getValue(this.style,"elSourceType","independent"),n=mxUtils.getValue(this.style,"elSignalType","none");switch(l){case"independent":e.ellipse(0,0,i,o),e.fillAndStroke();break;case"dependent":e.begin(),e.moveTo(0,.5*o),e.lineTo(.5*i,0),e.lineTo(i,.5*o),e.lineTo(.5*i,o),e.lineTo(0,.5*o),e.close(),e.fillAndStroke()}switch(n){case"ac":e.begin(),e.moveTo(.3*i,.5*o),e.quadTo(.34*i,.35*o,.4*i,.35*o),e.quadTo(.46*i,.35*o,.5*i,.5*o),e.quadTo(.53*i,.65*o,.6*i,.65*o),e.quadTo(.66*i,.65*o,.7*i,.5*o),e.stroke();break;case"square":e.begin(),e.moveTo(.3*i,.5*o),e.lineTo(.3*i,.35*o),e.lineTo(.5*i,.35*o),e.lineTo(.5*i,.65*o),e.lineTo(.7*i,.65*o),e.lineTo(.7*i,.5*o),e.stroke();break;case"triangular":e.begin(),e.moveTo(.3*i,.65*o),e.lineTo(.4*i,.35*o),e.lineTo(.5*i,.65*o),e.lineTo(.6*i,.35*o),e.lineTo(.7*i,.65*o),e.stroke();break;case"sawtooth":e.begin(),e.moveTo(.24*i,.65*o),e.lineTo(.42*i,.35*o),e.lineTo(.42*i,.65*o),e.lineTo(.58*i,.35*o),e.lineTo(.58*i,.65*o),e.lineTo(.76*i,.35*o),e.lineTo(.76*i,.65*o),e.stroke();break;case"noise":e.begin(),e.moveTo(.5*i,.17*o),e.lineTo(.5*i,.5*o),e.moveTo(.18*i,.42*o),e.lineTo(.5*i,.5*o),e.moveTo(.32*i,.78*o),e.lineTo(.5*i,.5*o),e.moveTo(.82*i,.42*o),e.lineTo(.5*i,.5*o),e.moveTo(.68*i,.78*o),e.lineTo(.5*i,.5*o),e.stroke();break;case"ideal":e.begin(),e.moveTo(0,.5*o),e.lineTo(i,.5*o),e.stroke();break;case"expSquib":e.ellipse(0,.43*o,.14*i,.14*o),e.stroke(),e.ellipse(.86*i,.43*o,.14*i,.14*o),e.stroke(),e.begin(),e.moveTo(.83*i,.63*o),e.lineTo(.73*i,.73*o),e.lineTo(.27*i,.27*o),e.lineTo(.17*i,.37*o),e.stroke(),e.begin();var a=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,"#000000");e.setFillColor(a),e.moveTo(.2*i,.25*o),e.lineTo(.13*i,.4*o),e.lineTo(.28*i,.33*o),e.close(),e.fillAndStroke();break;case"pulse":e.begin(),e.moveTo(.3*i,.65*o),e.lineTo(.4*i,.65*o),e.lineTo(.4*i,.35*o),e.lineTo(.6*i,.35*o),e.lineTo(.6*i,.65*o),e.lineTo(.7*i,.65*o),e.stroke();break;case"invPulse":e.begin(),e.moveTo(.3*i,.35*o),e.lineTo(.4*i,.35*o),e.lineTo(.4*i,.65*o),e.lineTo(.6*i,.65*o),e.lineTo(.6*i,.35*o),e.lineTo(.7*i,.35*o),e.stroke();break;case"chopSquare":e.begin(),e.moveTo(.3*i,.5*o),e.lineTo(.33*i,.35*o),e.lineTo(.47*i,.35*o),e.lineTo(.53*i,.65*o),e.lineTo(.67*i,.65*o),e.lineTo(.7*i,.5*o),e.stroke();break;case"stepOn":e.begin(),e.moveTo(.3*i,.65*o),e.lineTo(.5*i,.65*o),e.lineTo(.5*i,.35*o),e.lineTo(.7*i,.35*o),e.stroke();break;case"stepOff":e.begin(),e.moveTo(.3*i,.35*o),e.lineTo(.5*i,.35*o),e.lineTo(.5*i,.65*o),e.lineTo(.7*i,.65*o),e.stroke();break;case"dc1":e.begin(),e.moveTo(.17*i,.5*o),e.lineTo(.83*i,.5*o),e.moveTo(.67*i,.42*o),e.lineTo(.83*i,.5*o),e.lineTo(.67*i,.58*o),e.stroke();break;case"dc2":e.begin(),e.moveTo(.5*i,.17*o),e.lineTo(.5*i,.83*o),e.moveTo(.42*i,.67*o),e.lineTo(.5*i,.83*o),e.lineTo(.58*i,.67*o),e.stroke();break;case"dc3":var s=Math.max(3,.05*Math.min(o,i)),a=3;"dependent"==l&&(a+=3),e.begin(),e.moveTo(.5*i-s,.05*o+a),e.lineTo(.5*i+s,.05*o+a),e.moveTo(.5*i,.05*o-s+a),e.lineTo(.5*i,.05*o+s+a),e.moveTo(.5*i-s,.95*o-a),e.lineTo(.5*i+s,.95*o-a),e.stroke()}},mxCellRenderer.registerShape(mxShapeElectricalSource.prototype.cst.SHAPE_SOURCE,mxShapeElectricalSource);