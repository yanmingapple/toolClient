var OpenDialog=function(){var e=document.createElement("iframe");e.style.backgroundColor="transparent",e.allowTransparency="true",e.style.borderStyle="none",e.style.borderWidth="0px",e.style.overflow="hidden",e.frameBorder="0";e.setAttribute("width",0+(Editor.useLocalStorage?640:320)+"px"),e.setAttribute("height",0+(Editor.useLocalStorage?480:220)+"px"),e.setAttribute("src",OPEN_FORM),this.container=e},ColorDialog=function(t,e,l,i){this.editorUi=t;var c=document.createElement("input");c.style.marginBottom="10px",mxClient.IS_IE&&(c.style.marginTop="10px",document.body.appendChild(c));var n=null!=l?l:this.createApplyFunction();function m(){var e=c.value;/(^#?[a-zA-Z0-9]*$)/.test(e)?("none"!=e&&"#"!=e.charAt(0)&&(e="#"+e),ColorDialog.addRecentColor("none"!=e?e.substring(1):e,12),n(e),t.hideDialog()):t.handleError({message:mxResources.get("invalidInput")})}this.init=function(){mxClient.IS_TOUCH||c.focus()};var p=new mxJSColor.color(c);p.pickerOnfocus=!1,p.showPicker();var o=document.createElement("div");mxJSColor.picker.box.style.position="relative",mxJSColor.picker.box.style.width="230px",mxJSColor.picker.box.style.height="100px",mxJSColor.picker.box.style.paddingBottom="10px",o.appendChild(mxJSColor.picker.box);var u=document.createElement("center");function h(){var e=r(0==ColorDialog.recentColors.length?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return e.style.marginBottom="8px",e}var a,r=mxUtils.bind(this,function(e,t,i,l){t=null!=t?t:12;var n=document.createElement("table");n.style.borderCollapse="collapse",n.setAttribute("cellspacing","0"),n.style.marginBottom="20px",n.style.cellSpacing="0px";var o=document.createElement("tbody");n.appendChild(o);for(var a=e.length/t,r=0;r<a;r++){for(var d=document.createElement("tr"),s=0;s<t;s++)mxUtils.bind(this,function(e){var t,l=document.createElement("td");l.style.border="1px solid black",l.style.padding="0px",l.style.width="16px",l.style.height="16px","none"==(e=null==e?i:e)?l.style.background="url('"+Dialog.prototype.noColorImage+"')":null!=e&&(l.style.backgroundColor="#"+e,null!=(t=this.colorNames[e.toUpperCase()])&&l.setAttribute("title",t)),d.appendChild(l),null!=e&&(l.style.cursor="pointer",mxEvent.addListener(l,"click",function(){"none"==e?(p.fromString("ffffff"),c.value="none"):p.fromString(e)}),mxEvent.addListener(l,"dblclick",m))})(e[r*t+s]);o.appendChild(d)}return l&&((l=document.createElement("td")).setAttribute("title",mxResources.get("reset")),l.style.border="1px solid black",l.style.padding="0px",l.style.width="16px",l.style.height="16px",l.style.backgroundImage="url('"+Dialog.prototype.closeImage+"')",l.style.backgroundPosition="center center",l.style.backgroundRepeat="no-repeat",l.style.cursor="pointer",d.appendChild(l),mxEvent.addListener(l,"click",function(){ColorDialog.resetRecentColors(),n.parentNode.replaceChild(h(),n)})),u.appendChild(n),n});o.appendChild(c),mxClient.IS_IE||mxClient.IS_IE11?c.style.width="216px":(c.style.width="182px",(a=document.createElement("input")).setAttribute("type","color"),a.style.visibility="hidden",a.style.width="0px",a.style.height="0px",a.style.border="none",a.style.marginLeft="2px",o.style.whiteSpace="nowrap",o.appendChild(a),o.appendChild(mxUtils.button("...",function(){document.activeElement==a?c.focus():(a.value="#"+c.value,a.click())})),mxEvent.addListener(a,"input",function(){p.fromString(a.value.substring(1))})),mxUtils.br(o),h();var d=r(this.presetColors);d.style.marginBottom="8px",(d=r(this.defaultColors)).style.marginBottom="16px",o.appendChild(u);var s=document.createElement("div");s.style.textAlign="right",s.style.whiteSpace="nowrap";l=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog(),null!=i&&i()});l.className="geBtn",t.editor.cancelFirst&&s.appendChild(l);d=mxUtils.button(mxResources.get("apply"),m);d.className="geBtn gePrimaryBtn",s.appendChild(d),t.editor.cancelFirst||s.appendChild(l),null!=e&&("none"==e?(p.fromString("ffffff"),c.value="none"):p.fromString(e)),o.appendChild(s),this.picker=p,this.colorInput=c,mxEvent.addListener(o,"keydown",function(e){27==e.keyCode&&(t.hideDialog(),null!=i&&i(),mxEvent.consume(e))}),this.container=o};ColorDialog.prototype.presetColors=["E6D0DE","CDA2BE","B5739D","E1D5E7","C3ABD0","A680B8","D4E1F5","A9C4EB","7EA6E0","D5E8D4","9AC7BF","67AB9F","D5E8D4","B9E0A5","97D077","FFF2CC","FFE599","FFD966","FFF4C3","FFCE9F","FFB570","F8CECC","F19C99","EA6B66"],ColorDialog.prototype.colorNames={},ColorDialog.prototype.defaultColors=["none","FFFFFF","E6E6E6","CCCCCC","B3B3B3","999999","808080","666666","4D4D4D","333333","1A1A1A","000000","FFCCCC","FFE6CC","FFFFCC","E6FFCC","CCFFCC","CCFFE6","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE6","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","FF6666","FFB366","FFFF66","B3FF66","66FF66","66FFB3","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B3","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","007FFF","0000FF","7F00FF","FF00FF","FF0080","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","990000","994C00","999900","4D9900","009900","00994D","009999","004C99","000099","4C0099","990099","99004D","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","330000","331A00","333300","1A3300","003300","00331A","003333","001933","000033","190033","330033","33001A"],ColorDialog.prototype.createApplyFunction=function(){return mxUtils.bind(this,function(e){var t=this.editorUi.editor.graph;t.getModel().beginUpdate();try{t.setCellStyles(this.currentColorKey,e),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[this.currentColorKey],"values",[e],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}})},ColorDialog.recentColors=[],ColorDialog.addRecentColor=function(e,t){null!=e&&(mxUtils.remove(e,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,e),ColorDialog.recentColors.length>=t&&ColorDialog.recentColors.pop())},ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]};var AboutDialog=function(e){var t=document.createElement("div");t.setAttribute("align","center");var l=document.createElement("h3");mxUtils.write(l,mxResources.get("about")+" GraphEditor"),t.appendChild(l);l=document.createElement("img");l.style.border="0px",l.setAttribute("width","176"),l.setAttribute("width","151"),l.setAttribute("src",IMAGE_PATH+"/logo.png"),t.appendChild(l),mxUtils.br(t),mxUtils.write(t,"Powered by mxGraph "+mxClient.VERSION),mxUtils.br(t);l=document.createElement("a");l.setAttribute("href","http://www.jgraph.com/"),l.setAttribute("target","_blank"),mxUtils.write(l,"www.jgraph.com"),t.appendChild(l),mxUtils.br(t),mxUtils.br(t);l=mxUtils.button(mxResources.get("close"),function(){e.hideDialog()});l.className="geBtn gePrimaryBtn",t.appendChild(l),this.container=t},TextareaDialog=function(e,t,l,i,n,o,a,r,d,s,c,m,p,u){a=null!=a?a:300,r=null!=r?r:120,s=null!=s&&s;var h,g=document.createElement("table"),x=document.createElement("tbody"),b=document.createElement("tr");(h=document.createElement("td")).style.fontSize="10pt",h.style.width="100px",mxUtils.write(h,t),b.appendChild(h),x.appendChild(b),b=document.createElement("tr"),h=document.createElement("td");var C=document.createElement("textarea");if(c&&C.setAttribute("wrap","off"),C.setAttribute("spellcheck","false"),C.setAttribute("autocorrect","off"),C.setAttribute("autocomplete","off"),C.setAttribute("autocapitalize","off"),mxUtils.write(C,l||""),C.style.resize="none",C.style.width=a+"px",C.style.height=r+"px",this.textarea=C,this.init=function(){C.focus(),C.scrollTop=0},h.appendChild(C),b.appendChild(h),x.appendChild(b),b=document.createElement("tr"),(h=document.createElement("td")).style.paddingTop="14px",h.style.whiteSpace="nowrap",h.setAttribute("align","right"),"1"!=urlParams.customMenu&&null!=p&&((r=mxUtils.button(mxResources.get("help"),function(){e.editor.graph.openLink(p)})).className="geBtn",h.appendChild(r)),null!=u)for(var v=0;v<u.length;v++)!function(e,t){e=mxUtils.button(e,function(e){t(e,C)});e.className="geBtn",h.appendChild(e)}(u[v][0],u[v][1]);o=mxUtils.button(o||mxResources.get("cancel"),function(){e.hideDialog(),null!=n&&n()});o.className="geBtn",e.editor.cancelFirst&&h.appendChild(o),null!=d&&d(h,C),null!=i&&((m=mxUtils.button(m||mxResources.get("apply"),function(){s||e.hideDialog(),i(C.value)})).className="geBtn gePrimaryBtn",h.appendChild(m)),e.editor.cancelFirst||h.appendChild(o),b.appendChild(h),x.appendChild(b),g.appendChild(x),this.container=g},EditDiagramDialog=function(o){var e=document.createElement("div");e.style.textAlign="right";var a=document.createElement("textarea");a.setAttribute("wrap","off"),a.setAttribute("spellcheck","false"),a.setAttribute("autocorrect","off"),a.setAttribute("autocomplete","off"),a.setAttribute("autocapitalize","off"),a.style.overflow="auto",a.style.resize="none",a.style.width="600px",a.style.height="360px",a.style.marginBottom="16px",a.value=mxUtils.getPrettyXml(o.editor.getGraphXml()),e.appendChild(a),this.init=function(){a.focus()},Graph.fileSupport&&(a.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()},!1),a.addEventListener("drop",function(e){var t,l;e.stopPropagation(),e.preventDefault(),0<e.dataTransfer.files.length?(t=e.dataTransfer.files[0],(l=new FileReader).onload=function(e){a.value=e.target.result},l.readAsText(t)):a.value=o.extractGraphModelFromEvent(e)},!1));var t=mxUtils.button(mxResources.get("cancel"),function(){o.hideDialog()});t.className="geBtn",o.editor.cancelFirst&&e.appendChild(t);var l,r=document.createElement("select");r.style.width="180px",r.className="geBtn",o.editor.graph.isEnabled()&&((l=document.createElement("option")).setAttribute("value","replace"),mxUtils.write(l,mxResources.get("replaceExistingDrawing")),r.appendChild(l)),EditDiagramDialog.showNewWindowOption&&"1"!=urlParams.customMenu&&((l=document.createElement("option")).setAttribute("value","new"),mxUtils.write(l,mxResources.get("openInNewWindow")),r.appendChild(l)),o.editor.graph.isEnabled()&&((i=document.createElement("option")).setAttribute("value","import"),mxUtils.write(i,mxResources.get("addToExistingDrawing")),r.appendChild(i)),e.appendChild(r);var i=mxUtils.button(mxResources.get("ok"),function(){var e=Graph.zapGremlins(mxUtils.trim(a.value)),t=null;if("new"==r.value)o.hideDialog(),o.editor.editAsNew(e);else if("replace"==r.value){o.editor.graph.model.beginUpdate();try{o.editor.setGraphXml(mxUtils.parseXml(e).documentElement),o.hideDialog()}catch(e){t=e}finally{o.editor.graph.model.endUpdate();let e=o.editor.graph.model.root.children,l;0!==e.length&&e.map((e,t)=>{console.log(e),"hytAnswerLayer"!=e.layer&&"KSDrawingLayer"!=e.value||(l=t)}),console.log(l),l&&o.editor.graph.setDefaultParent(o.editor.graph.model.getChildAt(o.editor.graph.model.root,l))}}else if("import"==r.value){o.editor.graph.model.beginUpdate();try{var l=mxUtils.parseXml(e),i=new mxGraphModel;new mxCodec(l).decode(l.documentElement,i);var n=i.getChildren(i.getChildAt(i.getRoot(),0));null!=n&&o.editor.graph.setSelectionCells(o.editor.graph.importCells(n)),o.hideDialog()}catch(e){t=e}finally{o.editor.graph.model.endUpdate()}}null!=t&&mxUtils.alert(t.message)});i.className="geBtn gePrimaryBtn",e.appendChild(i),o.editor.cancelFirst||e.appendChild(t),this.container=e};EditDiagramDialog.showNewWindowOption=!0;var ExportDialog=function(a){var e,r=a.editor.graph,t=r.getGraphBounds(),l=r.view.scale,i=Math.ceil(t.width/l),n=Math.ceil(t.height/l),o=document.createElement("table"),d=document.createElement("tbody");o.setAttribute("cellpadding",mxClient.IS_SF?"0":"2"),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",t.style.width="100px",mxUtils.write(t,mxResources.get("filename")+":"),e.appendChild(t);var s=document.createElement("input");s.setAttribute("value",a.editor.getOrCreateFilename()),s.style.width="180px",(t=document.createElement("td")).appendChild(s),e.appendChild(t),d.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("format")+":"),e.appendChild(t);var c=document.createElement("select");c.style.width="180px";l=document.createElement("option");l.setAttribute("value","png"),mxUtils.write(l,mxResources.get("formatPng")),c.appendChild(l);l=document.createElement("option");ExportDialog.showGifOption&&(l.setAttribute("value","gif"),mxUtils.write(l,mxResources.get("formatGif")),c.appendChild(l));l=document.createElement("option");l.setAttribute("value","jpg"),mxUtils.write(l,mxResources.get("formatJpg")),c.appendChild(l);l=document.createElement("option");l.setAttribute("value","pdf"),mxUtils.write(l,mxResources.get("formatPdf")),c.appendChild(l);l=document.createElement("option");l.setAttribute("value","svg"),mxUtils.write(l,mxResources.get("formatSvg")),c.appendChild(l),ExportDialog.showXmlOption&&((g=document.createElement("option")).setAttribute("value","xml"),mxUtils.write(g,mxResources.get("formatXml")),c.appendChild(g)),(t=document.createElement("td")).appendChild(c),e.appendChild(t),d.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("zoom")+" (%):"),e.appendChild(t);var m=document.createElement("input");m.setAttribute("type","number"),m.setAttribute("value","100"),m.style.width="180px",(t=document.createElement("td")).appendChild(m),e.appendChild(t),d.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("width")+":"),e.appendChild(t);var p=document.createElement("input");p.setAttribute("value",i),p.style.width="180px",(t=document.createElement("td")).appendChild(p),e.appendChild(t),d.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("height")+":"),e.appendChild(t);var u=document.createElement("input");u.setAttribute("value",n),u.style.width="180px",(t=document.createElement("td")).appendChild(u),e.appendChild(t),d.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("dpi")+":"),e.appendChild(t);var h=document.createElement("select");h.style.width="180px";l=document.createElement("option");l.setAttribute("value","100"),mxUtils.write(l,"100dpi"),h.appendChild(l);var g=document.createElement("option");g.setAttribute("value","200"),mxUtils.write(g,"200dpi"),h.appendChild(g);l=document.createElement("option");l.setAttribute("value","300"),mxUtils.write(l,"300dpi"),h.appendChild(l);g=document.createElement("option");g.setAttribute("value","400"),mxUtils.write(g,"400dpi"),h.appendChild(g);l=document.createElement("option");l.setAttribute("value","custom"),mxUtils.write(l,mxResources.get("custom")),h.appendChild(l);var x=document.createElement("input");x.style.width="180px",x.style.display="none",x.setAttribute("value","100"),x.setAttribute("type","number"),x.setAttribute("min","50"),x.setAttribute("step","50");var b=!1;mxEvent.addListener(h,"change",function(){"custom"==this.value?(this.style.display="none",x.style.display="",x.focus()):(x.value=this.value,b||(m.value=this.value))}),mxEvent.addListener(x,"change",function(){var e=parseInt(x.value);isNaN(e)||e<=0?x.style.backgroundColor="red":(x.style.backgroundColor="",b||(m.value=e))}),(t=document.createElement("td")).appendChild(h),t.appendChild(x),e.appendChild(t),d.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("background")+":"),e.appendChild(t);var C=document.createElement("input");C.setAttribute("type","checkbox"),C.checked=null==r.background||r.background==mxConstants.NONE,(t=document.createElement("td")).appendChild(C),mxUtils.write(t,mxResources.get("transparent")),e.appendChild(t),d.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("grid")+":"),e.appendChild(t);var v=document.createElement("input");v.setAttribute("type","checkbox"),v.checked=!1,(t=document.createElement("td")).appendChild(v),e.appendChild(t),d.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("borderWidth")+":"),e.appendChild(t);var y=document.createElement("input");function E(){var e=s.value,t=e.lastIndexOf(".");s.value=0<t?e.substring(0,t+1)+c.value:e+"."+c.value,"xml"===c.value?(m.setAttribute("disabled","true"),p.setAttribute("disabled","true"),u.setAttribute("disabled","true"),y.setAttribute("disabled","true")):(m.removeAttribute("disabled"),p.removeAttribute("disabled"),u.removeAttribute("disabled"),y.removeAttribute("disabled")),"png"===c.value||"svg"===c.value||"pdf"===c.value?C.removeAttribute("disabled"):C.setAttribute("disabled","disabled"),"png"===c.value||"jpg"===c.value||"pdf"===c.value?v.removeAttribute("disabled"):v.setAttribute("disabled","disabled"),"png"===c.value?(h.removeAttribute("disabled"),x.removeAttribute("disabled")):(h.setAttribute("disabled","disabled"),x.setAttribute("disabled","disabled"))}function f(){p.value*u.value>MAX_AREA||p.value<=0?p.style.backgroundColor="red":p.style.backgroundColor="",p.value*u.value>MAX_AREA||u.value<=0?u.style.backgroundColor="red":u.style.backgroundColor=""}y.setAttribute("type","number"),y.setAttribute("value",ExportDialog.lastBorderValue),y.style.width="180px",(t=document.createElement("td")).appendChild(y),e.appendChild(t),d.appendChild(e),o.appendChild(d),mxEvent.addListener(c,"change",E),E(),mxEvent.addListener(m,"change",function(){b=!0;var e=Math.max(0,parseFloat(m.value)||100)/100;m.value=parseFloat((100*e).toFixed(2)),0<i?(p.value=Math.floor(i*e),u.value=Math.floor(n*e)):(m.value="100",p.value=i,u.value=n),f()}),mxEvent.addListener(p,"change",function(){var e=parseInt(p.value)/i;0<e?(m.value=parseFloat((100*e).toFixed(2)),u.value=Math.floor(n*e)):(m.value="100",p.value=i,u.value=n),f()}),mxEvent.addListener(u,"change",function(){var e=parseInt(u.value)/n;0<e?(m.value=parseFloat((100*e).toFixed(2)),p.value=Math.floor(i*e)):(m.value="100",p.value=i,u.value=n),f()}),e=document.createElement("tr"),(t=document.createElement("td")).setAttribute("align","right"),t.style.paddingTop="22px",t.colSpan=2;g=mxUtils.button(mxResources.get("export"),mxUtils.bind(this,function(){var e,t,l,i,n,o;parseInt(m.value)<=0?mxUtils.alert(mxResources.get("drawingEmpty")):(e=s.value,t=c.value,l=Math.max(0,parseFloat(m.value)||100)/100,i=Math.max(0,parseInt(y.value)),n=r.background,o=Math.max(1,parseInt(x.value)),"svg"!=t&&"png"!=t&&"pdf"!=t||!C.checked?null!=n&&n!=mxConstants.NONE||(n="#ffffff"):n=null,ExportDialog.lastBorderValue=i,ExportDialog.exportFile(a,e,t,n,l,i,o,v.checked))}));g.className="geBtn gePrimaryBtn";l=mxUtils.button(mxResources.get("cancel"),function(){a.hideDialog()});l.className="geBtn",a.editor.cancelFirst?(t.appendChild(l),t.appendChild(g)):(t.appendChild(g),t.appendChild(l)),e.appendChild(t),d.appendChild(e),o.appendChild(d),this.container=o};ExportDialog.lastBorderValue=0,ExportDialog.showGifOption=!0,ExportDialog.showXmlOption=!0,ExportDialog.exportFile=function(e,t,l,i,n,o,a,r){var d,s,c,m=e.editor.graph;"xml"==l?ExportDialog.saveLocalFile(e,mxUtils.getXml(e.editor.getGraphXml()),t,l):"svg"==l?ExportDialog.saveLocalFile(e,mxUtils.getXml(m.getSvg(i,n,o)),t,l):(d=m.getGraphBounds(),c=(s=mxUtils.createXmlDocument()).createElement("output"),s.appendChild(c),(s=new mxXmlCanvas2D(c)).translate(Math.floor((o/n-d.x)/m.view.scale),Math.floor((o/n-d.y)/m.view.scale)),s.scale(n/m.view.scale),(new mxImageExport).drawState(m.getView().getState(m.model.root),s),s="xml="+encodeURIComponent(mxUtils.getXml(c)),c=Math.ceil(d.width*n/m.view.scale+2*o),o=Math.ceil(d.height*n/m.view.scale+2*o),s.length<=MAX_REQUEST_SIZE&&c*o<MAX_AREA?(e.hideDialog(),new mxXmlRequest(EXPORT_URL,"format="+l+"&filename="+encodeURIComponent(t)+"&bg="+(null!=i?i:"none")+"&w="+c+"&h="+o+"&"+s+"&dpi="+a).simulate(document,"_blank")):mxUtils.alert(mxResources.get("drawingTooLarge")))},ExportDialog.saveLocalFile=function(e,t,l,i){t.length<MAX_REQUEST_SIZE?(e.hideDialog(),new mxXmlRequest(SAVE_URL,"xml="+encodeURIComponent(t)+"&filename="+encodeURIComponent(l)+"&format="+i).simulate(document,"_blank")):(mxUtils.alert(mxResources.get("drawingTooLarge")),mxUtils.popup(xml))};var EditDataDialog=function(l,i){var e=document.createElement("div"),n=l.editor.graph,o=n.getModel().getValue(i);mxUtils.isNode(o)||((k=mxUtils.createXmlDocument().createElement("object")).setAttribute("label",o||""),o=k);var t={};try{null!=(h=mxUtils.getValue(l.editor.graph.getCurrentCellStyle(i),"metaData",null))&&(t=JSON.parse(h))}catch(e){}var a=new mxForm("properties");a.table.style.width="100%";for(var r,d=o.attributes,s=[],c=[],m=0,p=null!=EditDataDialog.getDisplayIdForCell?EditDataDialog.getDisplayIdForCell(l,i):null,u=function(e,t){var l=document.createElement("div");l.style.position="relative",l.style.paddingRight="20px",l.style.boxSizing="border-box",l.style.width="100%";var i=document.createElement("a"),n=mxUtils.createImage(Dialog.prototype.closeImage);n.style.height="9px",n.style.fontSize="9px",n.style.marginBottom=mxClient.IS_IE11?"-1px":"5px",i.className="geButton",i.setAttribute("title",mxResources.get("delete")),i.style.position="absolute",i.style.top="4px",i.style.right="0px",i.style.margin="0px",i.style.width="9px",i.style.height="9px",i.style.cursor="pointer",i.appendChild(n);var o,t=(o=t,function(){for(var e=0,t=0;t<s.length;t++){if(s[t]==o){c[t]=null,a.table.deleteRow(e+(null!=p?1:0));break}null!=c[t]&&e++}});mxEvent.addListener(i,"click",t);t=e.parentNode;l.appendChild(e),l.appendChild(i),t.appendChild(l)},h=[],g=n.getModel().getParent(i)==n.getModel().getRoot(),x=0;x<d.length;x++)!g&&"label"==d[x].nodeName||"placeholders"==d[x].nodeName||h.push({name:d[x].nodeName,value:d[x].nodeValue});h.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),null!=p&&((U=document.createElement("div")).style.width="100%",U.style.fontSize="11px",U.style.textAlign="center",mxUtils.write(U,p),r=a.addField(mxResources.get("id")+":",U),mxEvent.addListener(U,"dblclick",function(e){mxEvent.isShiftDown(e)&&(e=new FilenameDialog(l,p,mxResources.get("apply"),mxUtils.bind(this,function(e){null!=e&&0<e.length&&e!=p&&(null==n.getModel().getCell(e)?(n.getModel().cellRemoved(i),i.setId(e),p=e,r.innerHTML=mxUtils.htmlEntities(e),n.getModel().cellAdded(i)):l.handleError({message:mxResources.get("alreadyExst",[e])}))}),mxResources.get("id")),l.showDialog(e.container,300,80,!0,!0),e.init())}),U.setAttribute("title","Shift+Double Click to Edit ID"));for(var b,C,v,x=0;x<h.length;x++)b=m,C=h[x].name,v=h[x].value,s[b]=C,c[b]=a.addTextarea(s[m]+":",v,2),c[b].style.width="100%",0<v.indexOf("\n")&&c[b].setAttribute("rows","2"),u(c[b],C),null!=t[C]&&0==t[C].editable&&c[b].setAttribute("disabled","disabled"),m++;var y=document.createElement("div");y.style.position="absolute",y.style.top="30px",y.style.left="30px",y.style.right="30px",y.style.bottom="80px",y.style.overflowY="auto",y.appendChild(a.table);var E=document.createElement("div");E.style.boxSizing="border-box",E.style.paddingRight="160px",E.style.whiteSpace="nowrap",E.style.marginTop="6px",E.style.width="100%";var f=document.createElement("input");f.setAttribute("placeholder",mxResources.get("enterPropertyName")),f.setAttribute("type","text"),f.setAttribute("size",mxClient.IS_IE||mxClient.IS_IE11?"36":"40"),f.style.boxSizing="border-box",f.style.marginLeft="2px",f.style.width="100%",E.appendChild(f),y.appendChild(E),e.appendChild(y);var w=mxUtils.button(mxResources.get("addProperty"),function(){var e=f.value;if(0<e.length&&"label"!=e&&"placeholders"!=e&&e.indexOf(":")<0)try{var t,l=mxUtils.indexOf(s,e);0<=l&&null!=c[l]?c[l].focus():(o.cloneNode(!1).setAttribute(e,""),0<=l&&(s.splice(l,1),c.splice(l,1)),s.push(e),(t=a.addTextarea(e+":","",2)).style.width="100%",c.push(t),u(t,e),t.focus()),w.setAttribute("disabled","disabled"),f.value=""}catch(e){mxUtils.alert(e)}else mxUtils.alert(mxResources.get("invalidName"))});this.init=function(){(0<c.length?c[0]:f).focus()},w.setAttribute("title",mxResources.get("addProperty")),w.setAttribute("disabled","disabled"),w.style.textOverflow="ellipsis",w.style.position="absolute",w.style.overflow="hidden",w.style.width="144px",w.style.right="0px",w.className="geBtn",E.appendChild(w);var F=mxUtils.button(mxResources.get("cancel"),function(){l.hideDialog.apply(l,arguments)});F.className="geBtn";var A=mxUtils.button(mxResources.get("apply"),function(){try{l.hideDialog.apply(l,arguments),o=o.cloneNode(!0);for(var e=!1,t=0;t<s.length;t++)null==c[t]?o.removeAttribute(s[t]):(o.setAttribute(s[t],c[t].value),e=e||"placeholder"==s[t]&&"1"==o.getAttribute("placeholders"));e&&o.removeAttribute("label"),n.getModel().setValue(i,o)}catch(e){mxUtils.alert(e)}});function D(){0<f.value.length?w.removeAttribute("disabled"):w.setAttribute("disabled","disabled")}A.className="geBtn gePrimaryBtn",mxEvent.addListener(f,"keyup",D),mxEvent.addListener(f,"change",D);var U,k=document.createElement("div");k.style.cssText="position:absolute;left:30px;right:30px;text-align:right;bottom:30px;height:40px;",(l.editor.graph.getModel().isVertex(i)||l.editor.graph.getModel().isEdge(i))&&((U=document.createElement("span")).style.marginRight="10px",(y=document.createElement("input")).setAttribute("type","checkbox"),y.style.marginRight="6px","1"==o.getAttribute("placeholders")&&(y.setAttribute("checked","checked"),y.defaultChecked=!0),mxEvent.addListener(y,"click",function(){"1"==o.getAttribute("placeholders")?o.removeAttribute("placeholders"):o.setAttribute("placeholders","1")}),U.appendChild(y),mxUtils.write(U,mxResources.get("placeholders")),null!=EditDataDialog.placeholderHelpLink&&"1"!=urlParams.customMenu&&((E=document.createElement("a")).setAttribute("href",EditDataDialog.placeholderHelpLink),E.setAttribute("title",mxResources.get("help")),E.setAttribute("target","_blank"),E.style.marginLeft="8px",E.style.cursor="help",y=document.createElement("img"),mxUtils.setOpacity(y,50),y.style.height="16px",y.style.width="16px",y.setAttribute("border","0"),y.setAttribute("valign","middle"),y.style.marginTop=mxClient.IS_IE11?"0px":"-4px",y.setAttribute("src",Editor.helpImage),E.appendChild(y),U.appendChild(E)),k.appendChild(U)),l.editor.cancelFirst?(k.appendChild(F),k.appendChild(A)):(k.appendChild(A),k.appendChild(F)),e.appendChild(k),this.container=e};EditDataDialog.getDisplayIdForCell=function(e,t){var l=null;return l=null!=e.editor.graph.getModel().getParent(t)?t.getId():l},EditDataDialog.placeholderHelpLink=null;var LinkDialog=function(t,e,l,i){var n,o,a;"1"!=urlParams.customMenu?(n=document.createElement("div"),mxUtils.write(n,mxResources.get("editLink")+":"),(a=document.createElement("div")).className="geTitle",a.style.backgroundColor="transparent",a.style.borderColor="transparent",a.style.whiteSpace="nowrap",a.style.textOverflow="clip",a.style.cursor="default",a.style.paddingRight="20px",(o=document.createElement("input")).setAttribute("value",e),o.setAttribute("placeholder","http://www.example.com/"),o.setAttribute("type","text"),o.style.marginTop="6px",o.style.width="400px",o.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')",o.style.backgroundRepeat="no-repeat",o.style.backgroundPosition="100% 50%",o.style.paddingRight="14px",(e=document.createElement("div")).setAttribute("title",mxResources.get("reset")),e.style.position="relative",e.style.left="-16px",e.style.width="12px",e.style.height="14px",e.style.cursor="pointer",e.style.display="inline-block",e.style.top="3px",e.style.background="url("+IMAGE_PATH+"/transparent.gif)",mxEvent.addListener(e,"click",function(){o.value="",o.focus()}),a.appendChild(o),a.appendChild(e),n.appendChild(a),this.init=function(){o.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode?o.select():document.execCommand("selectAll",!1,null)},(e=document.createElement("div")).style.marginTop="18px",e.style.textAlign="right",mxEvent.addListener(o,"keypress",function(e){13==e.keyCode&&(t.hideDialog(),i(o.value))}),(a=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()})).className="geBtn",t.editor.cancelFirst&&e.appendChild(a),(l=mxUtils.button(l,function(){t.hideDialog(),i(o.value)})).className="geBtn gePrimaryBtn",e.appendChild(l),t.editor.cancelFirst||e.appendChild(a),n.appendChild(e),this.container=n):alert("暂时不支持此功能!")},OutlineWindow=function(e,t,l,i,n){e.editor.graph;var o=document.createElement("div");o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.overflow="hidden",this.window=new mxWindow(mxResources.get("outline"),o,t,l,i,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-("1"==urlParams.sketch?3:48))),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var a=mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)});mxEvent.addListener(window,"resize",a);var r=e.createOutline(this.window);this.destroy=function(){mxEvent.removeListener(window,"resize",a),this.window.destroy(),r.destroy()},this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit(),r.setSuspended(!1)})),this.window.addListener(mxEvent.HIDE,mxUtils.bind(this,function(){r.setSuspended(!0)})),this.window.addListener(mxEvent.NORMALIZE,mxUtils.bind(this,function(){r.setSuspended(!1)})),this.window.addListener(mxEvent.MINIMIZE,mxUtils.bind(this,function(){r.setSuspended(!0)})),r.init(o);var d=e.actions.get("zoomIn"),s=e.actions.get("zoomOut");mxEvent.addMouseWheelListener(function(e,t){for(var l=!1,i=mxEvent.getSource(e);null!=i;){if(i==r.svg){l=!0;break}i=i.parentNode}l&&(t?d:s).funct()})},LayersWindow=function(s,e,t,l,i){var c=s.editor.graph,n=document.createElement("div");n.style.userSelect="none",n.style.background=Editor.isDarkMode()?Dialog.backdropColor:"#fff",n.style.border="1px solid whiteSmoke",n.style.height="100%",n.style.marginBottom="10px",n.style.overflow="auto";var o=EditorUi.compactUi?"26px":"30px",m=document.createElement("div");m.style.backgroundColor=Editor.isDarkMode()?Dialog.backdropColor:"#fff",m.style.position="absolute",m.style.overflow="auto",m.style.left="0px",m.style.right="0px",m.style.top="0px",m.style.bottom=parseInt(o)+7+"px",n.appendChild(m);var p=null,u=null;mxEvent.addListener(n,"dragover",function(e){e.dataTransfer.dropEffect="move",u=0,e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(n,"drop",function(e){e.stopPropagation(),e.preventDefault()});var h=null,g=null,a=document.createElement("div");a.className="geToolbarContainer",a.style.position="absolute",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.style.height=o,a.style.overflow="hidden",a.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",a.style.backgroundColor=Editor.isDarkMode()?Dialog.backdropColor:"whiteSmoke",a.style.borderWidth="1px 0px 0px 0px",a.style.borderColor="#c3c3c3",a.style.borderStyle="solid",a.style.display="block",a.style.whiteSpace="nowrap";var r=document.createElement("a");r.className="geButton";var d=r.cloneNode(!1),x=document.createElement("img");x.setAttribute("border","0"),x.setAttribute("width","22"),x.setAttribute("src",Editor.trashImage),x.style.opacity="0.9",Editor.isDarkMode()&&(x.style.filter="invert(100%)"),d.appendChild(x),mxEvent.addListener(d,"click",function(e){if(c.isEnabled()){c.model.beginUpdate();try{var t=c.model.root.getIndex(g);c.removeCells([g],!1),0==c.model.getChildCount(c.model.root)?(c.model.add(c.model.root,new mxCell),c.setDefaultParent(null)):0<t&&t<=c.model.getChildCount(c.model.root)?c.setDefaultParent(c.model.getChildAt(c.model.root,t-1)):c.setDefaultParent(null)}finally{c.model.endUpdate()}}mxEvent.consume(e)}),c.isEnabled()||(d.className="geButton mxDisabled"),a.appendChild(d);var b=r.cloneNode();b.setAttribute("title",mxUtils.trim(mxResources.get("moveSelectionTo",["..."]))),(x=x.cloneNode(!1)).setAttribute("src",Editor.verticalDotsImage),b.appendChild(x),mxEvent.addListener(b,"click",function(e){var t;c.isEnabled()&&!c.isSelectionEmpty()&&(t=mxUtils.getOffset(b),s.showPopupMenu(mxUtils.bind(this,function(l,i){for(var e=h-1;0<=e;e--)mxUtils.bind(this,function(e){var t=l.addItem(c.convertValueToString(e)||mxResources.get("background"),null,mxUtils.bind(this,function(){c.moveCells(c.getSelectionCells(),0,0,!1,e)}),i);1==c.getSelectionCount()&&c.model.isAncestor(e,c.getSelectionCell())&&l.addCheckmark(t,Editor.checkmarkImage)})(c.model.getChildAt(c.model.root,e))}),t.x,t.y+b.offsetHeight,e))}),a.appendChild(b);o=r.cloneNode(!1);o.setAttribute("title",mxResources.get("editData")),(x=x.cloneNode(!1)).setAttribute("src",Editor.editImage),o.appendChild(x),mxEvent.addListener(o,"click",function(e){c.isEnabled()&&s.showDataDialog(g),mxEvent.consume(e)}),c.isEnabled()||(o.className="geButton mxDisabled"),a.appendChild(o);var C=r.cloneNode(!1);C.setAttribute("title",mxResources.get("duplicate")),(x=x.cloneNode(!1)).setAttribute("src",Editor.duplicateImage),C.appendChild(x),mxEvent.addListener(C,"click",function(e){if(c.isEnabled()){var t=null;c.model.beginUpdate();try{t=c.cloneCell(g),c.cellLabelChanged(t,mxResources.get("untitledLayer")),t.setVisible(!0),t=c.addCell(t,c.model.root),c.setDefaultParent(t)}finally{c.model.endUpdate()}null==t||c.isCellLocked(t)||c.selectAll(t)}}),c.isEnabled()||(C.className="geButton mxDisabled"),a.appendChild(C);r=r.cloneNode(!1);r.setAttribute("title",mxResources.get("addLayer")),(x=x.cloneNode(!1)).setAttribute("src",Editor.addImage),r.appendChild(x),mxEvent.addListener(r,"click",function(e){if(c.isEnabled()){c.model.beginUpdate();try{var t=c.addCell(new mxCell(mxResources.get("untitledLayer")),c.model.root);c.setDefaultParent(t)}finally{c.model.endUpdate()}}mxEvent.consume(e)}),c.isEnabled()||(r.className="geButton mxDisabled"),a.appendChild(r),n.appendChild(a);var v=new mxDictionary,y=document.createElement("span");function E(){var e=v.get(c.getLayerForCells(c.getSelectionCells()));null!=e?e.appendChild(y):null!=y.parentNode&&y.parentNode.removeChild(y)}function f(){function t(t,e,l,i){var n=document.createElement("div");n.className="geToolbarContainer",v.put(l,n),n.style.overflow="hidden",n.style.position="relative",n.style.padding="4px",n.style.height="22px",n.style.display="block",n.style.backgroundColor=Editor.isDarkMode()?Dialog.backdropColor:"whiteSmoke",n.style.borderWidth="0px 0px 1px 0px",n.style.borderColor="#c3c3c3",n.style.borderStyle="solid",n.style.whiteSpace="nowrap",n.setAttribute("title",e);var o=document.createElement("div");o.style.display="inline-block",o.style.width="100%",o.style.textOverflow="ellipsis",o.style.overflow="hidden",mxEvent.addListener(n,"dragover",function(e){e.dataTransfer.dropEffect="move",u=t,e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(n,"dragstart",function(e){p=n,mxClient.IS_FF&&e.dataTransfer.setData("Text","<layer/>")}),mxEvent.addListener(n,"dragend",function(e){null!=p&&null!=u&&c.addCell(l,c.model.root,u),u=p=null,e.stopPropagation(),e.preventDefault()});var a=document.createElement("img");a.setAttribute("draggable","false"),a.setAttribute("align","top"),a.setAttribute("border","0"),a.style.width="16px",a.style.padding="0px 6px 0 4px",a.style.marginTop="2px",a.style.cursor="pointer",a.setAttribute("title",mxResources.get(c.model.isVisible(l)?"hide":"show")),c.model.isVisible(l)?(a.setAttribute("src",Editor.visibleImage),mxUtils.setOpacity(n,75)):(a.setAttribute("src",Editor.hiddenImage),mxUtils.setOpacity(n,25)),Editor.isDarkMode()&&(a.style.filter="invert(100%)"),o.appendChild(a),mxEvent.addListener(a,"click",function(e){c.model.setVisible(l,!c.model.isVisible(l)),mxEvent.consume(e)});a=document.createElement("img");a.setAttribute("draggable","false"),a.setAttribute("align","top"),a.setAttribute("border","0"),a.style.width="16px",a.style.padding="0px 6px 0 0",a.style.marginTop="2px",a.setAttribute("title",mxResources.get("lockUnlock"));var r=c.getCurrentCellStyle(l);"1"==mxUtils.getValue(r,"locked","0")?(a.setAttribute("src",Editor.lockedImage),mxUtils.setOpacity(a,75)):(a.setAttribute("src",Editor.unlockedImage),mxUtils.setOpacity(a,25)),Editor.isDarkMode()&&(a.style.filter="invert(100%)"),c.isEnabled()&&(a.style.cursor="pointer"),mxEvent.addListener(a,"click",function(e){if(c.isEnabled()){var t=null;c.getModel().beginUpdate();try{t="1"==mxUtils.getValue(r,"locked","0")?null:"1",c.setCellStyles("locked",t,[l])}finally{c.getModel().endUpdate()}"1"==t&&c.removeSelectionCells(c.getModel().getDescendants(l)),mxEvent.consume(e)}}),o.appendChild(a);var d,a=document.createElement("span");mxUtils.write(a,e),a.style.display="block",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",a.style.position="absolute",a.style.left="52px",a.style.right="8px",a.style.top="8px",o.appendChild(a),n.appendChild(o),c.isEnabled()&&((mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_IE&&document.documentMode<10)&&((o=document.createElement("div")).style.display="block",o.style.textAlign="right",o.style.whiteSpace="nowrap",o.style.position="absolute",o.style.right="16px",o.style.top="6px",0<t&&((d=document.createElement("a")).setAttribute("title",mxResources.get("toBack")),d.className="geButton",d.style.cssFloat="none",d.innerHTML="&#9660;",d.style.width="14px",d.style.height="14px",d.style.fontSize="14px",d.style.margin="0px",d.style.marginTop="-1px",o.appendChild(d),mxEvent.addListener(d,"click",function(e){c.isEnabled()&&c.addCell(l,c.model.root,t-1),mxEvent.consume(e)})),0<=t&&t<h-1&&((d=document.createElement("a")).setAttribute("title",mxResources.get("toFront")),d.className="geButton",d.style.cssFloat="none",d.innerHTML="&#9650;",d.style.width="14px",d.style.height="14px",d.style.fontSize="14px",d.style.margin="0px",d.style.marginTop="-1px",o.appendChild(d),mxEvent.addListener(d,"click",function(e){c.isEnabled()&&c.addCell(l,c.model.root,t+1),mxEvent.consume(e)})),n.appendChild(o)),mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&(n.setAttribute("draggable","true"),n.style.cursor="move")),mxEvent.addListener(n,"dblclick",function(e){var t=mxEvent.getSource(e).nodeName;"INPUT"!=t&&"IMG"!=t&&(function(t){var e;c.isEnabled()&&null!=t&&(e=c.convertValueToString(t),e=new FilenameDialog(s,e||mxResources.get("background"),mxResources.get("rename"),mxUtils.bind(this,function(e){null!=e&&c.cellLabelChanged(t,e)}),mxResources.get("enterName")),s.showDialog(e.container,300,100,!0,!0),e.init())}(l),mxEvent.consume(e))}),c.getDefaultParent()==l&&(n.style.background=Editor.isDarkMode()?"#505759":"#e6eff8",n.style.fontWeight=c.isEnabled()?"bold":"",g=l),mxEvent.addListener(n,"click",function(e){c.isEnabled()&&(c.setDefaultParent(i),c.view.setCurrentRoot(null),mxEvent.isShiftDown(e)&&c.setSelectionCells(l.children),mxEvent.consume(e))}),m.appendChild(n)}h=c.model.getChildCount(c.model.root),m.innerHTML="",v.clear();for(var l=h-1;0<=l;l--)mxUtils.bind(this,function(e){t(l,c.convertValueToString(e)||mxResources.get("background"),e,e)})(c.model.getChildAt(c.model.root,l));var e=c.convertValueToString(g)||mxResources.get("background");d.setAttribute("title",mxResources.get("removeIt",[e])),C.setAttribute("title",mxResources.get("duplicateIt",[e])),c.isSelectionEmpty()&&(b.className="geButton mxDisabled"),E()}y.setAttribute("title",mxResources.get("selectionOnly")),y.innerHTML="&#8226;",y.style.position="absolute",y.style.fontWeight="bold",y.style.fontSize="16pt",y.style.right="2px",y.style.top="2px",f(),c.model.addListener(mxEvent.CHANGE,f),c.addListener("defaultParentChanged",f),c.selectionModel.addListener(mxEvent.CHANGE,function(){c.isSelectionEmpty()?b.className="geButton mxDisabled":b.className="geButton",E()}),this.window=new mxWindow(mxResources.get("layers"),n,e,t,l,i,!0,!0),this.window.minimumSize=new mxRectangle(0,0,150,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.init=function(){m.scrollTop=m.scrollHeight-m.clientHeight},this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit()})),this.refreshLayers=f,this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-("1"==urlParams.sketch?3:48))),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var w=mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)});mxEvent.addListener(window,"resize",w),this.destroy=function(){mxEvent.removeListener(window,"resize",w),this.window.destroy()}};