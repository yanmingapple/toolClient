var mxSettings={currentVersion:18,defaultFormatWidth:screen.width<600?"0":"240",key:Editor.settingsKey,getLanguage:function(){return mxSettings.settings.language},setLanguage:function(t){mxSettings.settings.language=t},getUi:function(){return mxSettings.settings.ui},setUi:function(t){var e=localStorage.getItem(".drawio-config");(e=null==e?mxSettings.getDefaults():JSON.parse(e)).ui=t,delete e.isNew,e.version=mxSettings.currentVersion,localStorage.setItem(".drawio-config",JSON.stringify(e))},getShowStartScreen:function(){return mxSettings.settings.showStartScreen},setShowStartScreen:function(t){mxSettings.settings.showStartScreen=t},getGridColor:function(t){return t?mxSettings.settings.darkGridColor:mxSettings.settings.gridColor},setGridColor:function(t,e){e?mxSettings.settings.darkGridColor=t:mxSettings.settings.gridColor=t},getAutosave:function(){return mxSettings.settings.autosave},setAutosave:function(t){mxSettings.settings.autosave=t},getResizeImages:function(){return mxSettings.settings.resizeImages},setResizeImages:function(t){mxSettings.settings.resizeImages=t},getOpenCounter:function(){return mxSettings.settings.openCounter},setOpenCounter:function(t){mxSettings.settings.openCounter=t},setCustomFonts:function(t){mxSettings.settings.customFonts=t},getCustomFonts:function(){for(var t=mxSettings.settings.customFonts||[],e=0;e<t.length;e++)"string"==typeof t[e]&&(t[e]={name:t[e],url:null});return t},getLibraries:function(){return mxSettings.settings.libraries},setLibraries:function(t){mxSettings.settings.libraries=t},addCustomLibrary:function(t){mxSettings.load(),Array.isArray(mxSettings.settings.customLibraries)||(mxSettings.settings.customLibraries=[]),mxUtils.indexOf(mxSettings.settings.customLibraries,t)<0&&("L.scratchpad"===t?mxSettings.settings.customLibraries.splice(0,0,t):mxSettings.settings.customLibraries.push(t)),mxSettings.save()},removeCustomLibrary:function(t){mxSettings.load(),mxUtils.remove(t,mxSettings.settings.customLibraries),mxSettings.save()},getCustomLibraries:function(){return mxSettings.settings.customLibraries},getPlugins:function(){return mxSettings.settings.plugins},setPlugins:function(t){mxSettings.settings.plugins=t},getRecentColors:function(){return mxSettings.settings.recentColors},setRecentColors:function(t){mxSettings.settings.recentColors=t},getFormatWidth:function(){return parseInt(mxSettings.settings.formatWidth)},setFormatWidth:function(t){mxSettings.settings.formatWidth=t},isCreateTarget:function(){return mxSettings.settings.createTarget},setCreateTarget:function(t){mxSettings.settings.createTarget=t},getPageFormat:function(){return mxSettings.settings.pageFormat},setPageFormat:function(t){mxSettings.settings.pageFormat=t},getUnit:function(){return mxSettings.settings.unit||mxConstants.POINTS},setUnit:function(t){mxSettings.settings.unit=t},isRulerOn:function(){return mxSettings.settings.isRulerOn},setRulerOn:function(t){mxSettings.settings.isRulerOn=t},getDefaults:function(){return{language:"",configVersion:Editor.configVersion,customFonts:[],libraries:Sidebar.prototype.defaultEntries,customLibraries:Editor.defaultCustomLibraries,plugins:[],recentColors:[],formatWidth:mxSettings.defaultFormatWidth,createTarget:"1"==urlParams.sketch,pageFormat:mxGraph.prototype.pageFormat,search:!0,showStartScreen:!0,gridColor:mxGraphView.prototype.defaultGridColor,darkGridColor:mxGraphView.prototype.defaultDarkGridColor,autosave:!0,resizeImages:null,openCounter:0,version:mxSettings.currentVersion,isNew:!0,unit:mxConstants.POINTS,isRulerOn:!1}},init:function(){mxSettings.settings=mxSettings.getDefaults()},save:function(){if(isLocalStorage&&"undefined"!=typeof JSON)try{delete mxSettings.settings.isNew,mxSettings.settings.version=mxSettings.currentVersion,localStorage.setItem(mxSettings.key,JSON.stringify(mxSettings.settings))}catch(t){}},load:function(){isLocalStorage&&"undefined"!=typeof JSON&&mxSettings.parse(localStorage.getItem(mxSettings.key)),null==mxSettings.settings&&mxSettings.init()},parse:function(t){t=null!=t?JSON.parse(t):null;null==t||t.configVersion!=Editor.configVersion||null!=Editor.config&&Editor.config.override?(mxSettings.settings=null,mxSettings.init()):(mxSettings.settings=t,null==mxSettings.settings.plugins&&(mxSettings.settings.plugins=[]),null==mxSettings.settings.recentColors&&(mxSettings.settings.recentColors=[]),null==mxSettings.settings.customFonts&&(mxSettings.settings.customFonts=[]),null==mxSettings.settings.libraries&&(mxSettings.settings.libraries=Sidebar.prototype.defaultEntries),null==mxSettings.settings.customLibraries&&(mxSettings.settings.customLibraries=Editor.defaultCustomLibraries),null==mxSettings.settings.ui&&(mxSettings.settings.ui=""),null==mxSettings.settings.formatWidth&&(mxSettings.settings.formatWidth=mxSettings.defaultFormatWidth),null!=mxSettings.settings.lastAlert&&delete mxSettings.settings.lastAlert,null==mxSettings.settings.createTarget&&(mxSettings.settings.createTarget=!1),null==mxSettings.settings.pageFormat&&(mxSettings.settings.pageFormat=mxGraph.prototype.pageFormat),null==mxSettings.settings.search&&(mxSettings.settings.search=!0),null==mxSettings.settings.showStartScreen&&(mxSettings.settings.showStartScreen=!0),null==mxSettings.settings.gridColor&&(mxSettings.settings.gridColor=mxGraphView.prototype.defaultGridColor),null==mxSettings.settings.darkGridColor&&(mxSettings.settings.darkGridColor=mxGraphView.prototype.defaultDarkGridColor),null==mxSettings.settings.autosave&&(mxSettings.settings.autosave=!0),null!=mxSettings.settings.scratchpadSeen&&delete mxSettings.settings.scratchpadSeen)},clear:function(){isLocalStorage&&localStorage.removeItem(mxSettings.key)}};"undefined"!=typeof mxLoadSettings&&!mxLoadSettings||mxSettings.load();