function handleSubmit(){window.openForm||document.getElementById("openForm");return window.parent.openNew&&null!=window.parent.baseUrl&&(window.parent.openFile.setConsumer(null),window.parent.open(window.parent.baseUrl)),!0}function hideWindow(e){window.parent.openFile.cancel(e)}function fileChanged(){document.getElementById("openSupported");var e=window.openForm||document.getElementById("openForm"),n=document.getElementById("openButton");0<e.upfile.value.length?n.removeAttribute("disabled"):n.setAttribute("disabled","disabled")}function main(){var p,e,n;null!=window.parent&&null!=window.parent.Editor?window.parent.Editor.useLocalStorage?(document.body.innerHTML="",(p=document.createElement("div")).style.fontFamily="Arial",window.parent.listBrowserFiles(function(e){if(null!=window.parent){if(0==e.length)window.parent.mxUtils.write(p,window.parent.mxResources.get("noFiles")),p.style.color="dark"==window.parent.uiTheme?"#cccccc":"",window.parent.mxUtils.br(p);else{e.sort(function(e,n){return e.title.toLowerCase().localeCompare(n.title.toLowerCase())});var n=document.createElement("table"),t=document.createElement("tr");t.style.backgroundColor="dark"==window.parent.uiTheme?"#000":"#D6D6D6",t.style.color="dark"==window.parent.uiTheme?"#cccccc":"",t.style.height="25px",t.style.textAlign="left",n.appendChild(t);var o=document.createElement("th");window.parent.mxUtils.write(o,window.parent.mxResources.get("name")),t.appendChild(o);o=document.createElement("th");o.style.width="180px",window.parent.mxUtils.write(o,window.parent.mxResources.get("lastModified")),t.appendChild(o);o=document.createElement("th");window.parent.mxUtils.write(o,window.parent.mxResources.get("size")),o.style.width="70px",t.appendChild(o);o=document.createElement("th");o.style.width="23px",t.appendChild(o),n.style.fontSize="12pt",n.style.width="100%";for(var i=0;i<e.length;i++){var d,r,l,a,w=e[i];0<w.title.length&&((a=document.createElement("tr")).style.color="dark"==window.parent.uiTheme?"#cccccc":"",n.appendChild(a),!0&i&&(a.style.backgroundColor="dark"==window.parent.uiTheme?"#000":"#E6E6E6"),l=document.createElement("td"),a.appendChild(l),(d=document.createElement("a")).style.fontDecoration="none",window.parent.mxUtils.write(d,w.title),d.style.cursor="pointer",l.appendChild(d),r=document.createElement("td"),a.appendChild(r),null==(l=window.parent.EditorUi.prototype.timeSince(new Date(w.lastModified)))&&(l=window.parent.mxResources.get("lessThanAMinute")),window.parent.mxUtils.write(r,window.parent.mxResources.get("timeAgo",[l])),l=document.createElement("td"),a.appendChild(l),window.parent.mxUtils.write(l,window.parent.EditorUi.prototype.formatFileSize(w.size)),l=document.createElement("td"),a.appendChild(l),l.style.textAlign="center",(a=document.createElement("span")).className="geSprite geSprite-delete",a.style.cursor="pointer",a.style.display="inline-block",l.appendChild(a),"dark"==window.parent.uiTheme&&(a.style.filter="invert(100%)"),window.parent.mxEvent.addListener(a,"click",function(e){return function(){window.parent.mxUtils.confirm(window.parent.mxResources.get("delete")+' "'+e+'"?')&&window.parent.deleteBrowserFile(e,function(){window.location.reload()})}}(w.title)),window.parent.mxEvent.addListener(d,"click",function(t){return function(){var n;window.parent.openNew&&null!=window.parent.baseUrl?(n=window.parent.openFile,window.parent.openBrowserFile(t,function(e){window.parent.openWindow(window.parent.baseUrl+"#L"+encodeURIComponent(t),function(){n.cancel(!1)},function(){n.setData(e,t)})},function(){})):window.parent.openBrowserFile(t,function(e){window.parent.openFile.setData(e,t)},function(){})}}(w.title)))}p.appendChild(n)}o=window.parent.mxUtils.button(window.parent.mxResources.get("close"),function(){hideWindow(!0)});o.className="geBtn",o.style.position="fixed",o.style.bottom="0px",o.style.right="0px",p.appendChild(o),document.body.appendChild(p)}})):(document.getElementById("editLink"),document.getElementById("openButton").value=window.parent.mxResources.get(window.parent.openKey||"open"),(e=document.getElementById("closeButton")).value=window.parent.mxResources.get("close"),document.getElementById("openSupported").innerHTML=window.parent.mxResources.get("openSupported"),(n=window.openForm||document.getElementById("openForm")).setAttribute("action",window.parent.OPEN_URL),n.onsubmit=function(){return handleSubmit()},n.upfile.onchange=fileChanged,e.onclick=function(){hideWindow(!0)}):document.body.innerHTML="Missing parent window"}window.addEventListener("load",main);