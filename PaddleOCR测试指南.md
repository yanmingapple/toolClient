# PaddleOCR 测试指南

## 📋 概述

本指南将帮助您测试新配置的 PaddleOCR 引擎。

**更新内容**：
- ✅ 使用官方的 `@paddlejs-models/ocr` 包
- ✅ 简化的 API 调用
- ✅ 完善的错误处理
- ✅ 详细的日志输出

## 🎯 测试步骤

### 步骤 1：访问测试页面

1. 打开浏览器
2. 访问：http://localhost:3001/#/orc
3. 或者访问独立测试页面：http://localhost:3001/PaddleOCR测试页面.html

### 步骤 2：检查环境

**预期状态**：
- ✅ 页面顶部显示 "✅ Paddle.js 已加载"
- ✅ "初始化引擎" 按钮可用（蓝色）
- ✅ 控制台显示 Paddle.js 加载成功日志

**常见问题**：

**问题 1：Paddle.js 未加载**
```
错误: paddlejs 对象未找到
```
**解决方案**：
1. 检查 `public/paddlejs/` 目录下是否有三个 .js 文件
2. 检查文件大小是否正常
3. 刷新浏览器（按 F5）

**问题 2：OCR 模块未加载**
```
错误: paddlejs.ocr 对象未找到
```
**解决方案**：
1. 检查 `paddlejs-ocr.js` 文件是否存在
2. 检查文件大小是否 > 1MB
3. 重新复制文件：`Copy-Item node_modules\@paddlejs-models\ocr\lib\index.js public\paddlejs\paddlejs-ocr.js -Force`

### 步骤 3：初始化引擎

1. 点击 **"初始化引擎"** 按钮
2. 观察状态变化：
   - ⏳ 正在初始化...
   - ✅ 初始化成功
3. 观察控制台日志：
   ```
   开始初始化 PaddleOCR 引擎...
   PaddleOCR 引擎初始化成功，耗时: xxx ms
   ```

**预期结果**：
- ✅ 按钮状态变为 "已初始化"
- ✅ "选择图片" 按钮变为可用
- ✅ 耗时 < 10 秒

**常见问题**：

**问题 1：模型加载失败**
```
Error: Failed to load model
```
**解决方案**：
1. 检查网络连接
2. 检查 CORS 配置
3. 查看浏览器控制台的具体错误

**问题 2：WebGL 不支持**
```
⚠️  浏览器不支持 WebGL，PaddleOCR 性能可能会下降
```
**解决方案**：
1. 更新浏览器到最新版本
2. 检查浏览器是否支持 WebGL
3. 尝试使用 Chrome 或 Firefox

### 步骤 4：选择图片

1. 点击 **"选择图片"** 按钮
2. 选择一张包含中文文字的图片
   - 推荐：清晰的打印文字图片
   - 避免：手写文字、低分辨率图片
   - 示例：身份证、名片、书籍封面
3. 观察图片预览

**推荐测试图片**：
- 身份证正面
- 名片
- 中文书籍封面
- 菜单
- 发票

### 步骤 5：开始识别

1. 点击 **"开始识别"** 按钮
2. 观察状态变化：
   - ⏳ 正在识别...
   - ✅ 识别完成
3. 观察控制台日志：
   ```
   开始识别图片...
   图片尺寸: 1920 x 1080
   识别完成，耗时: 250 ms
   识别结果: 你好世界
   ```

**预期结果**：
- ✅ 识别结果显示在页面上
- ✅ 可以看到识别出的文字
- ✅ 显示耗时和置信度
- ✅ 耗时 < 5 秒（取决于图片大小）

### 步骤 6：验证结果

**检查项**：
- ✅ 文字识别准确率 > 90%
- ✅ 文字区域框选正确
- ✅ 结果格式正确
- ✅ 没有乱码或缺失

**识别准确率参考**：
- 清晰打印文字：90-95%
- 普通图片：85-90%
- 复杂场景：75-85%

## 🔍 调试技巧

### 查看控制台日志

1. 按 F12 打开开发者工具
2. 切换到 "Console" 标签
3. 观察日志输出

**正常日志示例**：
```
[14:30:00] 页面加载完成
[14:30:00] 正在检查 Paddle.js 加载状态...
[14:30:00] Paddle.js 加载成功
[14:30:05] 开始初始化 PaddleOCR 引擎...
[14:30:08] PaddleOCR 引擎初始化成功，耗时: 3200 ms
[14:30:15] 已选择图片: test.jpg (1.2 MB)
[14:30:15] 图片预览已生成
[14:30:20] 开始识别图片...
[14:30:20] 图片尺寸: 1920 x 1080
[14:30:21] 识别完成，耗时: 850 ms
[14:30:21] 识别结果: 这是测试文字
```

### 性能监控

**初始化时间**：
- 正常：3-10 秒
- 较慢：10-20 秒
- 异常：> 20 秒

**识别时间**：
- 小图片 (< 1MB)：< 1 秒
- 中等图片 (1-5MB)：1-3 秒
- 大图片 (> 5MB)：3-10 秒

## 📊 测试用例

### 测试用例 1：身份证识别

**图片要求**：
- 身份证正面清晰照片
- 光线充足
- 无反光

**预期结果**：
- ✅ 姓名识别正确
- ✅ 身份证号识别正确
- ✅ 地址识别正确
- ✅ 性别、民族识别正确

### 测试用例 2：名片识别

**图片要求**：
- 名片清晰照片
- 包含公司名称、姓名、电话、邮箱

**预期结果**：
- ✅ 公司名称识别正确
- ✅ 姓名识别正确
- ✅ 电话号码识别正确
- ✅ 邮箱地址识别正确

### 测试用例 3：书籍封面

**图片要求**：
- 书籍封面照片
- 包含书名、作者

**预期结果**：
- ✅ 书名识别正确
- ✅ 作者名识别正确
- ✅ 出版社名称识别正确

## 🛠️ 高级测试

### 性能测试

**测试方法**：
1. 使用不同尺寸的图片测试
2. 记录识别时间
3. 对比不同引擎的性能

**性能指标**：
- 平均识别时间
- 内存占用
- CPU 使用率
- 准确率

### 兼容性测试

**测试浏览器**：
- ✅ Chrome 60+
- ✅ Firefox 55+
- ✅ Safari 11+
- ✅ Edge 79+

**测试设备**：
- ✅ 桌面电脑
- ✅ 笔记本电脑
- ✅ 平板电脑
- ✅ 手机（可选）

## 📝 测试报告模板

```
测试报告：PaddleOCR 引擎测试
日期：2024-01-18
测试人员：

一、环境信息
- 浏览器：Chrome 120.0.0.0
- 操作系统：Windows 10
- 设备：Desktop
- 网络：WiFi

二、测试结果

1. 环境检查
   - Paddle.js 加载：✅ 成功
   - OCR 模块加载：✅ 成功
   - WebGL 支持：✅ 支持

2. 引擎初始化
   - 初始化状态：✅ 成功
   - 初始化时间：3.2 秒
   - 错误信息：无

3. 图片识别

   测试用例 1：身份证
   - 图片尺寸：1920 x 1080
   - 图片大小：1.2 MB
   - 识别时间：0.8 秒
   - 准确率：95%
   - 结果：✅ 通过

   测试用例 2：名片
   - 图片尺寸：1600 x 1200
   - 图片大小：0.8 MB
   - 识别时间：0.6 秒
   - 准确率：92%
   - 结果：✅ 通过

   测试用例 3：书籍封面
   - 图片尺寸：2048 x 1536
   - 图片大小：2.1 MB
   - 识别时间：1.2 秒
   - 准确率：90%
   - 结果：✅ 通过

三、性能统计
- 平均识别时间：0.87 秒
- 最小识别时间：0.6 秒
- 最大识别时间：1.2 秒
- 准确率：92.3%

四、问题记录

1. 问题：无
   严重程度：无
   状态：无

五、总结
- 整体性能：优秀
- 准确率：高
- 稳定性：好
- 推荐上线：✅ 是
```

## 🎉 测试完成

**通过标准**：
- ✅ 所有测试用例通过
- ✅ 准确率 > 90%
- ✅ 识别时间 < 3 秒
- ✅ 无严重错误

**下一步**：
- 集成到主应用
- 优化用户体验
- 添加更多功能
- 编写文档

---

**版本**：v2.0  
**日期**：2024-01-18  
**状态**：✅ 完成  
**测试人员**：AI Assistant  
**审核人员**：
