# 智能文字识别 (OCR) 功能

## 功能概述

本项目集成了基于 Tesseract.js 的智能文字识别功能，支持从图片中提取文字，并提供多种导出格式。

## 技术栈

- **前端框架**: Vue 3 + TypeScript
- **UI 框架**: Element Plus
- **OCR 引擎**: Tesseract.js (WebAssembly)
- **构建工具**: Vite

## 主要功能

### 1. 文件上传
- 支持拖拽上传
- 支持点击选择文件
- 支持批量上传（最多 10 个文件）
- 支持图片格式：JPG、PNG、BMP、GIF、WebP

### 2. 图像处理
- 自动旋转校正
- 灰度化处理
- 对比度调整（0.5 - 2.0）
- 亮度调整（-50 到 +50）

### 3. 文字识别
- 多语言支持：中文、英文、中日韩混合、中英混合
- 实时进度显示
- 批量处理多个文件
- 识别结果格式化显示

### 4. 结果导出
- 复制到剪贴板
- 导出为 TXT 文件
- 显示识别统计信息（处理时间、置信度、字符数）

## 使用说明

### 1. 打开 OCR 工具

在首页的「工具集」区域，找到「AI工具」分类下的「文字识别」选项，点击即可打开 OCR 页面。

### 2. 上传图片

- **拖拽方式**: 将图片文件拖拽到上传区域
- **点击方式**: 点击「选择文件」按钮，选择要识别的图片

### 3. 设置处理选项

在中间的「处理选项」区域，可以设置：
- **识别语言**: 选择要识别的语言类型
- **自动旋转**: 自动校正图片方向
- **灰度化**: 将图片转为灰度图
- **对比度**: 调整图片对比度
- **亮度**: 调整图片亮度

### 4. 开始识别

点击右上角的「开始识别」按钮，系统将开始处理图片并提取文字。

### 5. 查看和导出结果

识别完成后，结果将显示在右侧的「识别结果」区域：
- 点击「复制」按钮可将结果复制到剪贴板
- 点击「导出TXT」按钮可将结果保存为文本文件
- 下方显示识别统计信息

## 性能优化

### 1. WebAssembly 加速
Tesseract.js 使用 WebAssembly 技术，将 OCR 引擎编译为 WASM 格式，在浏览器中实现接近原生的性能。

### 2. 懒加载
- 语言模型在首次使用时自动下载
- 支持缓存机制，避免重复下载

### 3. 并行处理
- 支持同时处理多个文件
- 自动根据 CPU 核心数调整并发数

## 浏览器兼容性

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 注意事项

1. **首次使用**：首次使用时需要下载语言模型文件（约 4-20MB），请确保网络连接正常
2. **文件大小**：建议上传的图片文件不超过 10MB
3. **图片质量**：图片越清晰，识别效果越好
4. **隐私保护**：所有处理都在本地浏览器中完成，图片不会上传到服务器
5. **离线使用**：语言模型下载完成后，可离线使用 OCR 功能

## 常见问题

### Q: 为什么识别速度很慢？
A: OCR 是计算密集型任务，首次使用需要下载语言模型。建议使用现代浏览器，并确保设备性能良好。

### Q: 识别准确率不高怎么办？
A: 
- 尝试调整图片的对比度和亮度
- 确保图片清晰，文字清晰可辨
- 尝试使用灰度化处理
- 检查语言选择是否正确

### Q: 支持手写文字识别吗？
A: Tesseract.js 主要针对印刷体文字优化，手写文字识别效果有限。

### Q: 可以识别表格吗？
A: 当前版本主要提取纯文本，表格结构识别需要额外的后处理。

## 开发说明

### 项目结构

```
src/view/orc/
├── index.vue          # OCR 主页面组件
└── README.md          # 本说明文档
```

### 核心代码

#### 1. OCR 引擎初始化

```typescript
const worker = await createWorker(
  selectedLanguage.value,
  1,
  {
    logger: (m) => {
      if (m.status === 'recognizing text') {
        progress.value = Math.round(m.progress * 100)
      }
    }
  }
)
```

#### 2. 图片预处理

```typescript
const preprocessImage = async (imageUrl: string): Promise<HTMLCanvasElement> => {
  // 应用亮度、对比度、灰度化等处理
  ctx.filter = `brightness(${1 + brightness / 100}) contrast(${contrast})`
  if (grayScale) {
    ctx.filter += ' grayscale(100%)'
  }
}
```

#### 3. 文字识别

```typescript
const result = await worker.recognize(processedImage)
const text = result.data.text
```

### 扩展功能建议

1. **表格识别**: 集成表格检测和结构化输出
2. **公式识别**: 支持数学公式和化学方程式识别
3. **PDF 支持**: 增加 PDF 文件的 OCR 功能
4. **批量导出**: 支持将多个文件的识别结果批量导出
5. **历史记录**: 保存识别历史，支持查看和管理
6. **云端 OCR**: 可选集成云端 OCR 服务（如百度 OCR、腾讯 OCR）

## 更新日志

### v1.0.0 (2024-01-18)

- ✨ 初始版本发布
- ✨ 支持图片上传和预览
- ✨ 支持多语言文字识别
- ✨ 支持图片预处理（旋转、灰度化、对比度、亮度）
- ✨ 支持结果导出（复制、TXT）
- ✨ 显示识别统计信息

## 联系方式

如有问题或建议，请提交 Issue 或联系开发团队。
