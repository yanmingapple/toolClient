# OCR 功能快速开始

## 🚀 快速开始

### 1. 启动项目

```bash
cd e:\toolClient
npm run dev
```

访问：`http://localhost:3001`

### 2. 使用 OCR 功能

#### 步骤 1：上传图片

有三种方式可以上传图片：

**方式一：点击选择**
- 点击"选择文件"按钮
- 从文件选择器中选择图片
- 支持 JPG、PNG、BMP 等格式

**方式二：拖拽上传**
- 直接将图片拖拽到上传区域
- 区域会高亮显示
- 松开鼠标完成上传

**方式三：粘贴图片**
- 复制图片到剪贴板（Ctrl+C）
- 在页面任意位置粘贴（Ctrl+V）
- 图片自动添加到列表

#### 步骤 2：选择 OCR 引擎

在"处理选项"区域，您可以看到可用的 OCR 引擎：

**推荐：Tesseract.js**
- ✅ 完全离线运行
- ✅ 支持多语言
- ✅ 模型小巧（4.5MB）
- ✅ 识别速度快

**其他引擎（暂未实现）**
- PaddleOCR - 百度飞桨 OCR
- DeepSeek-OCR - 深度求索 OCR
- Qwen3-VL - 通义千问多模态

#### 步骤 3：选择识别语言

根据您的图片内容选择合适的语言：

- **自动识别** - 系统自动检测语言
- **中文** - 简体中文
- **英文** - English
- **中日韩** - 中文、日文、韩文混合
- **中文+英文** - 中英文混合

#### 步骤 4：调整处理选项（可选）

**图像处理选项**：

- **缩放比例** (0.5-3.0)
  - 1.0 = 原始大小
  - > 1.0 = 放大图片
  - < 1.0 = 缩小图片
  - 建议：低清晰度图片放大 1.5-2.0 倍

- **灰度化处理**
  - 将图片转换为灰度
  - 减少颜色干扰
  - 提高识别速度

- **二值化处理**
  - 将图片转换为黑白
  - 增强文字对比度
  - 适用于低对比度图片

- **二值化阈值** (0-255)
  - 128 = 默认值
  - 值越小 = 更多黑色
  - 值越大 = 更多白色

- **降噪处理**
  - 去除图片噪点
  - 提高识别准确率
  - 适用于扫描件或照片

- **降噪强度** (1-10)
  - 1 = 轻微降噪
  - 10 = 强烈降噪
  - 建议：3-5

- **对比度增强** (0.5-2.0)
  - 1.0 = 原始对比度
  - > 1.0 = 增强对比度
  - < 1.0 = 降低对比度

- **亮度调整** (-50 到 +50)
  - 0 = 原始亮度
  - 正值 = 变亮
  - 负值 = 变暗

#### 步骤 5：开始识别

点击"开始识别"按钮，系统会：

1. ✅ 初始化 OCR 引擎
2. ✅ 预处理图片（根据您的选项）
3. ✅ 执行文字识别
4. ✅ 显示识别结果

**进度显示**：
- 顶部进度条显示当前进度
- 状态消息显示当前操作
- 预计处理时间：2-10 秒（取决于图片大小和复杂度）

#### 步骤 6：查看和导出结果

**识别结果**会显示在右侧面板：

- ✅ 识别出的文本内容
- ✅ 处理时间（毫秒）
- ✅ 置信度（准确率）
- ✅ 字符数统计

**导出选项**：

1. **复制**
   - 点击"复制"按钮
   - 文本复制到剪贴板
   - 可以粘贴到任何地方

2. **导出 TXT**
   - 点击"导出 TXT"按钮
   - 自动下载文本文件
   - 文件名格式：`ocr_result_时间戳.txt`

---

## 💡 使用技巧

### 提高识别准确率

#### 1. 图片质量

- ✅ 使用高清图片（建议 300 DPI 以上）
- ✅ 确保文字清晰可读
- ✅ 避免模糊或失焦
- ✅ 去除阴影和反光

#### 2. 文字方向

- ✅ 确保文字水平
- ✅ 避免倾斜（> 5°）
- ✅ 可以开启"自动旋转校正"

#### 3. 光照条件

- ✅ 均匀光照
- ✅ 避免强光直射
- ✅ 调整亮度和对比度

#### 4. 背景干扰

- ✅ 简单背景最佳
- ✅ 避免复杂背景
- ✅ 使用二值化处理
- ✅ 启用降噪功能

#### 5. 文字大小

- ✅ 建议文字高度 > 20 像素
- ✅ 小文字可以放大处理
- ✅ 调整缩放比例

### 批量处理

#### 上传多张图片

- 按住 Ctrl 键选择多个文件
- 或多次拖拽不同图片
- 系统会按顺序处理

#### 处理结果

- 每个文件的结果会用分隔符分开
- 格式：`【文件名】\n\n识别文本\n\n=====\n\n`
- 方便区分不同文件的内容

### 常见场景

#### 场景 1：扫描文档

**建议设置**：
- 缩放比例：1.0
- 灰度化：开启
- 二值化：开启
- 阈值：128
- 降噪：开启
- 强度：3

#### 场景 2：照片文字

**建议设置**：
- 缩放比例：1.5-2.0
- 灰度化：开启
- 二值化：关闭
- 对比度：1.2-1.5
- 亮度：根据实际调整
- 降噪：开启
- 强度：5

#### 场景 3：屏幕截图

**建议设置**：
- 缩放比例：1.0
- 灰度化：关闭
- 二值化：关闭
- 对比度：1.0
- 降噪：关闭

#### 场景 4：低质量图片

**建议设置**：
- 缩放比例：2.0
- 灰度化：开启
- 二值化：开启
- 阈值：150
- 对比度：1.5
- 降噪：开启
- 强度：8

---

## ⚙️ 高级功能

### 引擎切换

当前默认使用 Tesseract.js，未来会支持更多引擎：

| 引擎 | 特点 | 适用场景 |
|-----|------|----------|
| Tesseract.js | 离线、快速、轻量 | 日常使用 |
| PaddleOCR | 高精度、多语言 | 专业场景 |
| DeepSeek-OCR | 大模型、文档理解 | 复杂文档 |
| Qwen3-VL | 多模态、智能分析 | AI 助手 |

### 语言自动检测

选择"自动识别"时，系统会：

1. 使用 OSD（Orientation and Script Detection）检测
2. 识别图片中的文字方向和语言
3. 自动选择最佳语言包
4. 执行识别

**支持的语言**：
- 中文（Han）
- 英文（Latin）
- 日文（Hiragana/Katakana）
- 韩文（Hangul）
- 阿拉伯文（Arabic）
- 俄文（Cyrillic）

---

## ❓ 常见问题

### Q1：为什么识别结果为空？

**可能原因**：
- 图片中没有文字
- 图片质量太差
- 语言选择错误

**解决方法**：
- 使用高质量图片
- 调整缩放比例（放大）
- 尝试不同的语言选项

### Q2：识别速度慢怎么办？

**可能原因**：
- 图片太大
- 浏览器性能差
- 同时处理多张图片

**解决方法**：
- 缩小图片尺寸
- 关闭其他标签页
- 减少同时处理的图片数量

### Q3：如何处理倾斜的图片？

**方法**：
- 开启"自动旋转校正"
- 或使用图片编辑工具旋转
- 建议角度 < 5°

### Q4：可以识别手写文字吗？

**回答**：
- Tesseract.js 主要针对印刷体
- 手写体识别准确率较低
- 建议使用专门的手写识别工具

### Q5：支持哪些图片格式？

**支持格式**：
- JPG/JPEG
- PNG
- BMP
- GIF（静态）
- TIFF（部分支持）

**不支持**：
- PDF（需要先转换为图片）
- SVG（需要先渲染）

### Q6：如何处理 PDF 文件？

**方法**：
1. 使用 PDF 阅读器打开
2. 截图或导出为图片
3. 然后使用本工具识别

或使用在线工具转换：
- SmallPDF
- ILovePDF
- Adobe Acrobat

---

## 📊 性能指标

### 处理速度

| 图片大小 | 预计时间 |
|---------|----------|
| < 1MB | 2-3 秒 |
| 1-5MB | 3-5 秒 |
| 5-10MB | 5-8 秒 |
| > 10MB | 8-15 秒 |

### 准确率

| 场景 | 准确率 |
|-----|--------|
| 清晰打印文档 | > 95% |
| 扫描文档 | > 90% |
| 照片文字 | > 85% |
| 低质量图片 | > 70% |

---

## 🔧 浏览器兼容性

### 推荐浏览器

- ✅ Chrome 100+（推荐）
- ✅ Firefox 90+
- ✅ Edge 100+
- ✅ Safari 15+

### 不支持

- ❌ Internet Explorer
- ❌ Opera < 85
- ❌ 其他老旧浏览器

---

## 📱 移动端使用

### iOS

- 使用 Safari 或 Chrome
- 支持拍照上传
- 支持粘贴图片

### Android

- 使用 Chrome 或 Edge
- 支持拍照上传
- 支持粘贴图片

---

## 🎯 最佳实践

### 1. 预处理图片

```
原始图片 → 缩放 → 灰度化 → 二值化 → 降噪 → 识别
```

### 2. 多次尝试

如果第一次识别效果不好：
- 调整缩放比例
- 尝试不同的阈值
- 调整对比度和亮度
- 启用/禁用降噪

### 3. 后处理

识别完成后：
- 检查和修正错误
- 格式化文本
- 导出和保存

---

## 📚 更多资源

- [OCR引擎架构说明.md](./OCR引擎架构说明.md) - 技术架构文档
- [测试指南.md](./测试指南.md) - 测试和验证
- [orc应用设计方案.md](./orc应用设计方案.md) - 原始设计文档

---

## 📞 技术支持

如有问题，请：

1. 查看本文档的常见问题部分
2. 检查浏览器控制台的错误信息
3. 参考相关文档
4. 联系开发团队

---

**版本**: v1.0.0  
**最后更新**: 2025-01-18  
**状态**: ✅ 可用

---

**祝您使用愉快！** 🎉
