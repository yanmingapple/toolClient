# AIæ™ºèƒ½æ—¥å†æé†’é›†æˆæ–¹æ¡ˆï¼ˆClawdbotæ€è·¯å¢å¼ºç‰ˆï¼‰

## ä¸€ã€æ–¹æ¡ˆæ¦‚è¿°

åŸºäºç°æœ‰çš„æ—¥å†æé†’ç³»ç»Ÿï¼Œé›†æˆAIæ¥å£å®ç°æ™ºèƒ½åŒ–çš„æ—¥å†äº‹ä»¶ç®¡ç†ã€‚å€Ÿé‰´ **Clawdbot** çš„åˆ†å±‚è®°å¿†ç³»ç»Ÿå’Œ **DeepSeek** çš„æ™ºèƒ½ä»»åŠ¡ç®¡ç†æ€è·¯ï¼Œæ‰“é€ ä¸€ä¸ª**æ™ºèƒ½ä¸ªäººå·¥ä½œç©ºé—´**ï¼Œå…·å¤‡ï¼š

- ğŸ§  **æœ¬åœ°è®°å¿†** - æ‰€æœ‰ä»»åŠ¡ã€æ—¥ç¨‹ã€å·¥ä½œæ—¥å¿—éƒ½å­˜å‚¨åœ¨æœ¬åœ°ï¼ˆSQLite + Markdownï¼‰
- ğŸ¤– **AIè¾…åŠ©** - AIå¸®ä½ è§£æã€è§„åˆ’ã€æ€»ç»“ä»»åŠ¡
- ğŸ”” **ä¸»åŠ¨æé†’** - ä¸ä»…ä»…æ˜¯å®šæ—¶æé†’ï¼Œè¿˜æœ‰ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„æ™ºèƒ½æé†’
- ğŸ“Š **å·¥ä½œæ¨¡å¼å­¦ä¹ ** - ä»ä½ çš„å·¥ä½œæ¨¡å¼ä¸­å­¦ä¹ å¹¶ä¼˜åŒ–å»ºè®®
- ğŸ”’ **å®Œå…¨æ§åˆ¶** - æ•°æ®åœ¨æœ¬åœ°ï¼Œéšç§æœ‰ä¿éšœ

## äºŒã€æ ¸å¿ƒäº§å“æ¦‚å¿µ

### 2.1 äº§å“å®šä½
è¿™æ˜¯ä¸€ä¸ª**æ™ºèƒ½ä»»åŠ¡ç®¡å®¶**ï¼Œä¸ä»…ä»…æ˜¯æ—¥å†æé†’ï¼Œæ›´æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸ªäººå·¥ä½œç©ºé—´ï¼š

1. **æ™ºèƒ½ä»»åŠ¡ç®¡ç†** - è‡ªç„¶è¯­è¨€è¾“å…¥ï¼ŒAIè‡ªåŠ¨è§£æå’Œåˆ†ç±»
2. **åˆ†å±‚è®°å¿†ç³»ç»Ÿ** - ç»“æ„åŒ–æ•°æ®ï¼ˆSQLiteï¼‰+ éç»“æ„åŒ–æ—¥å¿—ï¼ˆMarkdownï¼‰
3. **ä¸Šä¸‹æ–‡æ„ŸçŸ¥** - ç†è§£ä½ åœ¨åšä»€ä¹ˆï¼Œæä¾›æ™ºèƒ½å»ºè®®
4. **ä¸»åŠ¨å­¦ä¹ ** - ä»å·¥ä½œæ¨¡å¼ä¸­å­¦ä¹ ï¼Œä¼˜åŒ–æ—¥ç¨‹å®‰æ’
5. **æ— ç¼è®°å½•** - ä»»åŠ¡å®Œæˆè‡ªåŠ¨ç”Ÿæˆå·¥ä½œæ—¥å¿—

### 2.2 åˆ›æ–°ç‚¹
- âœ… **ä¸Šä¸‹æ–‡æ™ºèƒ½** - ä¸åªæ˜¯å®šæ—¶æé†’ï¼Œè€Œæ˜¯æ‡‚ä½ åœ¨åšä»€ä¹ˆ
- âœ… **ä¸»åŠ¨å­¦ä¹ ** - ä»ä½ çš„å·¥ä½œæ¨¡å¼ä¸­å­¦ä¹ ä¼˜åŒ–å»ºè®®
- âœ… **æ— ç¼è®°å½•** - ä»»åŠ¡å®Œæˆè‡ªåŠ¨ç”Ÿæˆæ—¥å¿—
- âœ… **å¯è§£é‡Šæ€§** - æ‰€æœ‰AIå†³ç­–éƒ½å¯è¿½æº¯
- âœ… **å®Œå…¨æ§åˆ¶** - æ•°æ®åœ¨æœ¬åœ°ï¼Œéšç§æœ‰ä¿éšœ

## ä¸‰ã€ç°æœ‰åŠŸèƒ½åˆ†æ

### 2.1 å½“å‰åŠŸèƒ½
- âœ… å¤šè§†å›¾æ—¥å†ï¼ˆæœˆå†ã€å‘¨å†ã€æ—¥å†ã€æ—¥ç¨‹åˆ—è¡¨ï¼‰
- âœ… äº‹ä»¶ç®¡ç†ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- âœ… ä»£åŠäº‹é¡¹ç®¡ç†
- âœ… äº‹ä»¶æé†’ï¼ˆåŸºäºæ—¶é—´æå‰æé†’ï¼‰
- âœ… æ•°æ®åº“æŒä¹…åŒ–ï¼ˆSQLiteï¼‰
- âœ… å†œå†æ˜¾ç¤º

### 2.2 æ•°æ®ç»“æ„
```typescript
interface Event {
  id: string;
  title: string;
  type: string;        // å·¥ä½œã€ä¼šè®®ã€ç”Ÿæ—¥ã€çºªå¿µæ—¥ã€å…¶ä»–
  date: string;        // YYYY-MM-DD
  time: string;        // HH:mm
  reminder: number;    // æé†’æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  description?: string;
  createTime?: string;
  updateTime?: string;
}

interface Todo {
  id: string;
  text: string;
  date: string;
  done: boolean;
  createTime?: string;
  updateTime?: string;
}
```

## å››ã€AIåŠŸèƒ½è®¾è®¡ï¼ˆClawdbotå¢å¼ºç‰ˆï¼‰

### 3.1 æ ¸å¿ƒAIåŠŸèƒ½æ¨¡å—

#### 4.1.1 æ™ºèƒ½ä»»åŠ¡è¾“å…¥ç³»ç»Ÿï¼ˆClawdbotæ€è·¯ï¼‰

**åŠŸèƒ½æè¿°**ï¼šç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€è¾“å…¥ï¼ŒAIè‡ªåŠ¨è§£æä¸ºç»“æ„åŒ–ä»»åŠ¡ï¼ŒåŒ…å«æ›´ä¸°å¯Œçš„ä¿¡æ¯

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- âœ… **åªéœ€æè¿°**ï¼šç”¨æˆ·åªéœ€ç”¨è‡ªç„¶è¯­è¨€æè¿°ä»»åŠ¡ï¼ŒAIè‡ªåŠ¨è§£ææ‰€æœ‰å­—æ®µ
- âœ… **ç¦»çº¿æ”¯æŒ**ï¼šæ— ç½‘ç»œæ—¶ä½¿ç”¨æœ¬åœ°è§„åˆ™å¼•æ“å’Œæ¨¡å¼åŒ¹é…
- âœ… **æ™ºèƒ½é™çº§**ï¼šç½‘ç»œä¸å¯ç”¨æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼

**ç¤ºä¾‹è¾“å…¥**ï¼š
- "æ˜å¤©ä¸‹åˆ3ç‚¹å›¢é˜Ÿä¼šè®®ï¼Œè®¨è®ºQ2è§„åˆ’ï¼Œå¸¦ä¸Šå‰æœŸæ•°æ®"
- "ä¸‹å‘¨ä¸‰ä¸Šåˆ10ç‚¹é¢„çº¦ä½“æ£€ï¼Œè®°å¾—ç©ºè…¹"
- "æ¯å‘¨ä¸€æ—©ä¸Š9ç‚¹å›¢é˜Ÿä¾‹ä¼šï¼Œå‡†å¤‡å‘¨æŠ¥"
- "3æœˆ15æ—¥æ™šä¸Š7ç‚¹ç”Ÿæ—¥èšä¼šï¼Œä¹°è›‹ç³•"

**å·¥ä½œæµç¨‹**ï¼š
```
ç”¨æˆ·è¾“å…¥è‡ªç„¶è¯­è¨€æè¿°
    â†“
æ£€æŸ¥ç½‘ç»œçŠ¶æ€
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ‰ç½‘ç»œ     â”‚   æ— ç½‘ç»œ     â”‚
â”‚  (åœ¨çº¿æ¨¡å¼) â”‚  (ç¦»çº¿æ¨¡å¼)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚
       â†“             â†“
  è°ƒç”¨AI API    æœ¬åœ°è§„åˆ™å¼•æ“
  æ™ºèƒ½è§£æ      æ¨¡å¼åŒ¹é…è§£æ
       â”‚             â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â†“
      å¡«å……è¡¨å•å­—æ®µ
       (ç”¨æˆ·å¯ç¼–è¾‘)
              â†“
        ä¿å­˜ä»»åŠ¡
```

**AIè§£æè¾“å‡ºï¼ˆå¢å¼ºç‰ˆï¼‰**ï¼š
```json
{
  "title": "å›¢é˜Ÿä¼šè®® - Q2è§„åˆ’",
  "description": "è®¨è®ºQ2è§„åˆ’ï¼Œéœ€è¦å¸¦ä¸Šå‰æœŸæ•°æ®",
  "date": "2026-01-30",
  "time": "15:00",
  "duration": 60,  // é¢„è®¡æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  "type": "ä¼šè®®",
  "category": "ä¼šè®®",
  "priority": 4,  // 1-5ä¼˜å…ˆçº§
  "reminder": [
    {"time": "æå‰15åˆ†é’Ÿ", "message": "å‡†å¤‡ä¼šè®®ææ–™"},
    {"time": "æå‰1å°æ—¶", "message": "è®°å¾—å¸¦ä¸Šå‰æœŸæ•°æ®"}
  ],
  "tags": ["ä¼šè®®", "è§„åˆ’", "Q2", "å›¢é˜Ÿ"],
  "checklist": [
    {"text": "å‡†å¤‡å‰æœŸæ•°æ®", "completed": false},
    {"text": "å‡†å¤‡ä¼šè®®è®®ç¨‹", "completed": false}
  ],
  "energyLevel": "ä¸­",  // ç²¾åŠ›æ¶ˆè€—ç­‰çº§ï¼šé«˜|ä¸­|ä½
  "bestTime": "afternoon",  // æœ€ä½³æ‰§è¡Œæ—¶é—´ï¼šmorning|afternoon|evening
  "estimatedMinutes": 60,
  "recurrence": null,
  "aiMetadata": {
    "confidence": 0.95,
    "suggestedTags": ["ä¼šè®®", "è§„åˆ’"],
    "relatedTasks": []  // å…³è”ä»»åŠ¡
  }
}
```

#### 4.1.2 æ™ºèƒ½ä»»åŠ¡è‡ªåŠ¨åˆ†ç±»å’Œæ ‡ç­¾ï¼ˆDeepSeekæ€è·¯ï¼‰

**åŠŸèƒ½æè¿°**ï¼šAIåˆ†æä»»åŠ¡æè¿°ï¼Œè‡ªåŠ¨åˆ†ç±»ã€è¯„ä¼°ä¼˜å…ˆçº§å’Œç²¾åŠ›æ¶ˆè€—ï¼Œå¹¶ç”Ÿæˆæ™ºèƒ½æ ‡ç­¾

**AIåˆ†æè¾“å‡º**ï¼š
```typescript
function autoCategorizeTask(description: string) {
  // AIåˆ†æä»»åŠ¡ï¼Œè¿”å›ï¼š
  return {
    category: "ä¼šè®®" | "ç¼–ç " | "æ–‡æ¡£" | "å­¦ä¹ " | "æ²Ÿé€š" | "è¡Œæ”¿",
    priority: 1-5,  // ä¼˜å…ˆçº§
    estimatedMinutes: number,  // é¢„è®¡åˆ†é’Ÿæ•°
    energyLevel: "é«˜" | "ä¸­" | "ä½",  // ç²¾åŠ›æ¶ˆè€—ç­‰çº§
    suggestedTags: string[],  // å»ºè®®æ ‡ç­¾ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    bestTime: "morning" | "afternoon" | "evening"  // æœ€ä½³æ‰§è¡Œæ—¶é—´
  };
}
```

**æ ‡ç­¾ç³»ç»Ÿå·¥ä½œæœºåˆ¶**ï¼š

1. **è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾**
   - AIåˆ†æä»»åŠ¡æè¿°ï¼Œæå–å…³é”®è¯å’Œä¸»é¢˜
   - è‡ªåŠ¨ç”Ÿæˆç›¸å…³æ ‡ç­¾ï¼ˆå¦‚ï¼š"ä¼šè®®"ã€"Q2"ã€"å›¢é˜Ÿ"ã€"è§„åˆ’"ï¼‰
   - æ ‡ç­¾ä¼šä¿å­˜åˆ°æ•°æ®åº“çš„ `tags` å­—æ®µï¼ˆJSONæ•°ç»„æ ¼å¼ï¼‰

2. **æ ‡ç­¾è‡ªåŠ¨åº”ç”¨**
   - **æ–°å»ºä»»åŠ¡æ—¶**ï¼šAIè‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾ï¼Œç”¨æˆ·å¯ç¼–è¾‘æˆ–ç¡®è®¤
   - **ç›¸ä¼¼ä»»åŠ¡è¯†åˆ«**ï¼šç³»ç»Ÿä¼šè¯†åˆ«ç›¸ä¼¼æ ‡ç­¾çš„ä»»åŠ¡ï¼Œåœ¨åˆ›å»ºæ—¶è‡ªåŠ¨æ¨è
   - **æ ‡ç­¾å­¦ä¹ **ï¼šç³»ç»Ÿä¼šå­¦ä¹ ç”¨æˆ·å¸¸ç”¨çš„æ ‡ç­¾ï¼Œåœ¨åç»­ä»»åŠ¡ä¸­ä¼˜å…ˆæ¨è

3. **æ ‡ç­¾æ•°æ®å­˜å‚¨**
   ```typescript
   // æ•°æ®åº“ç»“æ„ï¼ˆeventsè¡¨æ‰©å±•ï¼‰
   interface Event {
     id: string;
     title: string;
     type: string;
     tags: string[];  // æ ‡ç­¾æ•°ç»„ï¼Œå­˜å‚¨ä¸ºJSONå­—ç¬¦ä¸²
     // ... å…¶ä»–å­—æ®µ
   }
   ```

4. **æ ‡ç­¾åº”ç”¨åœºæ™¯**
   - **æœç´¢è¿‡æ»¤**ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡æ ‡ç­¾å¿«é€Ÿç­›é€‰ä»»åŠ¡
   - **æ™ºèƒ½æ¨è**ï¼šåˆ›å»ºæ–°ä»»åŠ¡æ—¶ï¼Œç³»ç»Ÿæ¨èç›¸ä¼¼æ ‡ç­¾
   - **ç»Ÿè®¡åˆ†æ**ï¼šæŒ‰æ ‡ç­¾ç»Ÿè®¡ä»»åŠ¡åˆ†å¸ƒå’Œå®Œæˆæƒ…å†µ
   - **å…³è”ä»»åŠ¡**ï¼šç›¸åŒæ ‡ç­¾çš„ä»»åŠ¡å¯ä»¥å»ºç«‹å…³è”

**åˆ†ç±»è§„åˆ™ï¼ˆå¢å¼ºï¼‰**ï¼š
- **å·¥ä½œç±»**ï¼šä¼šè®®ã€é¡¹ç›®ã€ä»»åŠ¡ã€æ±‡æŠ¥ã€ç¼–ç ã€æ–‡æ¡£
- **ç”Ÿæ´»ç±»**ï¼šè´­ç‰©ã€å¨±ä¹ã€è¿åŠ¨ã€å­¦ä¹ ã€å¥åº·
- **é‡è¦ç±»**ï¼šç”Ÿæ—¥ã€çºªå¿µæ—¥ã€æˆªæ­¢æ—¥æœŸã€ç´§æ€¥ä»»åŠ¡
- **ç²¾åŠ›æ¶ˆè€—**ï¼šé«˜ï¼ˆæ·±åº¦å·¥ä½œï¼‰ã€ä¸­ï¼ˆå¸¸è§„ä»»åŠ¡ï¼‰ã€ä½ï¼ˆç®€å•æ“ä½œï¼‰

**AIå¢å¼º**ï¼š
- âœ… **è‡ªåŠ¨è¯†åˆ«äº‹ä»¶ç±»å‹å’Œä¼˜å…ˆçº§**
- âœ… **è¯„ä¼°ç²¾åŠ›æ¶ˆè€—ç­‰çº§**
- âœ… **æ¨èæœ€ä½³æ‰§è¡Œæ—¶é—´**
- âœ… **æå–å…³é”®ä¿¡æ¯å¹¶ç”Ÿæˆæ ‡ç­¾**ï¼ˆè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“ï¼‰
- âœ… **æ ‡ç­¾è‡ªåŠ¨åº”ç”¨åˆ°åç»­ç›¸ä¼¼ä»»åŠ¡**ï¼ˆåŸºäºå†å²æ•°æ®å­¦ä¹ ï¼‰

**æ ‡ç­¾ç¤ºä¾‹**ï¼š
```json
{
  "title": "å›¢é˜Ÿä¼šè®® - Q2è§„åˆ’",
  "description": "è®¨è®ºQ2è§„åˆ’ï¼Œéœ€è¦å¸¦ä¸Šå‰æœŸæ•°æ®",
  "tags": ["ä¼šè®®", "è§„åˆ’", "Q2", "å›¢é˜Ÿ", "é‡è¦"]  // AIè‡ªåŠ¨ç”Ÿæˆå¹¶ä¿å­˜
}
```

**æ ‡ç­¾è‡ªåŠ¨åº”ç”¨æœºåˆ¶**ï¼š

1. **é¦–æ¬¡åˆ›å»ºä»»åŠ¡æ—¶**
   - AIåˆ†æä»»åŠ¡æè¿°ï¼Œè‡ªåŠ¨æå–å…³é”®è¯
   - ç”Ÿæˆæ ‡ç­¾æ•°ç»„ï¼ˆå¦‚ï¼š["ä¼šè®®", "è§„åˆ’", "Q2", "å›¢é˜Ÿ"]ï¼‰
   - **è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“** `events.tags` å­—æ®µï¼ˆJSONæ ¼å¼ï¼‰
   - åŒæ—¶æ›´æ–° `tags` è¡¨çš„ä½¿ç”¨ç»Ÿè®¡

2. **åç»­åˆ›å»ºç›¸ä¼¼ä»»åŠ¡æ—¶**
   - ç³»ç»Ÿåˆ†ææ–°ä»»åŠ¡æè¿°
   - **è‡ªåŠ¨åŒ¹é…å†å²æ ‡ç­¾**ï¼šæŸ¥æ‰¾åŒ…å«ç›¸ä¼¼å…³é”®è¯çš„å†å²ä»»åŠ¡
   - **æ™ºèƒ½æ¨èæ ‡ç­¾**ï¼šåŸºäºå†å²æ ‡ç­¾ä½¿ç”¨é¢‘ç‡ï¼Œæ¨èæœ€ç›¸å…³çš„æ ‡ç­¾
   - ä¾‹å¦‚ï¼šè¾“å…¥"Q2è§„åˆ’ä¼šè®®"ï¼Œç³»ç»Ÿè‡ªåŠ¨æ¨è ["ä¼šè®®", "è§„åˆ’", "Q2"]

3. **æ ‡ç­¾å­¦ä¹ æœºåˆ¶**
   - ç³»ç»Ÿç»Ÿè®¡æ¯ä¸ªæ ‡ç­¾çš„ä½¿ç”¨é¢‘ç‡ï¼ˆ`tags.usage_count`ï¼‰
   - ç”¨æˆ·æ‰‹åŠ¨æ·»åŠ çš„æ ‡ç­¾ä¹Ÿä¼šè¢«å­¦ä¹ 
   - å¸¸ç”¨æ ‡ç­¾åœ¨æ¨èæ—¶ä¼˜å…ˆçº§æ›´é«˜
   - ä¸å¸¸ç”¨çš„æ ‡ç­¾ä¼šé€æ¸é™ä½æ¨èä¼˜å…ˆçº§

4. **æ ‡ç­¾è‡ªåŠ¨åŒºåˆ†**
   - **è‡ªåŠ¨å»é‡**ï¼šç›¸åŒå«ä¹‰çš„æ ‡ç­¾ä¼šè¢«åˆå¹¶ï¼ˆå¦‚ï¼š"ä¼šè®®"å’Œ"å¼€ä¼š"ï¼‰
   - **è‡ªåŠ¨åˆ†ç±»**ï¼šæ ‡ç­¾ä¼šè¢«å½’ç±»åˆ°ä¸åŒç±»åˆ«ï¼ˆå·¥ä½œã€ç”Ÿæ´»ã€é‡è¦ç­‰ï¼‰
   - **è‡ªåŠ¨å…³è”**ï¼šç›¸åŒæ ‡ç­¾çš„ä»»åŠ¡ä¼šè‡ªåŠ¨å»ºç«‹å…³è”å…³ç³»

**å·¥ä½œæµç¨‹ç¤ºä¾‹**ï¼š
```
ç”¨æˆ·è¾“å…¥ï¼š"æ˜å¤©ä¸‹åˆ3ç‚¹å›¢é˜Ÿä¼šè®®ï¼Œè®¨è®ºQ2è§„åˆ’"
    â†“
AIåˆ†æ â†’ æå–å…³é”®è¯ï¼š["å›¢é˜Ÿ", "ä¼šè®®", "Q2", "è§„åˆ’"]
    â†“
ç”Ÿæˆæ ‡ç­¾ â†’ ["ä¼šè®®", "è§„åˆ’", "Q2", "å›¢é˜Ÿ"]
    â†“
ä¿å­˜åˆ°æ•°æ®åº“ â†’ events.tags = '["ä¼šè®®", "è§„åˆ’", "Q2", "å›¢é˜Ÿ"]'
    â†“
æ›´æ–°æ ‡ç­¾ç»Ÿè®¡ â†’ tagsè¡¨ä¸­"ä¼šè®®"ã€"è§„åˆ’"ç­‰æ ‡ç­¾çš„usage_count+1
    â†“
ä¸‹æ¬¡åˆ›å»ºä»»åŠ¡ â†’ è¾“å…¥"Q2ç›¸å…³ä¼šè®®"
    â†“
ç³»ç»Ÿæ¨è â†’ åŸºäºå†å²æ•°æ®ï¼Œè‡ªåŠ¨æ¨è ["ä¼šè®®", "Q2", "è§„åˆ’"]
```

**ç”¨æˆ·äº¤äº’**ï¼š
- âœ… **è‡ªåŠ¨åº”ç”¨**ï¼šAIç”Ÿæˆçš„æ ‡ç­¾ä¼šè‡ªåŠ¨å¡«å……åˆ°è¡¨å•
- âœ… **å¯ç¼–è¾‘**ï¼šç”¨æˆ·å¯ä»¥ä¿®æ”¹ã€æ·»åŠ æˆ–åˆ é™¤æ ‡ç­¾
- âœ… **å¯æ‹’ç»**ï¼šç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨AIæ¨èçš„æ ‡ç­¾
- âœ… **æ‰‹åŠ¨æ·»åŠ **ï¼šç”¨æˆ·å¯ä»¥æ‰‹åŠ¨æ·»åŠ è‡ªå®šä¹‰æ ‡ç­¾

#### 3.1.3 æ™ºèƒ½æé†’æ—¶é—´å»ºè®®
**åŠŸèƒ½æè¿°**ï¼šæ ¹æ®äº‹ä»¶ç±»å‹å’Œé‡è¦æ€§ï¼ŒAIå»ºè®®æœ€ä½³æé†’æ—¶é—´

**å»ºè®®è§„åˆ™**ï¼š
- ä¼šè®®ç±»ï¼šæå‰30åˆ†é’Ÿ-1å°æ—¶
- é‡è¦æˆªæ­¢æ—¥æœŸï¼šæå‰1-3å¤©
- ç”Ÿæ—¥/çºªå¿µæ—¥ï¼šæå‰1å¤©
- æ—¥å¸¸ä»»åŠ¡ï¼šæå‰15-30åˆ†é’Ÿ
- äº¤é€šç›¸å…³ï¼šè€ƒè™‘è·¯ç¨‹æ—¶é—´

#### 3.1.4 äº‹ä»¶å†²çªæ£€æµ‹
**åŠŸèƒ½æè¿°**ï¼šAIæ£€æµ‹æ—¥ç¨‹å†²çªå¹¶æä¾›è§£å†³æ–¹æ¡ˆ

**æ£€æµ‹å†…å®¹**ï¼š
- æ—¶é—´å†²çªï¼šåŒä¸€æ—¶é—´æ®µå¤šä¸ªäº‹ä»¶
- åœ°ç‚¹å†²çªï¼šåŒä¸€åœ°ç‚¹ä¸åŒæ—¶é—´
- äººå‘˜å†²çªï¼šåŒä¸€äººå‘˜å¤šä¸ªä¼šè®®
- èµ„æºå†²çªï¼šä¼šè®®å®¤ã€è®¾å¤‡ç­‰

**AIå»ºè®®**ï¼š
- è‡ªåŠ¨è°ƒæ•´æ—¶é—´
- æ¨èæ›¿ä»£æ—¶é—´
- åˆå¹¶ç›¸ä¼¼äº‹ä»¶

#### 4.1.5 æ—¥ç¨‹æ™ºèƒ½æ’æœŸï¼ˆDeepSeekæ€è·¯ï¼‰

**åŠŸèƒ½æè¿°**ï¼šAIå¸®ä½ åˆç†å®‰æ’æ—¶é—´ï¼Œè€ƒè™‘ä¸ªäººä¹ æƒ¯å’Œå†å²å®Œæˆç‡

```typescript
function scheduleTasks(tasks: Task[]) {
  const context = {
    ç°æœ‰ä»»åŠ¡: tasks,
    ä¸ªäººä¹ æƒ¯: getUserHabits(),  // ä»æœ¬åœ°è®°å¿†è¯»å–
    å†å²å®Œæˆç‡: getCompletionStats(),
    å½“å‰ç²¾åŠ›çŠ¶æ€: getCurrentEnergyLevel()
  };
  
  return callAI(`
  è¯·ä¸ºä»¥ä¸‹ä»»åŠ¡å®‰æ’æ—¥ç¨‹ï¼Œè€ƒè™‘ï¼š
  1. ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡ä¼˜å…ˆ
  2. ç›¸ä¼¼ä»»åŠ¡æ‰¹é‡å¤„ç†
  3. é«˜ç²¾åŠ›ä»»åŠ¡æ”¾åœ¨é»„é‡‘æ—¶é—´
  4. ç•™å‡ºç¼“å†²æ—¶é—´
  5. è€ƒè™‘ä¸ªäººå·¥ä½œä¹ æƒ¯
  6. è¿”å›JSONæ ¼å¼çš„æ—¥ç¨‹è¡¨
  
  ${JSON.stringify(context)}
  `);
}
```

**ä¼˜åŒ–ç»´åº¦**ï¼š
- æ—¶é—´åˆ†é…åˆç†æ€§
- å·¥ä½œä¸ä¼‘æ¯å¹³è¡¡
- ä¼˜å…ˆçº§æ’åº
- æ•ˆç‡æœ€å¤§åŒ–
- **ä¸ªäººä¹ æƒ¯é€‚é…**ï¼ˆä»å†å²æ•°æ®å­¦ä¹ ï¼‰
- **ç²¾åŠ›ç®¡ç†**ï¼ˆé«˜ç²¾åŠ›ä»»åŠ¡æ”¾åœ¨é»„é‡‘æ—¶é—´ï¼‰

#### 4.1.6 å·¥ä½œæ—¥å¿—è‡ªåŠ¨ç”Ÿæˆï¼ˆClawdbotæ ¸å¿ƒåŠŸèƒ½ï¼‰

**åŠŸèƒ½æè¿°**ï¼šä»»åŠ¡å®Œæˆæ—¶è‡ªåŠ¨ç”Ÿæˆå·¥ä½œæ—¥å¿—ï¼Œè®°å½•å·¥ä½œå†…å®¹å’Œç»éªŒ

**æ—¥å¿—ç»“æ„ï¼ˆMarkdownæ ¼å¼ï¼‰**ï¼š
```markdown
# 2026-01-29 å·¥ä½œæ—¥å¿—

## ä»»åŠ¡ä¿¡æ¯
- åˆ›å»ºæ—¶é—´: 2026-01-29 10:30
- å®Œæˆæ—¶é—´: 2026-01-29 11:45
- å®é™…è€—æ—¶: 1.25å°æ—¶
- é¢„è®¡è€—æ—¶: 1å°æ—¶
- æ‰“æ–­æ¬¡æ•°: 2
- æ•ˆç‡è¯„åˆ†: 85/100

## å·¥ä½œå†…å®¹
å®Œæˆäº†Clawdboté¡¹ç›®åˆ†ææŠ¥å‘Šçš„æ’°å†™ï¼ŒåŒ…æ‹¬ï¼š
- æ¶æ„è®¾è®¡åˆ†æ
- åŠŸèƒ½æ¨¡å—æ¢³ç†
- æŠ€æœ¯æ ˆè¯„ä¼°

## é‡åˆ°çš„é—®é¢˜
- æ•°æ®æºAPIä¸ç¨³å®šï¼Œéœ€è¦é‡è¯•æœºåˆ¶
- æ–‡æ¡£ç¼ºå°‘æ¥å£è¯´æ˜ï¼Œéœ€è¦è”ç³»å¼€å‘

## å­¦åˆ°çš„ç»éªŒ
1. å…ˆè·å–æ•°æ®å†è¿›è¡Œåˆ†æï¼Œé¿å…é‡å¤è¯·æ±‚
2. é‡è¦ä¼šè®®è¦å½•éŸ³å¤‡ä»½ï¼Œæ–¹ä¾¿åç»­æŸ¥é˜…
3. å¤æ‚ä»»åŠ¡è¦æ‹†åˆ†æˆå°å—ï¼Œæé«˜å®Œæˆç‡

## AIæ´å¯Ÿ
- ç±»ä¼¼ä»»åŠ¡å¹³å‡è€—æ—¶1.2å°æ—¶ï¼Œæœ¬æ¬¡ç¬¦åˆé¢„æœŸ
- å»ºè®®ä¸‹æ¬¡ç±»ä¼¼ä»»åŠ¡é¢„ç•™1.5å°æ—¶ç¼“å†²æ—¶é—´
- å‘ç°ä½ åœ¨è¿™ä¸ªæ—¶é—´æ®µæ•ˆç‡è¾ƒé«˜ï¼ˆ85åˆ†ï¼‰
```

**è‡ªåŠ¨ç”Ÿæˆæµç¨‹**ï¼š
1. ä»»åŠ¡å®Œæˆæ—¶è§¦å‘
2. AIåˆ†æä»»åŠ¡å†…å®¹ã€è€—æ—¶ã€æ‰“æ–­æƒ…å†µ
3. ç”ŸæˆMarkdownæ ¼å¼æ—¥å¿—
4. ä¿å­˜åˆ° `memory/daily/YYYY-MM-DD.md`
5. æå–å…³é”®ç»éªŒåˆ° `memory/habits/work-patterns.md`

#### 4.1.7 äº‹ä»¶æ‘˜è¦å’Œæ´å¯Ÿï¼ˆå¢å¼ºç‰ˆï¼‰

**åŠŸèƒ½æè¿°**ï¼šAIç”Ÿæˆæ—¥ç¨‹æ‘˜è¦å’Œä¸ªæ€§åŒ–æ´å¯Ÿï¼ŒåŸºäºå†å²æ•°æ®

**è¾“å‡ºå†…å®¹**ï¼š
- ä»Šæ—¥/æœ¬å‘¨/æœ¬æœˆäº‹ä»¶æ‘˜è¦
- å¿™ç¢Œç¨‹åº¦åˆ†æ
- æ—¶é—´åˆ†å¸ƒç»Ÿè®¡
- **å·¥ä½œæ•ˆç‡åˆ†æ**ï¼ˆåŸºäºå†å²æ—¥å¿—ï¼‰
- **å·¥ä½œæ¨¡å¼è¯†åˆ«**ï¼ˆæœ€ä½³å·¥ä½œæ—¶é—´ã€ä»»åŠ¡ç±»å‹åå¥½ï¼‰
- **ä¸ªæ€§åŒ–å»ºè®®**ï¼ˆåŸºäºå­¦ä¹ åˆ°çš„ä¹ æƒ¯ï¼‰

#### 4.1.8 ä¸Šä¸‹æ–‡æ„ŸçŸ¥æé†’ï¼ˆClawdbotåˆ›æ–°ç‚¹ï¼‰

**åŠŸèƒ½æè¿°**ï¼šä¸ä»…ä»…æ˜¯æ—¶é—´åˆ°äº†æé†’ï¼Œè€Œæ˜¯ç†è§£ä¸Šä¸‹æ–‡ï¼Œæä¾›æ™ºèƒ½æé†’

```typescript
function smartReminder(task: Task) {
  // 1. æ£€æŸ¥æ˜¯å¦éœ€è¦æå‰å‡†å¤‡
  if (task.category === "ä¼šè®®") {
    remindBefore(task, "1å°æ—¶", "è®°å¾—å‡†å¤‡ä¼šè®®ææ–™");
    if (task.checklist) {
      remindBefore(task, "30åˆ†é’Ÿ", `æ£€æŸ¥æ¸…å•ï¼š${task.checklist.join(', ')}`);
    }
  }
  
  // 2. åŸºäºä½ç½®æé†’
  if (task.tags.includes("åŠå…¬å®¤")) {
    whenAtLocation("office", `åœ¨åŠå…¬å®¤è®°å¾—ï¼š${task.title}`);
  }
  
  // 3. è¿é”ä»»åŠ¡æé†’
  if (task.dependencies) {
    task.dependencies.forEach(dep => {
      if (!dep.completed) {
        remind(`${task.title} éœ€è¦å…ˆå®Œæˆï¼š${dep.title}`);
      }
    });
  }
  
  // 4. åŸºäºå·¥ä½œæ¨¡å¼çš„æé†’
  const bestTime = getUserBestTime(task.category);
  if (isCurrentTimeBest(bestTime)) {
    remind(`ç°åœ¨æ˜¯å¤„ç†${task.category}ç±»ä»»åŠ¡çš„æœ€ä½³æ—¶é—´`);
  }
}
```

#### 4.1.9 æ‰“æ–­æ¢å¤æé†’ï¼ˆClawdbotç‰¹è‰²åŠŸèƒ½ï¼‰

**åŠŸèƒ½æè¿°**ï¼šè®°å½•æ‰“æ–­ï¼Œå¸®åŠ©å¿«é€Ÿæ¢å¤å·¥ä½œçŠ¶æ€

```typescript
// è®°å½•æ‰“æ–­
let interruption = {
  time: "14:30",
  task: "å†™APIæ–‡æ¡£",
  lastAction: "æ­£åœ¨ç¼–å†™ç”¨æˆ·è®¤è¯éƒ¨åˆ†",
  notes: "æ¥å£å‚æ•°è¿˜éœ€è¦éªŒè¯",
  context: getCurrentContext()  // å½“å‰å·¥ä½œä¸Šä¸‹æ–‡
};

// ä¿å­˜æ‰“æ–­è®°å½•
saveInterruption(interruption);

// 15åˆ†é’Ÿåæé†’ï¼šåˆšæ‰åœ¨åšä»€ä¹ˆ
scheduleReminder("15åˆ†é’Ÿå", {
  message: "ç»§ç»­ï¼šå†™APIæ–‡æ¡£ - ç”¨æˆ·è®¤è¯éƒ¨åˆ†",
  context: interruption.context,
  quickActions: [
    "æ‰“å¼€ç›¸å…³æ–‡æ¡£",
    "æŸ¥çœ‹æ¥å£å®šä¹‰",
    "ç»§ç»­ç¼–å†™"
  ]
});
```

## äº”ã€åˆ†å±‚è®°å¿†ç³»ç»Ÿï¼ˆClawdbotæ ¸å¿ƒæ¶æ„ï¼‰

### 5.1 æ ¸å¿ƒè®¾è®¡ç†å¿µï¼šä¸Šä¸‹æ–‡ â‰  è®°å¿†

**é‡è¦æ¦‚å¿µåŒºåˆ†**ï¼š

- **ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰**ï¼šæ¨¡å‹åœ¨è¿™ä¸€è½®è¯·æ±‚ä¸­èƒ½çœ‹åˆ°çš„æ‰€æœ‰ä¿¡æ¯
  - åŒ…æ‹¬ï¼šSystem Promptã€å¯¹è¯å†å²ã€å·¥å…·è¿”å›ç»“æœã€å½“å‰æ¶ˆæ¯
  - ç‰¹ç‚¹ï¼š**çŸ­**ï¼ˆç”¨å®Œå°±æ²¡äº†ï¼‰ã€**è´µ**ï¼ˆæ¯tokenéƒ½èŠ±é’±ï¼‰ã€**æœ‰é™**ï¼ˆå—ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ï¼‰

- **è®°å¿†ï¼ˆMemoryï¼‰**ï¼šå­˜åœ¨ç£ç›˜ä¸Šçš„æ–‡ä»¶
  - ç‰¹ç‚¹ï¼š**æŒä¹…**ï¼ˆé‡å¯ã€éš”å¤©ã€éš”æœˆéƒ½åœ¨ï¼‰ã€**æ— ç•Œ**ï¼ˆç†è®ºä¸Šæ— é™å¢é•¿ï¼‰ã€**ä¾¿å®œ**ï¼ˆä¸å APIæˆæœ¬ï¼‰ã€**å¯æœç´¢**ï¼ˆå·²å»ºç«‹è¯­ä¹‰ç´¢å¼•ï¼‰

**Clawdbotçš„æ ¸å¿ƒåŸåˆ™**ï¼š
> Memory is just Markdown.

æ²¡æœ‰ä¸“æœ‰æ•°æ®åº“ï¼Œæ²¡æœ‰äº‘ç«¯ç§æœ‰æ ¼å¼ï¼Œæ²¡æœ‰ä½ çœ‹ä¸æ‡‚çš„å†…éƒ¨çŠ¶æ€ã€‚ç”¨æˆ·å¯ä»¥ï¼š
- âœ… ç›´æ¥è¯»ã€æ”¹ã€éšæ—¶åˆ é™¤
- âœ… ç”¨Gitç®¡ç†
- âœ… æ²¡æœ‰ä»»ä½•"AIç‰¹æƒ"

### 5.2 è®°å¿†ç³»ç»Ÿç»“æ„ï¼ˆClawdbotä¸¤å±‚è®¾è®¡ï¼‰

å€Ÿé‰´Clawdbotçš„åˆ†å±‚è®°å¿†ç³»ç»Ÿï¼Œé‡‡ç”¨**ä¸¤å±‚è®°å¿† + ç»“æ„åŒ–æ•°æ®**çš„æ··åˆå­˜å‚¨ï¼š

```
~/smart-calendar/
â”œâ”€â”€ MEMORY.md                 # é•¿æœŸè®°å¿†ï¼ˆæ•´ç†åçš„é‡è¦ä¿¡æ¯ï¼‰
â”œâ”€â”€ AGENT.md                  # Agentè¡Œä¸ºè§„èŒƒ
â”œâ”€â”€ USER.md                   # ç”¨æˆ·åå¥½å’ŒèƒŒæ™¯
â”œâ”€â”€ SOUL.md                   # Agentèº«ä»½å®šä¹‰
â””â”€â”€ memory/
    â”œâ”€â”€ daily/                # æ¯æ—¥å·¥ä½œæ—¥å¿—ï¼ˆçŸ­æœŸã€åŸå§‹ï¼‰
    â”‚   â”œâ”€â”€ 2026-01-29.md
    â”‚   â”œâ”€â”€ 2026-01-30.md
    â”‚   â””â”€â”€ ...
    â”œâ”€â”€ tasks/                # ä»»åŠ¡æ¡£æ¡ˆï¼ˆMarkdownï¼‰
    â”‚   â”œâ”€â”€ projects.md      # é¡¹ç›®æ¡£æ¡ˆ
    â”‚   â”œâ”€â”€ meetings.md      # ä¼šè®®çºªè¦åº“
    â”‚   â”œâ”€â”€ templates.md     # ä»»åŠ¡æ¨¡æ¿
    â”‚   â””â”€â”€ archives/        # å½’æ¡£ä»»åŠ¡
    â”‚       â””â”€â”€ 2026-01/
    â””â”€â”€ habits/               # å·¥ä½œæ¨¡å¼ï¼ˆMarkdownï¼‰
        â”œâ”€â”€ work-patterns.md  # å·¥ä½œæ¨¡å¼è¯†åˆ«
        â”œâ”€â”€ best-times.md     # æœ€ä½³å·¥ä½œæ—¶é—´
        â””â”€â”€ task-preferences.md # ä»»åŠ¡åå¥½
```

**ä¸¤å±‚è®°å¿†è®¾è®¡**ï¼š

#### ç¬¬ä¸€å±‚ï¼šæ¯æ—¥æ—¥å¿—ï¼ˆçŸ­æœŸã€åŸå§‹ï¼‰
- **ä½œç”¨**ï¼šåƒäººçš„å·¥ä½œç¬”è®°æœ¬
- **å†…å®¹**ï¼šä»Šå¤©èŠäº†ä»€ä¹ˆã€åšäº†ä»€ä¹ˆå†³å®šã€ä½ éšå£æè¿‡çš„åå¥½
- **ç‰¹ç‚¹**ï¼šä¸è¿½æ±‚ç»“æ„ä¼˜é›…ï¼Œåªæ±‚ä¸ä¸¢åŸå§‹ä¿¡æ¯

#### ç¬¬äºŒå±‚ï¼šé•¿æœŸè®°å¿†ï¼ˆæ•´ç†ã€æ²‰æ·€ï¼‰
- **ä½œç”¨**ï¼šäººç±»çš„"è„‘å†…çŸ¥è¯†åº“"
- **å†…å®¹**ï¼šç”¨æˆ·é•¿æœŸåå¥½ã€å·²åšå‡ºçš„å…³é”®å†³ç­–ã€é¡¹ç›®èƒŒæ™¯ã€é‡è¦è”ç³»äºº
- **ç‰¹ç‚¹**ï¼šä»è®°äº‹æœ¬å‡çº§æˆå¸¸è¯†

### 5.3 ä¼šè¯å¯åŠ¨æ—¶çš„è®°å¿†åŠ è½½è§„åˆ™

```markdown
## Every Session
Before doing anything else:
1. Read SOUL.md - this is who you are
2. Read USER.md - this is who you are helping
3. Read memory/YYYY-MM-DD.md (today and yesterday) for recent context
4. If in MAIN SESSION (direct chat with your human), also read MEMORY.md

Don't ask permission, just do it.
```

**å®ç°é€»è¾‘**ï¼š
- æ¯æ¬¡ä¼šè¯å¯åŠ¨ï¼Œè‡ªåŠ¨åŠ è½½ç›¸å…³è®°å¿†æ–‡ä»¶
- ä¸è¯·æ±‚ç”¨æˆ·æƒé™ï¼Œç›´æ¥æ‰§è¡Œ
- ç¡®ä¿AIå§‹ç»ˆ"è®°å¾—"ä½ æ˜¯è°ã€ä½ çš„åå¥½ã€æœ€è¿‘å‘ç”Ÿäº†ä»€ä¹ˆ

### 5.4 è®°å¿†æ–‡ä»¶ç´¢å¼•æœºåˆ¶ï¼ˆClawdbotæ ¸å¿ƒæŠ€æœ¯ï¼‰

#### 5.4.1 ç´¢å¼•å»ºç«‹æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. File Saved                                               â”‚
â”‚    ~/smart-calendar/memory/2026-01-29.md                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. File Watcher Detects Change                              â”‚
â”‚    Chokidar monitors MEMORY.md + memory/**/*.md            â”‚
â”‚    Debounced 1.5 seconds to batch rapid writes             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Chunking                                                 â”‚
â”‚    Split into ~400 token chunks with 80 token overlap      â”‚
â”‚                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚    â”‚ Chunk 1        â”‚â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚    â”‚ Lines 1-15     â”‚      â”‚                               â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                               â”‚
â”‚                             â”‚ (80 token overlap)            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                               â”‚
â”‚    â”‚ Chunk 2        â”‚â—„â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚    â”‚ Lines 12-28    â”‚â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                               â”‚
â”‚                             â”‚                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                               â”‚
â”‚    â”‚ Chunk 3        â”‚â—„â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚    â”‚ Lines 25-40    â”‚                                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                             â”‚
â”‚    Why 400/80? Balances semantic coherence vs granularity. â”‚
â”‚    Overlap ensures facts spanning chunk boundaries are     â”‚
â”‚    captured in both. Both values are configurable.         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Embedding                                                â”‚
â”‚    Each chunk -> embedding provider -> vector               â”‚
â”‚                                                             â”‚
â”‚    "æ˜å¤©ä¸‹åˆ3ç‚¹å¼€ä¼š" ->                                     â”‚
â”‚    OpenAI/Gemini/Local ->                                   â”‚
â”‚    [0.12, -0.34, 0.56, ...] (1536 dimensions)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Storage                                                  â”‚
â”‚    ~/.smart-calendar/memory/.sqlite                        â”‚
â”‚                                                             â”‚
â”‚    Tables:                                                 â”‚
â”‚    - chunks (id, path, start_line, end_line, text, hash)   â”‚
â”‚    - chunks_vec (id, embedding) -> sqlite-vec             â”‚
â”‚    - chunks_fts (text) -> FTS5 full-text                  â”‚
â”‚    - embedding_cache (hash, vector) -> avoid re-embedding  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.4.2 æ··åˆæœç´¢ç­–ç•¥ï¼ˆæœç´¢èƒœè¿‡æ³¨å…¥ï¼‰

**æ ¸å¿ƒåŸåˆ™**ï¼šClawdbotä»æ¥ä¸ä¼šæŠŠæ‰€æœ‰è®°å¿†ä¸€è‚¡è„‘å¡è¿›ä¸Šä¸‹æ–‡ã€‚ç­–ç•¥æ˜¯ï¼š**å…ˆæœç´¢ï¼Œå†æ³¨å…¥**ã€‚

**æœç´¢æµç¨‹**ï¼š
1. **å‘é‡è¯­ä¹‰æœç´¢**ï¼ˆç†è§£ä½ åœ¨è¯´ä»€ä¹ˆï¼‰
   - ä½¿ç”¨sqlite-vecè¿›è¡Œå‘é‡ç›¸ä¼¼æ€§æœç´¢
   - ç†è§£è¯­ä¹‰ï¼Œæ‰¾åˆ°ç›¸å…³è®°å¿†

2. **å…³é”®è¯BM25æœç´¢**ï¼ˆç¡®ä¿ä¸æ¼ä¸“æœ‰åè¯ï¼‰
   - ä½¿ç”¨FTS5å…¨æ–‡æœç´¢å¼•æ“
   - ç²¾ç¡®åŒ¹é…ä¸“æœ‰åè¯ã€æ—¥æœŸã€äººåç­‰

3. **åŠ æƒèåˆ**ï¼š
   ```typescript
   finalScore = 0.7 * semanticScore + 0.3 * keywordScore
   ```

4. **ç»“æœè¿‡æ»¤**ï¼šä¸å¤Ÿç›¸å…³ç›´æ¥ä¸¢å¼ƒ

**è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ**
- âœ… ä¸Šä¸‹æ–‡é‡Œæ°¸è¿œåªå‡ºç°**å½“å‰çœŸæ­£éœ€è¦çš„è®°å¿†**
- âœ… ä¸æ˜¯"æˆ‘æ€•å¿˜æ‰€ä»¥å…¨å¡"
- âœ… é™ä½æˆæœ¬ï¼Œæé«˜æ•ˆç‡

#### 5.4.3 æŠ€æœ¯å®ç°ï¼šsqlite-vec + FTS5

**å…³é”®ç‚¹**ï¼šä¸ä½¿ç”¨å¤–éƒ¨å‘é‡æ•°æ®åº“ï¼

- **sqlite-vec**ï¼šSQLiteæ‰©å±•ï¼Œç›´æ¥åœ¨SQLiteä¸­è¿›è¡Œå‘é‡ç›¸ä¼¼æ€§æœç´¢
- **FTS5**ï¼šSQLiteå†…ç½®å…¨æ–‡æœç´¢å¼•æ“ï¼Œæä¾›BM25å…³é”®è¯åŒ¹é…
- **ä¼˜åŠ¿**ï¼šå•æ–‡ä»¶ã€å¯è¿ç§»ã€å¯å¤‡ä»½ï¼Œå®Œå…¨æœ¬åœ°åŒ–

### 5.5 é•¿å¯¹è¯å¤„ç†ï¼šå‹ç¼©ç­–ç•¥ï¼ˆCompactionï¼‰

**é—®é¢˜**ï¼šå†å¤§çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œä¹Ÿä¼šè¢«ç”¨å®Œã€‚

**Clawdbotçš„åº”å¯¹ç­–ç•¥**ï¼šå‹ç¼©ï¼ˆCompactionï¼‰

**å‹ç¼©æµç¨‹**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Context Approaching Limit                                    â”‚
â”‚                                                              â”‚
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 75% of context                                     â”‚
â”‚ â†‘                                                           â”‚
â”‚ Soft threshold crossed                                      â”‚
â”‚ (contextWindow - reserve - softThreshold)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Silent Memory Flush Turn                                     â”‚
â”‚                                                              â”‚
â”‚ System: "Pre-compaction memory flush. Store durable         â”‚
â”‚         memories now (use memory/YYYY-MM-DD.md).            â”‚
â”‚         If nothing to store, reply with NO_REPLY."          â”‚
â”‚                                                              â”‚
â”‚ Agent: reviews conversation for important info              â”‚
â”‚        writes key decisions/facts to memory files           â”‚
â”‚        -> NO_REPLY (user sees nothing)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Compaction Proceeds Safely                                  â”‚
â”‚                                                              â”‚
â”‚ Important information is now on disk                        â”‚
â”‚ Compaction can proceed without losing knowledge             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®è®¾è®¡**ï¼š
1. **å‹ç¼©å‰å¼ºåˆ¶åˆ·æ–°è®°å¿†**ï¼šåœ¨æ¨¡å‹"é—å¿˜"ä¹‹å‰ï¼Œå…ˆæŠŠé‡è¦ä¿¡æ¯å†™è¿›Markdownæ–‡ä»¶
2. **é¿å…ä¿¡æ¯ä¸¢å¤±**ï¼šæ—¢å‹ç¼©äº†ä¸Šä¸‹æ–‡ï¼Œåˆé¿å…äº†"æ€»ç»“æ—¶é¡ºæ‰‹æŠŠå…³é”®å†³ç­–æŠ¹æ‰"çš„ç»å…¸äº‹æ•…
3. **ç”¨æˆ·æ— æ„ŸçŸ¥**ï¼šå‹ç¼©è¿‡ç¨‹å¯¹ç”¨æˆ·é€æ˜ï¼ˆNO_REPLYï¼‰

### 5.6 å¤šAgentéš”ç¦»ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰

**æ”¯æŒå¤šä¸ªAgent**ï¼š
- ä¸ªäººã€å·¥ä½œã€å®éªŒç”¨ã€è‡ªåŠ¨åŒ–è„šæœ¬
- æ¯ä¸ªAgentéƒ½æœ‰ï¼šç‹¬ç«‹å·¥ä½œåŒºã€ç‹¬ç«‹è®°å¿†ã€ç‹¬ç«‹ç´¢å¼•ï¼Œ**å½¼æ­¤é»˜è®¤äº’ä¸è¯»å–**

**ç›®å½•ç»“æ„**ï¼š
```
~/.smart-calendar/memory/  # State directory (indexes)
â”œâ”€â”€ main.sqlite            # Vector index for "main" agent
â””â”€â”€ work.sqlite            # Vector index for "work" agent

~/smart-calendar/          # "main" agent workspace
â”œâ”€â”€ MEMORY.md
â””â”€â”€ memory/
    â””â”€â”€ 2026-01-29.md

~/smart-calendar-work/     # "work" agent workspace
â”œâ”€â”€ MEMORY.md
â””â”€â”€ memory/
    â””â”€â”€ 2026-01-29.md
```

**ä¼˜åŠ¿**ï¼š
- ç”Ÿæ´»å’Œå·¥ä½œå®Œå…¨éš”ç¦»
- éšç§ä¿æŠ¤
- ä¸åŒåœºæ™¯ä½¿ç”¨ä¸åŒAgent

### 5.7 Clawdbotè®°å¿†ç³»ç»Ÿçš„å››ä¸ªæ ¸å¿ƒåŸåˆ™

1. **é€æ˜èƒœè¿‡é»‘ç›’**
   - Memoryä½¿ç”¨çº¯Markdownæ ¼å¼
   - ç”¨æˆ·å¯ä»¥é˜…è¯»ã€ç¼–è¾‘å’Œç‰ˆæœ¬æ§åˆ¶
   - ä¸ä½¿ç”¨æ™¦æ¶©éš¾æ‡‚çš„æ•°æ®åº“æˆ–ä¸“æœ‰æ ¼å¼

2. **æœç´¢èƒœè¿‡æ³¨å…¥**
   - æ™ºèƒ½ä½“ä¸ä¼šå°†æ‰€æœ‰ä¿¡æ¯éƒ½å¡è¿›ä¸Šä¸‹æ–‡
   - è€Œæ˜¯æœç´¢ç›¸å…³ä¿¡æ¯
   - ä¿æŒä¸Šä¸‹æ–‡çš„èšç„¦æ€§ï¼Œé™ä½æˆæœ¬

3. **æŒä¹…æ€§ä¼˜äºä¼šè¯**
   - é‡è¦ä¿¡æ¯ä¸ä»…ä¿å­˜åœ¨å¯¹è¯è®°å½•ä¸­
   - è¿˜ä¼šä¿å­˜åœ¨ç£ç›˜ä¸Šçš„æ–‡ä»¶ä¸­
   - å‹ç¼©æ“ä½œæ— æ³•åˆ é™¤å·²ä¿å­˜çš„å†…å®¹

4. **æ··åˆå‹æœç´¢ä¼˜äºå•ä¸€æœç´¢**
   - å•ç‹¬ä½¿ç”¨å‘é‡æœç´¢æ— æ³•ç²¾ç¡®åŒ¹é…
   - å•ç‹¬ä½¿ç”¨å…³é”®è¯æœç´¢æ— æ³•è·å–è¯­ä¹‰ä¿¡æ¯
   - æ··åˆæœç´¢åˆ™èƒ½å…¼é¡¾ä¸¤è€…

### 5.8 Markdownæ—¥å¿—æ ¼å¼ï¼ˆå¢å¼ºç‰ˆï¼‰

**æ¯æ—¥å·¥ä½œæ—¥å¿—æ¨¡æ¿**ï¼š
```markdown
# 2026-01-29 å·¥ä½œæ—¥å¿—

## ğŸ“Š ä»Šæ—¥æ¦‚è§ˆ
- å®Œæˆä»»åŠ¡: 5/8
- æ€»å·¥ä½œæ—¶é•¿: 6.5å°æ—¶
- æ•ˆç‡è¯„åˆ†: 82/100
- æ‰“æ–­æ¬¡æ•°: 3

## âœ… å®Œæˆä»»åŠ¡

### 1. å›¢é˜Ÿä¼šè®® - Q2è§„åˆ’ (14:00-15:00)
- **å®é™…è€—æ—¶**: 1å°æ—¶
- **é¢„è®¡è€—æ—¶**: 1å°æ—¶
- **å®Œæˆåº¦**: 100%
- **å…³é”®æˆæœ**: ç¡®å®šäº†Q2é‡ç‚¹æ–¹å‘
- **é‡åˆ°çš„é—®é¢˜**: æ•°æ®å‡†å¤‡ä¸å……åˆ†
- **å­¦åˆ°çš„ç»éªŒ**: é‡è¦ä¼šè®®è¦æå‰å‡†å¤‡æ•°æ®

### 2. å†™APIæ–‡æ¡£ (15:30-17:00)
- **å®é™…è€—æ—¶**: 1.5å°æ—¶
- **é¢„è®¡è€—æ—¶**: 1å°æ—¶
- **å®Œæˆåº¦**: 80%
- **æ‰“æ–­**: 2æ¬¡ï¼ˆç´§æ€¥bugä¿®å¤ï¼‰
- **å­¦åˆ°çš„ç»éªŒ**: å¤æ‚æ–‡æ¡£è¦åˆ†å—å®Œæˆ

## ğŸ”„ è¿›è¡Œä¸­ä»»åŠ¡
- [ ] é¡¹ç›®é‡æ„æ–¹æ¡ˆè®¾è®¡ (è¿›è¡Œä¸­ï¼Œé¢„è®¡æ˜å¤©å®Œæˆ)

## ğŸ“ æ˜æ—¥è®¡åˆ’
1. å®Œæˆé¡¹ç›®é‡æ„æ–¹æ¡ˆ
2. ä»£ç å®¡æŸ¥
3. å›¢é˜Ÿåˆ†äº«å‡†å¤‡

## ğŸ’¡ AIæ´å¯Ÿ
- ä¸‹åˆ2-4ç‚¹æ˜¯ä½ çš„é«˜æ•ˆå·¥ä½œæ—¶é—´ï¼ˆæ•ˆç‡è¯„åˆ†85+ï¼‰
- ä¼šè®®ç±»ä»»åŠ¡å®Œæˆç‡è¾ƒé«˜ï¼ˆ95%ï¼‰
- å»ºè®®ï¼šå°†é‡è¦ä»»åŠ¡å®‰æ’åœ¨ä¸‹åˆæ—¶æ®µ
```

### 5.3 å·¥ä½œæ¨¡å¼è¯†åˆ«

**work-patterns.md** è®°å½•å­¦ä¹ åˆ°çš„å·¥ä½œæ¨¡å¼ï¼š

```markdown
# å·¥ä½œæ¨¡å¼è¯†åˆ«

## æœ€ä½³å·¥ä½œæ—¶é—´
- **æ·±åº¦å·¥ä½œ**: 14:00-16:00ï¼ˆæ•ˆç‡è¯„åˆ†: 88ï¼‰
- **åˆ›æ„å·¥ä½œ**: 10:00-12:00ï¼ˆæ•ˆç‡è¯„åˆ†: 85ï¼‰
- **æ²Ÿé€šåè°ƒ**: 09:00-10:00, 16:00-17:00

## ä»»åŠ¡ç±»å‹åå¥½
- **ç¼–ç ä»»åŠ¡**: å¹³å‡è€—æ—¶æ¯”é¢„è®¡å°‘15%
- **æ–‡æ¡£ä»»åŠ¡**: å¹³å‡è€—æ—¶æ¯”é¢„è®¡å¤š20%
- **ä¼šè®®ä»»åŠ¡**: å®Œæˆç‡95%ï¼Œå¾ˆå°‘å»¶æœŸ

## æ‰“æ–­æ¨¡å¼
- å¹³å‡æ¯2å°æ—¶è¢«æ‰“æ–­1æ¬¡
- æ‰“æ–­åæ¢å¤æ—¶é—´: çº¦5åˆ†é’Ÿ
- å»ºè®®ï¼šé‡è¦ä»»åŠ¡é¢„ç•™10%ç¼“å†²æ—¶é—´

## æ•ˆç‡æå‡å»ºè®®
1. å°†ç¼–ç ä»»åŠ¡å®‰æ’åœ¨ä¸‹åˆ2-4ç‚¹
2. æ–‡æ¡£ä»»åŠ¡é¢„ç•™æ›´å¤šæ—¶é—´
3. é‡è¦ä¼šè®®å‰30åˆ†é’Ÿè®¾ç½®å…æ‰“æ‰°
```

## å…­ã€æŠ€æœ¯æ¶æ„è®¾è®¡ï¼ˆå¢å¼ºç‰ˆï¼‰

### 4.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‰ç«¯ç•Œé¢å±‚ (Vue3)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ äº‹ä»¶è¾“å…¥ç•Œé¢ â”‚  â”‚  æ—¥å†æ˜¾ç¤ºç•Œé¢            â”‚ â”‚
â”‚  â”‚ (è‡ªç„¶è¯­è¨€)   â”‚  â”‚  (å¤šè§†å›¾)                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ IPCé€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”‚      Electronä¸»è¿›ç¨‹å±‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        äº‹ä»¶æœåŠ¡å±‚ (EventService)          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”‚  AIæœåŠ¡å±‚ (AIService)                 â”‚ â”‚
â”‚  â”‚  â”‚  - è‡ªç„¶è¯­è¨€è§£æ                       â”‚ â”‚
â”‚  â”‚  â”‚  - äº‹ä»¶åˆ†ç±»                           â”‚ â”‚
â”‚  â”‚  â”‚  - å†²çªæ£€æµ‹                           â”‚ â”‚
â”‚  â”‚  â”‚  - æ™ºèƒ½å»ºè®®                           â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                â”‚ HTTP/WebSocket
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚            AIæ¥å£å±‚                              â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  å¯é€‰AIæœåŠ¡æä¾›å•†                         â”‚  â”‚ â”‚
â”‚  â”‚  - OpenAI GPT API                        â”‚  â”‚ â”‚
â”‚  â”‚  - ç™¾åº¦æ–‡å¿ƒä¸€è¨€ API                      â”‚  â”‚ â”‚
â”‚  â”‚  - é˜¿é‡Œé€šä¹‰åƒé—® API                      â”‚  â”‚ â”‚
â”‚  â”‚  - è…¾è®¯æ··å…ƒ API                          â”‚  â”‚ â”‚
â”‚  â”‚  - æœ¬åœ°LLM (Ollamaç­‰)                    â”‚  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚           æ•°æ®å­˜å‚¨å±‚ï¼ˆæ··åˆå­˜å‚¨ï¼‰                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SQLite (ç»“æ„åŒ–æ•°æ®)                          â”‚ â”‚
â”‚  â”‚  - events è¡¨                                 â”‚ â”‚
â”‚  â”‚  - todos è¡¨                                  â”‚ â”‚
â”‚  â”‚  - ai_cache è¡¨ (AIç»“æœç¼“å­˜)                 â”‚ â”‚
â”‚  â”‚  - interruptions è¡¨ (æ‰“æ–­è®°å½•)               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Markdownæ–‡ä»¶ (éç»“æ„åŒ–æ—¥å¿—)                   â”‚ â”‚
â”‚  â”‚  - memory/daily/ (æ¯æ—¥æ—¥å¿—)                  â”‚ â”‚
â”‚  â”‚  - memory/tasks/ (ä»»åŠ¡æ¡£æ¡ˆ)                  â”‚ â”‚
â”‚  â”‚  - memory/habits/ (å·¥ä½œæ¨¡å¼)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æœ¬åœ°å‘é‡æ•°æ®åº“ (å¯é€‰)                        â”‚ â”‚
â”‚  â”‚  - ChromaDB / LanceDB                        â”‚ â”‚
â”‚  â”‚  - ç”¨äºè¯­ä¹‰æœç´¢å’Œå†å²ä»»åŠ¡æ£€ç´¢                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ ¸å¿ƒæœåŠ¡è®¾è®¡

#### 4.2.1 AIService æœåŠ¡ç±»

```typescript
// electron/service/aiService.ts

export interface AIProvider {
  name: string;
  apiKey: string;
  baseUrl: string;
  model?: string;
}

export interface NaturalLanguageParseResult {
  title: string;
  date: string;
  time: string;
  type: string;
  reminder: number;
  description?: string;
  recurrence?: {
    frequency: 'daily' | 'weekly' | 'monthly' | 'yearly';
    interval: number;
    endDate?: string;
  };
  confidence: number; // 0-1ï¼Œè§£æç½®ä¿¡åº¦
}

export interface ConflictDetectionResult {
  hasConflict: boolean;
  conflicts: Array<{
    eventId: string;
    eventTitle: string;
    conflictType: 'time' | 'location' | 'person' | 'resource';
    suggestion?: string;
  }>;
}

export interface ScheduleOptimizationResult {
  suggestions: Array<{
    type: 'reschedule' | 'merge' | 'cancel' | 'split';
    eventId: string;
    reason: string;
    newTime?: string;
  }>;
  insights: {
    busyLevel: 'low' | 'medium' | 'high' | 'very-high';
    workLifeBalance: number; // 0-1
    recommendations: string[];
  };
}

export class AIService {
  private static instance: AIService;
  private provider: AIProvider | null = null;
  private cache: Map<string, any> = new Map();

  /**
   * è§£æè‡ªç„¶è¯­è¨€ä¸ºäº‹ä»¶
   */
  async parseNaturalLanguage(
    text: string,
    context?: { currentDate: string; userTimezone: string }
  ): Promise<ServiceResult<NaturalLanguageParseResult>> {
    // 1. æ£€æŸ¥ç¼“å­˜
    const cacheKey = `parse_${text}_${context?.currentDate}`;
    if (this.cache.has(cacheKey)) {
      return { success: true, data: this.cache.get(cacheKey) };
    }

    // 2. è°ƒç”¨AIæ¥å£
    try {
      const prompt = this.buildParsePrompt(text, context);
      const response = await this.callAI(prompt);
      const result = this.parseAIResponse(response);
      
      // 3. ç¼“å­˜ç»“æœ
      this.cache.set(cacheKey, result);
      
      return { success: true, data: result };
    } catch (error) {
      return { success: false, message: error.message };
    }
  }

  /**
   * æ™ºèƒ½åˆ†ç±»äº‹ä»¶
   */
  async classifyEvent(event: Event): Promise<ServiceResult<string>> {
    // AIåˆ†æäº‹ä»¶å†…å®¹ï¼Œè¿”å›åˆ†ç±»
  }

  /**
   * æ£€æµ‹äº‹ä»¶å†²çª
   */
  async detectConflicts(
    newEvent: Event,
    existingEvents: Event[]
  ): Promise<ServiceResult<ConflictDetectionResult>> {
    // AIåˆ†ææ—¶é—´ã€åœ°ç‚¹ã€äººå‘˜å†²çª
  }

  /**
   * ä¼˜åŒ–æ—¥ç¨‹å®‰æ’
   */
  async optimizeSchedule(
    events: Event[]
  ): Promise<ServiceResult<ScheduleOptimizationResult>> {
    // AIåˆ†æå¹¶æä¾›ä¼˜åŒ–å»ºè®®
  }

  /**
   * ç”Ÿæˆæ—¥ç¨‹æ‘˜è¦
   */
  async generateSummary(
    events: Event[],
    period: 'day' | 'week' | 'month'
  ): Promise<ServiceResult<string>> {
    // AIç”Ÿæˆè‡ªç„¶è¯­è¨€æ‘˜è¦
  }

  /**
   * æ„å»ºAIæç¤ºè¯
   */
  private buildParsePrompt(text: string, context?: any): string {
    return `ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½æ—¥å†åŠ©æ‰‹ã€‚è¯·å°†ä»¥ä¸‹è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºç»“æ„åŒ–çš„äº‹ä»¶ä¿¡æ¯ã€‚

å½“å‰æ—¥æœŸï¼š${context?.currentDate || new Date().toISOString().split('T')[0]}
ç”¨æˆ·æ—¶åŒºï¼š${context?.userTimezone || 'Asia/Shanghai'}

ç”¨æˆ·è¾“å…¥ï¼š"${text}"

è¯·è¿”å›JSONæ ¼å¼ï¼š
{
  "title": "äº‹ä»¶æ ‡é¢˜",
  "date": "YYYY-MM-DD",
  "time": "HH:mm",
  "type": "å·¥ä½œ|ä¼šè®®|ç”Ÿæ—¥|çºªå¿µæ—¥|å…¶ä»–",
  "reminder": 30,
  "description": "äº‹ä»¶æè¿°",
  "recurrence": null æˆ– {"frequency": "daily|weekly|monthly|yearly", "interval": 1, "endDate": "YYYY-MM-DD"},
  "confidence": 0.95
}

æ³¨æ„ï¼š
1. æ—¥æœŸè§£æè¦å‡†ç¡®ï¼Œå¦‚"æ˜å¤©"ã€"ä¸‹å‘¨ä¸‰"ã€"3æœˆ15æ—¥"
2. æ—¶é—´è¦æ˜ç¡®ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæ—¶é—´ï¼Œä½¿ç”¨é»˜è®¤å€¼"09:00"
3. æ ¹æ®äº‹ä»¶å†…å®¹æ¨æ–­ç±»å‹å’Œæé†’æ—¶é—´
4. è¯†åˆ«é‡å¤äº‹ä»¶æ¨¡å¼ï¼ˆæ¯å‘¨ã€æ¯æœˆç­‰ï¼‰`;
  }

  /**
   * è°ƒç”¨AIæ¥å£
   */
  private async callAI(prompt: string): Promise<string> {
    if (!this.provider) {
      throw new Error('AI provider not configured');
    }

    // æ ¹æ®providerç±»å‹è°ƒç”¨ä¸åŒçš„API
    switch (this.provider.name) {
      case 'openai':
        return await this.callOpenAI(prompt);
      case 'baidu':
        return await this.callBaiduWenxin(prompt);
      case 'ali':
        return await this.callAliTongyi(prompt);
      case 'tencent':
        return await this.callTencentHunyuan(prompt);
      default:
        throw new Error(`Unsupported AI provider: ${this.provider.name}`);
    }
  }

  /**
   * è°ƒç”¨OpenAI API
   */
  private async callOpenAI(prompt: string): Promise<string> {
    const response = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${this.provider.apiKey}`
      },
      body: JSON.stringify({
        model: this.provider.model || 'gpt-3.5-turbo',
        messages: [
          { role: 'system', content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ—¥å†åŠ©æ‰‹ï¼Œæ“…é•¿è§£æè‡ªç„¶è¯­è¨€å¹¶è½¬æ¢ä¸ºç»“æ„åŒ–äº‹ä»¶ä¿¡æ¯ã€‚' },
          { role: 'user', content: prompt }
        ],
        temperature: 0.3,
        response_format: { type: 'json_object' }
      })
    });

    const data = await response.json();
    return data.choices[0].message.content;
  }

  /**
   * è°ƒç”¨ç™¾åº¦æ–‡å¿ƒä¸€è¨€API
   */
  private async callBaiduWenxin(prompt: string): Promise<string> {
    // å®ç°ç™¾åº¦APIè°ƒç”¨
  }

  /**
   * è°ƒç”¨é˜¿é‡Œé€šä¹‰åƒé—®API
   */
  private async callAliTongyi(prompt: string): Promise<string> {
    // å®ç°é˜¿é‡ŒAPIè°ƒç”¨
  }

  /**
   * è°ƒç”¨è…¾è®¯æ··å…ƒAPI
   */
  private async callTencentHunyuan(prompt: string): Promise<string> {
    // å®ç°è…¾è®¯APIè°ƒç”¨
  }

  /**
   * è§£æAIå“åº”
   */
  private parseAIResponse(response: string): NaturalLanguageParseResult {
    try {
      const json = JSON.parse(response);
      // éªŒè¯å’Œè§„èŒƒåŒ–æ•°æ®
      return {
        title: json.title || '',
        date: json.date || '',
        time: json.time || '09:00',
        type: json.type || 'å…¶ä»–',
        reminder: json.reminder || 30,
        description: json.description,
        recurrence: json.recurrence,
        confidence: json.confidence || 0.8
      };
    } catch (error) {
      throw new Error('Failed to parse AI response');
    }
  }
}
```

### 4.3 æ•°æ®åº“æ‰©å±•

#### 4.3.1 æ–°å¢è¡¨ç»“æ„

```sql
-- AIé…ç½®è¡¨
CREATE TABLE IF NOT EXISTS ai_config (
  id TEXT PRIMARY KEY,
  provider TEXT NOT NULL,  -- 'openai' | 'baidu' | 'ali' | 'tencent'
  api_key TEXT NOT NULL,
  base_url TEXT,
  model TEXT,
  enabled INTEGER DEFAULT 1,
  create_time TEXT,
  update_time TEXT
);

-- AIç¼“å­˜è¡¨ï¼ˆæé«˜å“åº”é€Ÿåº¦ï¼‰
CREATE TABLE IF NOT EXISTS ai_cache (
  id TEXT PRIMARY KEY,
  cache_key TEXT UNIQUE NOT NULL,
  cache_value TEXT NOT NULL,
  expire_time TEXT,
  create_time TEXT
);

-- äº‹ä»¶æ‰©å±•è¡¨ï¼ˆå­˜å‚¨AIåˆ†æç»“æœï¼‰
CREATE TABLE IF NOT EXISTS event_ai_metadata (
  event_id TEXT PRIMARY KEY,
  ai_classification TEXT,
  ai_tags TEXT,  -- JSONæ•°ç»„ï¼ˆAIç”Ÿæˆçš„æ ‡ç­¾ï¼‰
  ai_priority INTEGER,  -- 1-5ï¼ˆAIè¯„ä¼°çš„ä¼˜å…ˆçº§ï¼‰
  ai_energy_level TEXT,  -- "é«˜"|"ä¸­"|"ä½"ï¼ˆAIè¯„ä¼°çš„ç²¾åŠ›æ¶ˆè€—ï¼‰
  ai_insights TEXT,  -- JSONå¯¹è±¡ï¼ˆAIæ´å¯Ÿï¼‰
  create_time TEXT,
  update_time TEXT,
  FOREIGN KEY (event_id) REFERENCES events(id)
);

-- æ ‡ç­¾è¡¨ï¼ˆç”¨äºæ ‡ç­¾ç®¡ç†å’Œç»Ÿè®¡ï¼‰
CREATE TABLE IF NOT EXISTS tags (
  id TEXT PRIMARY KEY,
  name TEXT UNIQUE NOT NULL,  -- æ ‡ç­¾åç§°
  category TEXT,  -- æ ‡ç­¾åˆ†ç±»ï¼ˆå·¥ä½œã€ç”Ÿæ´»ã€é‡è¦ç­‰ï¼‰
  usage_count INTEGER DEFAULT 1,  -- ä½¿ç”¨æ¬¡æ•°ï¼ˆç”¨äºæ¨èæ’åºï¼‰
  created_at TEXT,
  updated_at TEXT
);

-- äº‹ä»¶æ ‡ç­¾å…³è”è¡¨ï¼ˆå¤šå¯¹å¤šå…³ç³»ï¼‰
CREATE TABLE IF NOT EXISTS event_tags (
  event_id TEXT NOT NULL,
  tag_id TEXT NOT NULL,
  PRIMARY KEY (event_id, tag_id),
  FOREIGN KEY (event_id) REFERENCES events(id) ON DELETE CASCADE,
  FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE
);
```

**æ ‡ç­¾ç³»ç»Ÿè¯´æ˜**ï¼š
- **è‡ªåŠ¨ç”Ÿæˆ**ï¼šAIåˆ†æä»»åŠ¡æè¿°æ—¶ï¼Œè‡ªåŠ¨æå–å…³é”®è¯å¹¶ç”Ÿæˆæ ‡ç­¾
- **è‡ªåŠ¨ä¿å­˜**ï¼šæ ‡ç­¾ä¼šä¿å­˜åˆ° `tags` è¡¨å’Œ `event_tags` å…³è”è¡¨
- **è‡ªåŠ¨åº”ç”¨**ï¼šåˆ›å»ºæ–°ä»»åŠ¡æ—¶ï¼Œç³»ç»Ÿä¼šæ ¹æ®å†å²æ ‡ç­¾ä½¿ç”¨æƒ…å†µè‡ªåŠ¨æ¨è
- **æ ‡ç­¾å­¦ä¹ **ï¼šç³»ç»Ÿä¼šç»Ÿè®¡æ ‡ç­¾ä½¿ç”¨é¢‘ç‡ï¼Œä¼˜å…ˆæ¨èå¸¸ç”¨æ ‡ç­¾

## äº”ã€å‰ç«¯ç•Œé¢è®¾è®¡

### 5.1 è‡ªç„¶è¯­è¨€è¾“å…¥ç»„ä»¶

```vue
<!-- src/view/home/components/AIEventInput.vue -->
<template>
  <div class="ai-event-input">
    <el-input
      v-model="inputText"
      type="textarea"
      :rows="3"
      placeholder="ç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ çš„æ—¥ç¨‹ï¼Œä¾‹å¦‚ï¼šæ˜å¤©ä¸‹åˆ3ç‚¹å¼€ä¼šè®¨è®ºé¡¹ç›®è¿›åº¦"
      @keyup.enter.ctrl="handleSubmit"
    />
    <div class="input-actions">
      <el-button type="primary" @click="handleSubmit" :loading="parsing">
        <el-icon><MagicStick /></el-icon>
        AIè§£æ
      </el-button>
      <el-button @click="handleClear">æ¸…ç©º</el-button>
    </div>
    
    <!-- AIè§£æç»“æœé¢„è§ˆ -->
    <div v-if="parseResult" class="parse-result">
      <el-card>
        <template #header>
          <div class="result-header">
            <span>{{ parseResult.source === 'online' ? 'AIè§£æç»“æœ' : 'è§£æç»“æœï¼ˆç¦»çº¿æ¨¡å¼ï¼‰' }}</span>
            <div class="header-tags">
              <el-tag :type="parseResult.confidence > 0.8 ? 'success' : 'warning'" size="small">
                ç½®ä¿¡åº¦: {{ (parseResult.confidence * 100).toFixed(0) }}%
              </el-tag>
              <el-tag 
                v-if="parseResult.source === 'offline' || parseResult.source === 'offline-fallback'"
                type="warning" 
                size="small"
              >
                ç¦»çº¿è§£æ
              </el-tag>
            </div>
          </div>
        </template>
        <div class="result-content">
          <p><strong>æ ‡é¢˜ï¼š</strong>{{ parseResult.title }}</p>
          <p><strong>æ—¥æœŸï¼š</strong>{{ parseResult.date }}</p>
          <p><strong>æ—¶é—´ï¼š</strong>{{ parseResult.time }}</p>
          <p><strong>ç±»å‹ï¼š</strong>{{ parseResult.type }}</p>
          <p><strong>æé†’ï¼š</strong>æå‰{{ parseResult.reminder }}åˆ†é’Ÿ</p>
        </div>
        <template #footer>
          <el-button @click="handleEdit">ç¼–è¾‘</el-button>
          <el-button type="primary" @click="handleConfirm">ç¡®è®¤åˆ›å»º</el-button>
        </template>
      </el-card>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { ElMessage } from 'element-plus'
import { Connection, Close } from '@element-plus/icons-vue'

const inputText = ref('')
const parsing = ref(false)
const parseResult = ref<any>(null)
const networkStatus = ref<'online' | 'offline' | 'checking'>('checking')

// æ£€æŸ¥ç½‘ç»œçŠ¶æ€
const checkNetworkStatus = async () => {
  networkStatus.value = 'checking'
  try {
    const result = await window.electronAPI.aiService.checkNetworkStatus()
    networkStatus.value = result ? 'online' : 'offline'
  } catch (error) {
    networkStatus.value = 'offline'
  }
}

const handleSubmit = async () => {
  if (!inputText.value.trim()) {
    ElMessage.warning('è¯·è¾“å…¥äº‹ä»¶æè¿°')
    return
  }

  parsing.value = true
  try {
    const result = await window.electronAPI.aiService.parseNaturalLanguage(inputText.value)
    if (result.success) {
      parseResult.value = result.data
      
      // æ ¹æ®è§£ææ¥æºæ˜¾ç¤ºä¸åŒæç¤º
      if (result.data.source === 'offline' || result.data.source === 'offline-fallback') {
        ElMessage.warning({
          message: 'ç¦»çº¿æ¨¡å¼ï¼šè§£æç»“æœåŸºäºæœ¬åœ°è§„åˆ™ï¼Œå¯èƒ½ä¸å¤Ÿå‡†ç¡®ï¼Œå»ºè®®è”ç½‘åä½¿ç”¨AIè§£æ',
          duration: 5000
        })
      } else {
        ElMessage.success('è§£ææˆåŠŸ')
      }
    } else {
      ElMessage.error(result.message || 'è§£æå¤±è´¥')
    }
  } catch (error) {
    ElMessage.error('è§£ææœåŠ¡è°ƒç”¨å¤±è´¥')
  } finally {
    parsing.value = false
  }
}

const toggleMode = () => {
  checkNetworkStatus()
}

onMounted(() => {
  checkNetworkStatus()
  // å®šæœŸæ£€æŸ¥ç½‘ç»œçŠ¶æ€
  setInterval(checkNetworkStatus, 30000)  // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡
})

const handleConfirm = () => {
  // åˆ›å»ºäº‹ä»¶
  emit('create-event', parseResult.value)
  handleClear()
}

const handleClear = () => {
  inputText.value = ''
  parseResult.value = null
}
</script>
```

### 5.2 AIæ™ºèƒ½å»ºè®®é¢æ¿

```vue
<!-- src/view/home/components/AISuggestions.vue -->
<template>
  <el-card class="ai-suggestions">
    <template #header>
      <div class="card-header">
        <span>AIæ™ºèƒ½å»ºè®®</span>
        <el-button size="small" @click="refreshSuggestions">åˆ·æ–°</el-button>
      </div>
    </template>
    
    <!-- å†²çªæ£€æµ‹ -->
    <div v-if="conflicts.hasConflict" class="conflict-section">
      <el-alert type="warning" :closable="false">
        <template #title>æ£€æµ‹åˆ°æ—¥ç¨‹å†²çª</template>
        <ul>
          <li v-for="conflict in conflicts.conflicts" :key="conflict.eventId">
            {{ conflict.eventTitle }} - {{ conflict.conflictType }}
            <el-button size="small" text @click="handleResolveConflict(conflict)">
              è§£å†³
            </el-button>
          </li>
        </ul>
      </el-alert>
    </div>

    <!-- æ—¥ç¨‹ä¼˜åŒ–å»ºè®® -->
    <div v-if="optimization.suggestions.length > 0" class="optimization-section">
      <h4>ä¼˜åŒ–å»ºè®®</h4>
      <div v-for="suggestion in optimization.suggestions" :key="suggestion.eventId">
        <p>{{ suggestion.reason }}</p>
        <el-button size="small" @click="handleApplySuggestion(suggestion)">
          åº”ç”¨å»ºè®®
        </el-button>
      </div>
    </div>

    <!-- æ—¥ç¨‹æ´å¯Ÿ -->
    <div class="insights-section">
      <h4>æ—¥ç¨‹æ´å¯Ÿ</h4>
      <div class="insight-item">
        <span>å¿™ç¢Œç¨‹åº¦ï¼š</span>
        <el-tag :type="getBusyLevelType(optimization.insights.busyLevel)">
          {{ optimization.insights.busyLevel }}
        </el-tag>
      </div>
      <div class="insight-item">
        <span>å·¥ä½œç”Ÿæ´»å¹³è¡¡ï¼š</span>
        <el-progress :percentage="optimization.insights.workLifeBalance * 100" />
      </div>
      <ul>
        <li v-for="rec in optimization.insights.recommendations" :key="rec">
          {{ rec }}
        </li>
      </ul>
    </div>
  </el-card>
</template>
```

## å…­ã€APIæ¥å£è®¾è®¡

### 6.1 IPCæ¥å£æ‰©å±•

```typescript
// electron/preload.ts æ‰©å±•

aiService: {
  /**
   * è§£æè‡ªç„¶è¯­è¨€
   */
  parseNaturalLanguage: (text: string, context?: any) => Promise<ServiceResult<NaturalLanguageParseResult>>;
  
  /**
   * æ™ºèƒ½åˆ†ç±»äº‹ä»¶
   */
  classifyEvent: (event: Event) => Promise<ServiceResult<string>>;
  
  /**
   * æ£€æµ‹å†²çª
   */
  detectConflicts: (newEvent: Event, existingEvents: Event[]) => Promise<ServiceResult<ConflictDetectionResult>>;
  
  /**
   * ä¼˜åŒ–æ—¥ç¨‹
   */
  optimizeSchedule: (events: Event[]) => Promise<ServiceResult<ScheduleOptimizationResult>>;
  
  /**
   * ç”Ÿæˆæ‘˜è¦
   */
  generateSummary: (events: Event[], period: 'day' | 'week' | 'month') => Promise<ServiceResult<string>>;
  
  /**
   * é…ç½®AIæœåŠ¡
   */
  configureAI: (config: AIProvider) => Promise<ServiceResult<void>>;
}
```

### 6.2 HTTP APIè®¾è®¡ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½¿ç”¨å¤–éƒ¨AIæœåŠ¡ï¼Œå¯ä»¥è®¾è®¡RESTful APIï¼š

```
POST /api/ai/parse
Body: { text: string, context?: object }
Response: NaturalLanguageParseResult

POST /api/ai/classify
Body: { event: Event }
Response: { type: string, tags: string[] }

POST /api/ai/detect-conflicts
Body: { newEvent: Event, existingEvents: Event[] }
Response: ConflictDetectionResult

POST /api/ai/optimize
Body: { events: Event[] }
Response: ScheduleOptimizationResult

GET /api/ai/summary?period=day|week|month
Response: { summary: string }
```

## ä¹ã€ç•Œé¢è®¾è®¡ï¼ˆå››ä¸ªæ ¸å¿ƒè§†å›¾ï¼‰

### 9.1 ä»Šæ—¥çœ‹æ¿è§†å›¾ï¼ˆç±»ä¼¼Notionï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… ä»Šæ—¥æ¦‚è§ˆ (5/8 ä»»åŠ¡å®Œæˆ)                     â”‚
â”‚  ğŸ”¥ å½“å‰ç„¦ç‚¹ä»»åŠ¡ï¼šå†™é¡¹ç›®æ–‡æ¡£                     â”‚
â”‚  â° ä¸‹ä¸€ä¸ªä¼šè®®ï¼š15:00                            â”‚
â”‚  ğŸ’¡ AIå»ºè®®ï¼šæŠŠæ–‡æ¡£ä»»åŠ¡æ‹†åˆ†æˆå°å—                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  [å¾…åŠ]  [è¿›è¡Œä¸­]  [å·²å®Œæˆ]                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ä»»åŠ¡1â”‚ â”‚ä»»åŠ¡2â”‚ â”‚ä»»åŠ¡3â”‚                      â”‚
â”‚  â”‚ä»»åŠ¡4â”‚ â”‚ä»»åŠ¡5â”‚ â”‚ä»»åŠ¡6â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 æ—¥å†è§†å›¾ï¼ˆæ—¶é—´å—æ’æœŸï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘¨ä¸€          å‘¨äºŒ          å‘¨ä¸‰               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚09:00    â”‚  â”‚09:00    â”‚  â”‚09:00    â”‚        â”‚
â”‚  â”‚ä¼šè®®     â”‚  â”‚ç¼–ç      â”‚  â”‚æ–‡æ¡£     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚14:00    â”‚  â”‚14:00    â”‚  â”‚14:00    â”‚        â”‚
â”‚  â”‚ç¼–ç      â”‚  â”‚ä¼šè®®     â”‚  â”‚ç¼–ç      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 å·¥ä½œæ—¥å¿—è§†å›¾ï¼ˆMarkdownç¼–è¾‘å™¨ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  # 2026-01-29 å·¥ä½œæ—¥å¿—                          â”‚
â”‚                                                 â”‚
â”‚  ## ğŸ“Š ä»Šæ—¥æ¦‚è§ˆ                                 â”‚
â”‚  - å®Œæˆä»»åŠ¡: 5/8                                 â”‚
â”‚  - æ€»å·¥ä½œæ—¶é•¿: 6.5å°æ—¶                          â”‚
â”‚                                                 â”‚
â”‚  ## âœ… å®Œæˆä»»åŠ¡                                  â”‚
â”‚  ### 1. å›¢é˜Ÿä¼šè®® - Q2è§„åˆ’                      â”‚
â”‚  - å®é™…è€—æ—¶: 1å°æ—¶                              â”‚
â”‚  - å…³é”®æˆæœ: ç¡®å®šäº†Q2é‡ç‚¹æ–¹å‘                  â”‚
â”‚                                                 â”‚
â”‚  [Markdownç¼–è¾‘å™¨ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆ]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.4 æ•°æ®åˆ†æè§†å›¾ï¼ˆæ•ˆç‡ç»Ÿè®¡ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š æ•ˆç‡åˆ†æ                                    â”‚
â”‚                                                 â”‚
â”‚  æœ¬å‘¨å·¥ä½œæ•ˆç‡: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 82%                  â”‚
â”‚                                                 â”‚
â”‚  æœ€ä½³å·¥ä½œæ—¶é—´:                                  â”‚
â”‚  14:00-16:00 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 88åˆ†                â”‚
â”‚  10:00-12:00 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85åˆ†                â”‚
â”‚                                                 â”‚
â”‚  ä»»åŠ¡ç±»å‹å®Œæˆç‡:                                â”‚
â”‚  ä¼šè®® â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 95%                    â”‚
â”‚  ç¼–ç  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 80%                    â”‚
â”‚  æ–‡æ¡£ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 65%                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.5 æ™ºèƒ½ä¾§è¾¹æ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… ä»Šæ—¥æ¦‚è§ˆ      â”‚
â”‚ 5/8 ä»»åŠ¡å®Œæˆ     â”‚
â”‚                 â”‚
â”‚ ğŸ”¥ å½“å‰ç„¦ç‚¹      â”‚
â”‚ å†™é¡¹ç›®æ–‡æ¡£       â”‚
â”‚                 â”‚
â”‚ â° ä¸‹ä¸€ä¸ªä¼šè®®    â”‚
â”‚ 15:00           â”‚
â”‚                 â”‚
â”‚ ğŸ’¡ AIå»ºè®®        â”‚
â”‚ æŠŠæ–‡æ¡£ä»»åŠ¡æ‹†åˆ†   â”‚
â”‚ æˆå°å—          â”‚
â”‚                 â”‚
â”‚ ğŸ“ å¿«é€Ÿæ·»åŠ       â”‚
â”‚ [è¾“å…¥æ¡†]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åã€å®æ–½æ­¥éª¤ï¼ˆè¯¦ç»†è·¯çº¿å›¾ï¼‰

### 10.1 Phase 1: MVPï¼ˆ1-2å‘¨ï¼‰

**ç›®æ ‡**ï¼šåŸºç¡€åŠŸèƒ½å¯ç”¨

**ä»»åŠ¡æ¸…å•**ï¼š
- âœ… åŸºç¡€Electronåº”ç”¨ï¼ˆå·²å®Œæˆï¼‰
- âœ… ä»»åŠ¡å¢åˆ æ”¹æŸ¥ï¼ˆå·²å®Œæˆï¼‰
- âœ… åŸºç¡€æé†’åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰
- âœ… æœ¬åœ°SQLiteå­˜å‚¨ï¼ˆå·²å®Œæˆï¼‰
- â¬œ ç³»ç»Ÿæ‰˜ç›˜å’Œé€šçŸ¥
- â¬œ å…¨å±€å¿«æ·é”®
- â¬œ è‡ªåŠ¨å¯åŠ¨é…ç½®

**äº¤ä»˜ç‰©**ï¼š
- å¯ç”¨çš„åŸºç¡€æ—¥å†åº”ç”¨
- åŸºæœ¬çš„äº‹ä»¶ç®¡ç†åŠŸèƒ½

### 10.2 Phase 2: AIé›†æˆï¼ˆ1å‘¨ï¼‰

**ç›®æ ‡**ï¼šè‡ªç„¶è¯­è¨€è¾“å…¥å’ŒAIè§£æ

**ä»»åŠ¡æ¸…å•**ï¼š
- â¬œ åˆ›å»ºAIServiceæœåŠ¡ç±»
- â¬œ å®ç°è‡ªç„¶è¯­è¨€è§£æä»»åŠ¡
- â¬œ è‡ªåŠ¨åˆ†ç±»å’Œæ ‡ç­¾
- â¬œ AIé…ç½®ç•Œé¢
- â¬œ æ”¯æŒOpenAI API
- â¬œ ç»“æœç¼“å­˜æœºåˆ¶

**äº¤ä»˜ç‰©**ï¼š
- AIè‡ªç„¶è¯­è¨€è§£æåŠŸèƒ½
- ä»»åŠ¡è‡ªåŠ¨åˆ†ç±»

### 10.3 Phase 3: è®°å¿†ç³»ç»Ÿï¼ˆ2å‘¨ï¼‰- Clawdbotæ ¸å¿ƒ

**ç›®æ ‡**ï¼šMarkdownæ—¥å¿—ç³»ç»Ÿ + ç´¢å¼•ç³»ç»Ÿ

**ä»»åŠ¡æ¸…å•**ï¼š
- â¬œ å®ç°Markdownæ–‡ä»¶å­˜å‚¨ï¼ˆMEMORY.md + memory/daily/ï¼‰
- â¬œ åˆ›å»ºMemoryServiceæœåŠ¡ç±»
- â¬œ å®ç°æ–‡ä»¶ç›‘å¬ï¼ˆChokidarï¼‰
- â¬œ å®ç°æ–‡æœ¬åˆ†å—ï¼ˆ400 tokensï¼Œ80 overlapï¼‰
- â¬œ é›†æˆFTS5å…¨æ–‡æœç´¢
- â¬œ é›†æˆsqlite-vecå‘é‡æœç´¢ï¼ˆå¯é€‰ï¼‰
- â¬œ å®ç°æ··åˆæœç´¢ï¼ˆå‘é‡ + å…³é”®è¯ï¼‰
- â¬œ æ¯æ—¥å·¥ä½œæ—¥å¿—è‡ªåŠ¨ç”Ÿæˆ
- â¬œ ä»»åŠ¡æ¡£æ¡ˆç®¡ç†
- â¬œ å·¥ä½œæ¨¡å¼è¯†åˆ«
- â¬œ ä¼šè¯å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½è®°å¿†
- â¬œ å®ç°å‹ç¼©ç­–ç•¥ï¼ˆCompactionï¼‰
- â¬œ Markdownç¼–è¾‘å™¨é›†æˆ

**äº¤ä»˜ç‰©**ï¼š
- å®Œæ•´çš„åˆ†å±‚è®°å¿†ç³»ç»Ÿï¼ˆä¸¤å±‚è®¾è®¡ï¼‰
- å·¥ä½œæ—¥å¿—è‡ªåŠ¨ç”Ÿæˆ
- æ··åˆæœç´¢åŠŸèƒ½ï¼ˆè¯­ä¹‰ + å…³é”®è¯ï¼‰
- è®°å¿†ç´¢å¼•ç³»ç»Ÿï¼ˆå•æ–‡ä»¶SQLiteï¼‰

### 10.4 Phase 4: æ™ºèƒ½åŠŸèƒ½ï¼ˆ2å‘¨ï¼‰

**ç›®æ ‡**ï¼šä¸Šä¸‹æ–‡æ„ŸçŸ¥å’Œæ™ºèƒ½å»ºè®®

**ä»»åŠ¡æ¸…å•**ï¼š
- â¬œ æ—¥ç¨‹è‡ªåŠ¨æ’æœŸ
- â¬œ ä¸Šä¸‹æ–‡æ„ŸçŸ¥æé†’
- â¬œ æ‰“æ–­æ¢å¤æé†’
- â¬œ å†²çªæ£€æµ‹å’Œè§£å†³
- â¬œ å·¥ä½œæ¨¡å¼å­¦ä¹ 
- â¬œ æ•°æ®åˆ†æé¢æ¿

**äº¤ä»˜ç‰©**ï¼š
- æ™ºèƒ½æ—¥ç¨‹ä¼˜åŒ–
- ä¸Šä¸‹æ–‡æ„ŸçŸ¥æé†’ç³»ç»Ÿ

### 10.5 Phase 5: é«˜çº§åŠŸèƒ½ï¼ˆ2å‘¨ï¼‰

**ç›®æ ‡**ï¼šå¤šAIæä¾›å•†å’Œæ‰©å±•åŠŸèƒ½

**ä»»åŠ¡æ¸…å•**ï¼š
- â¬œ æ”¯æŒå¤šä¸ªAIæœåŠ¡ï¼ˆDeepSeekã€ç™¾åº¦ã€é˜¿é‡Œã€è…¾è®¯ï¼‰
- â¬œ æœ¬åœ°LLMæ”¯æŒï¼ˆOllamaï¼‰
- â¬œ å‘é‡æ•°æ®åº“é›†æˆï¼ˆå¯é€‰ï¼‰
- â¬œ è¯­ä¹‰æœç´¢åŠŸèƒ½
- â¬œ æ’ä»¶ç³»ç»Ÿæ¶æ„
- â¬œ æ•°æ®å¯¼å‡º/å¯¼å…¥

**äº¤ä»˜ç‰©**ï¼š
- å¤šAIæä¾›å•†æ”¯æŒ
- é«˜çº§æœç´¢åŠŸèƒ½

1. **åˆ›å»ºAIServiceæœåŠ¡**
   - å®ç°åŸºç¡€AIæ¥å£è°ƒç”¨
   - æ”¯æŒOpenAI API
   - å®ç°è‡ªç„¶è¯­è¨€è§£æ

2. **æ‰©å±•æ•°æ®åº“**
   - åˆ›å»ºai_configè¡¨
   - åˆ›å»ºai_cacheè¡¨
   - åˆ›å»ºevent_ai_metadataè¡¨

3. **å‰ç«¯ç•Œé¢**
   - æ·»åŠ AIè¾“å…¥ç»„ä»¶
   - é›†æˆåˆ°äº‹ä»¶åˆ›å»ºæµç¨‹

### 7.2 ç¬¬äºŒé˜¶æ®µï¼šæ™ºèƒ½åŠŸèƒ½ï¼ˆ2å‘¨ï¼‰

1. **å†²çªæ£€æµ‹**
   - å®ç°æ—¶é—´å†²çªæ£€æµ‹
   - å®ç°åœ°ç‚¹/äººå‘˜å†²çªæ£€æµ‹
   - UIæ˜¾ç¤ºå†²çªå’Œå»ºè®®

2. **æ™ºèƒ½åˆ†ç±»**
   - AIè‡ªåŠ¨åˆ†ç±»äº‹ä»¶
   - è‡ªåŠ¨æ ‡ç­¾ç”Ÿæˆ
   - ä¼˜å…ˆçº§è¯„ä¼°

### 7.3 ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆ2å‘¨ï¼‰

1. **æ—¥ç¨‹ä¼˜åŒ–**
   - å®ç°ä¼˜åŒ–ç®—æ³•
   - ç”Ÿæˆä¼˜åŒ–å»ºè®®
   - åº”ç”¨ä¼˜åŒ–æ–¹æ¡ˆ

2. **æ™ºèƒ½æ‘˜è¦**
   - ç”Ÿæˆæ—¥ç¨‹æ‘˜è¦
   - ä¸ªæ€§åŒ–æ´å¯Ÿ
   - ç»Ÿè®¡å’Œåˆ†æ

### 7.4 ç¬¬å››é˜¶æ®µï¼šå¤šAIæä¾›å•†æ”¯æŒï¼ˆ1å‘¨ï¼‰

1. **æ”¯æŒå¤šä¸ªAIæœåŠ¡**
   - ç™¾åº¦æ–‡å¿ƒä¸€è¨€
   - é˜¿é‡Œé€šä¹‰åƒé—®
   - è…¾è®¯æ··å…ƒ
   - æœ¬åœ°LLMï¼ˆå¯é€‰ï¼‰

2. **é…ç½®ç®¡ç†**
   - AIæœåŠ¡é…ç½®ç•Œé¢
   - APIå¯†é’¥ç®¡ç†
   - æœåŠ¡åˆ‡æ¢

## å…«ã€é…ç½®ç¤ºä¾‹

### 8.1 AIæœåŠ¡é…ç½®

```typescript
// é…ç½®æ–‡ä»¶ï¼šelectron/config/ai.config.ts

export const AI_PROVIDERS = {
  openai: {
    name: 'openai',
    baseUrl: 'https://api.openai.com/v1',
    models: ['gpt-3.5-turbo', 'gpt-4', 'gpt-4-turbo']
  },
  baidu: {
    name: 'baidu',
    baseUrl: 'https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop',
    models: ['ernie-bot', 'ernie-bot-turbo', 'ernie-bot-4']
  },
  ali: {
    name: 'ali',
    baseUrl: 'https://dashscope.aliyuncs.com/api/v1',
    models: ['qwen-turbo', 'qwen-plus', 'qwen-max']
  },
  tencent: {
    name: 'tencent',
    baseUrl: 'https://hunyuan.tencentcloudapi.com',
    models: ['hunyuan-lite', 'hunyuan-standard']
  }
}
```

### 8.2 ä½¿ç”¨ç¤ºä¾‹

```typescript
// å‰ç«¯ä½¿ç”¨ç¤ºä¾‹
const handleAICreate = async () => {
  const text = "æ˜å¤©ä¸‹åˆ3ç‚¹å¼€ä¼šè®¨è®ºé¡¹ç›®è¿›åº¦"
  
  // 1. AIè§£æ
  const parseResult = await electronAPI.aiService.parseNaturalLanguage(text)
  if (!parseResult.success) {
    ElMessage.error('è§£æå¤±è´¥')
    return
  }

  // 2. æ£€æµ‹å†²çª
  const conflicts = await electronAPI.aiService.detectConflicts(
    parseResult.data,
    existingEvents
  )
  
  if (conflicts.data.hasConflict) {
    // æ˜¾ç¤ºå†²çªæç¤º
    showConflictDialog(conflicts.data)
    return
  }

  // 3. åˆ›å»ºäº‹ä»¶
  await electronAPI.eventService.saveEvent(parseResult.data)
  ElMessage.success('äº‹ä»¶åˆ›å»ºæˆåŠŸ')
}
```

## ä¹ã€æ³¨æ„äº‹é¡¹

### 12.1 éšç§å’Œå®‰å…¨
- APIå¯†é’¥åŠ å¯†å­˜å‚¨
- ç”¨æˆ·æ•°æ®ä¸ä¸Šä¼ åˆ°ç¬¬ä¸‰æ–¹ï¼ˆé™¤éç”¨æˆ·åŒæ„ï¼‰
- æ”¯æŒæœ¬åœ°LLMé€‰é¡¹

### 12.2 æ€§èƒ½ä¼˜åŒ–
- å®ç°ç»“æœç¼“å­˜
- æ‰¹é‡å¤„ç†è¯·æ±‚
- å¼‚æ­¥å¤„ç†AIè°ƒç”¨

### 12.3 é”™è¯¯å¤„ç†å’Œç¦»çº¿æ”¯æŒ

#### 12.3.1 ç¦»çº¿æ¨¡å¼ï¼ˆæ— ç½‘ç»œæƒ…å†µï¼‰

**é—®é¢˜**ï¼šç”¨æˆ·åœ¨æ²¡æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹å¦‚ä½•æ·»åŠ ä»»åŠ¡ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼šå®ç°**æœ¬åœ°è§„åˆ™å¼•æ“**ä½œä¸ºAIçš„é™çº§æ–¹æ¡ˆ

**ç¦»çº¿è§£æè§„åˆ™**ï¼š

```typescript
// electron/service/offlineParser.ts

/**
 * ç¦»çº¿æ¨¡å¼ï¼šåŸºäºè§„åˆ™çš„è‡ªç„¶è¯­è¨€è§£æ
 * ä¸ä¾èµ–AIï¼Œä½¿ç”¨æœ¬åœ°è§„åˆ™å¼•æ“
 */
export class OfflineParser {
  /**
   * è§£æè‡ªç„¶è¯­è¨€ï¼ˆç¦»çº¿æ¨¡å¼ï¼‰
   */
  parseNaturalLanguage(text: string): ParseResult {
    const result: ParseResult = {
      title: '',
      date: '',
      time: '09:00',
      type: 'å…¶ä»–',
      reminder: 15,
      description: '',
      confidence: 0.6  // ç¦»çº¿æ¨¡å¼ç½®ä¿¡åº¦è¾ƒä½
    };

    // 1. æå–æ—¥æœŸï¼ˆä½¿ç”¨æ­£åˆ™å’Œè§„åˆ™ï¼‰
    result.date = this.extractDate(text);
    
    // 2. æå–æ—¶é—´
    result.time = this.extractTime(text);
    
    // 3. æå–æ ‡é¢˜ï¼ˆç§»é™¤æ—¥æœŸæ—¶é—´å…³é”®è¯ï¼‰
    result.title = this.extractTitle(text);
    
    // 4. è¯†åˆ«ç±»å‹ï¼ˆå…³é”®è¯åŒ¹é…ï¼‰
    result.type = this.identifyType(text);
    
    // 5. æå–æè¿°
    result.description = this.extractDescription(text);
    
    // 6. å»ºè®®æé†’æ—¶é—´ï¼ˆåŸºäºç±»å‹ï¼‰
    result.reminder = this.suggestReminder(result.type);
    
    return result;
  }

  /**
   * æå–æ—¥æœŸ
   */
  private extractDate(text: string): string {
    const today = new Date();
    const patterns = [
      { regex: /æ˜å¤©|æ˜æ—¥/, offset: 1 },
      { regex: /åå¤©/, offset: 2 },
      { regex: /å¤§åå¤©/, offset: 3 },
      { regex: /ä»Šå¤©|ä»Šæ—¥/, offset: 0 },
      { regex: /(\d+)æœˆ(\d+)æ—¥/, handler: (match: RegExpMatchArray) => {
        const month = parseInt(match[1]);
        const day = parseInt(match[2]);
        const year = today.getFullYear();
        return `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
      }},
      { regex: /ä¸‹å‘¨ä¸€|ä¸‹å‘¨äºŒ|ä¸‹å‘¨ä¸‰|ä¸‹å‘¨å››|ä¸‹å‘¨äº”|ä¸‹å‘¨å…­|ä¸‹å‘¨æ—¥/, handler: (match: RegExpMatchArray) => {
        // è®¡ç®—ä¸‹å‘¨çš„æ—¥æœŸ
        const dayNames = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];
        const targetDay = dayNames.indexOf(match[0].substring(1));
        // ... è®¡ç®—é€»è¾‘
      }}
    ];
    
    // åŒ¹é…æ¨¡å¼å¹¶è¿”å›æ—¥æœŸ
    for (const pattern of patterns) {
      const match = text.match(pattern.regex);
      if (match) {
        if (pattern.handler) {
          return pattern.handler(match);
        } else {
          const date = new Date(today);
          date.setDate(date.getDate() + pattern.offset);
          return date.toISOString().split('T')[0];
        }
      }
    }
    
    // é»˜è®¤è¿”å›ä»Šå¤©
    return today.toISOString().split('T')[0];
  }

  /**
   * æå–æ—¶é—´
   */
  private extractTime(text: string): string {
    const patterns = [
      { regex: /(\d{1,2})ç‚¹(\d{1,2})åˆ†?/, handler: (match: RegExpMatchArray) => {
        const hour = String(parseInt(match[1])).padStart(2, '0');
        const minute = match[2] ? String(parseInt(match[2])).padStart(2, '0') : '00';
        return `${hour}:${minute}`;
      }},
      { regex: /(\d{1,2}):(\d{1,2})/, handler: (match: RegExpMatchArray) => {
        return `${match[1].padStart(2, '0')}:${match[2].padStart(2, '0')}`;
      }},
      { regex: /ä¸Šåˆ|æ—©ä¸Š|æ—©æ™¨/, default: '09:00' },
      { regex: /ä¸‹åˆ/, default: '14:00' },
      { regex: /æ™šä¸Š|å‚æ™š/, default: '19:00' }
    ];
    
    for (const pattern of patterns) {
      const match = text.match(pattern.regex);
      if (match) {
        if (pattern.handler) {
          return pattern.handler(match);
        } else if (pattern.default) {
          return pattern.default;
        }
      }
    }
    
    return '09:00';  // é»˜è®¤æ—¶é—´
  }

  /**
   * è¯†åˆ«äº‹ä»¶ç±»å‹
   */
  private identifyType(text: string): string {
    const typeKeywords = {
      'ä¼šè®®': ['ä¼šè®®', 'å¼€ä¼š', 'è®¨è®º', 'ä¼šé¢'],
      'å·¥ä½œ': ['å·¥ä½œ', 'ä»»åŠ¡', 'é¡¹ç›®', 'å¼€å‘', 'ç¼–ç '],
      'ç”Ÿæ—¥': ['ç”Ÿæ—¥', 'è¯è¾°'],
      'çºªå¿µæ—¥': ['çºªå¿µæ—¥', 'çºªå¿µ', 'å‘¨å¹´'],
      'å…¶ä»–': []
    };
    
    for (const [type, keywords] of Object.entries(typeKeywords)) {
      if (keywords.some(keyword => text.includes(keyword))) {
        return type;
      }
    }
    
    return 'å…¶ä»–';
  }

  /**
   * æå–æ ‡é¢˜
   */
  private extractTitle(text: string): string {
    // ç§»é™¤æ—¥æœŸæ—¶é—´å…³é”®è¯ï¼Œä¿ç•™ä¸»è¦å†…å®¹
    let title = text
      .replace(/æ˜å¤©|åå¤©|å¤§åå¤©|ä»Šå¤©|ä»Šæ—¥/g, '')
      .replace(/\d+æœˆ\d+æ—¥/g, '')
      .replace(/\d{1,2}ç‚¹\d{1,2}åˆ†?/g, '')
      .replace(/\d{1,2}:\d{1,2}/g, '')
      .replace(/ä¸Šåˆ|ä¸‹åˆ|æ™šä¸Š|æ—©ä¸Š|æ—©æ™¨|å‚æ™š/g, '')
      .trim();
    
    return title || 'æœªå‘½åäº‹ä»¶';
  }

  /**
   * å»ºè®®æé†’æ—¶é—´
   */
  private suggestReminder(type: string): number {
    const reminderMap: Record<string, number> = {
      'ä¼šè®®': 30,
      'å·¥ä½œ': 15,
      'ç”Ÿæ—¥': 1440,  // 1å¤©
      'çºªå¿µæ—¥': 1440,
      'å…¶ä»–': 15
    };
    
    return reminderMap[type] || 15;
  }
}
```

#### 12.3.2 åœ¨çº¿/ç¦»çº¿æ¨¡å¼åˆ‡æ¢

```typescript
// electron/service/aiService.ts

export class AIService {
  private offlineParser: OfflineParser;
  private isOnline: boolean = true;

  /**
   * è§£æè‡ªç„¶è¯­è¨€ï¼ˆè‡ªåŠ¨åˆ‡æ¢åœ¨çº¿/ç¦»çº¿æ¨¡å¼ï¼‰
   */
  async parseNaturalLanguage(
    text: string,
    context?: { currentDate: string; userTimezone: string }
  ): Promise<ServiceResult<NaturalLanguageParseResult>> {
    // 1. æ£€æŸ¥ç½‘ç»œçŠ¶æ€
    this.isOnline = await this.checkNetworkStatus();
    
    if (!this.isOnline) {
      // ç¦»çº¿æ¨¡å¼ï¼šä½¿ç”¨æœ¬åœ°è§„åˆ™å¼•æ“
      console.log('ç½‘ç»œä¸å¯ç”¨ï¼Œåˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼');
      const result = this.offlineParser.parseNaturalLanguage(text);
      return {
        success: true,
        data: {
          ...result,
          confidence: result.confidence * 0.8,  // ç¦»çº¿æ¨¡å¼ç½®ä¿¡åº¦é™ä½
          source: 'offline'  // æ ‡è®°ä¸ºç¦»çº¿è§£æ
        }
      };
    }
    
    // åœ¨çº¿æ¨¡å¼ï¼šè°ƒç”¨AI API
    try {
      const prompt = this.buildParsePrompt(text, context);
      const response = await this.callAI(prompt);
      const result = this.parseAIResponse(response);
      return {
        success: true,
        data: {
          ...result,
          source: 'online'  // æ ‡è®°ä¸ºåœ¨çº¿è§£æ
        }
      };
    } catch (error) {
      // AIè°ƒç”¨å¤±è´¥ï¼Œé™çº§åˆ°ç¦»çº¿æ¨¡å¼
      console.warn('AIè°ƒç”¨å¤±è´¥ï¼Œé™çº§åˆ°ç¦»çº¿æ¨¡å¼:', error);
      const result = this.offlineParser.parseNaturalLanguage(text);
      return {
        success: true,
        data: {
          ...result,
          confidence: result.confidence * 0.7,
          source: 'offline-fallback'
        }
      };
    }
  }

  /**
   * æ£€æŸ¥ç½‘ç»œçŠ¶æ€
   */
  private async checkNetworkStatus(): Promise<boolean> {
    try {
      // å°è¯•è¿æ¥AIæœåŠ¡ç«¯ç‚¹
      const response = await fetch('https://api.openai.com/v1/models', {
        method: 'HEAD',
        mode: 'no-cors',
        cache: 'no-cache'
      });
      return true;
    } catch (error) {
      return false;
    }
  }
}
```

#### 12.3.3 ç”¨æˆ·ç•Œé¢æç¤º

```vue
<!-- å‰ç«¯æ˜¾ç¤ºç¦»çº¿/åœ¨çº¿çŠ¶æ€ -->
<template>
  <div class="ai-input-container">
    <el-input
      v-model="inputText"
      placeholder="ç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ çš„æ—¥ç¨‹..."
    />
    
    <!-- ç½‘ç»œçŠ¶æ€æç¤º -->
    <div class="network-status">
      <el-tag 
        :type="isOnline ? 'success' : 'warning'"
        size="small"
      >
        <el-icon v-if="isOnline"><Connection /></el-icon>
        <el-icon v-else><Close /></el-icon>
        {{ isOnline ? 'åœ¨çº¿æ¨¡å¼ï¼ˆAIè§£æï¼‰' : 'ç¦»çº¿æ¨¡å¼ï¼ˆè§„åˆ™è§£æï¼‰' }}
      </el-tag>
    </div>
    
    <!-- è§£æç»“æœæç¤º -->
    <div v-if="parseResult" class="parse-result">
      <el-alert
        v-if="parseResult.source === 'offline'"
        type="warning"
        :closable="false"
        show-icon
      >
        <template #title>
          ç¦»çº¿æ¨¡å¼ï¼šè§£æç»“æœåŸºäºæœ¬åœ°è§„åˆ™ï¼Œå¯èƒ½ä¸å¤Ÿå‡†ç¡®ï¼Œå»ºè®®è”ç½‘åä½¿ç”¨AIè§£æ
        </template>
      </el-alert>
      
      <div class="result-preview">
        <!-- æ˜¾ç¤ºè§£æç»“æœ -->
      </div>
    </div>
  </div>
</template>
```

#### 12.3.4 ç¦»çº¿æ¨¡å¼èƒ½åŠ›å¯¹æ¯”

| åŠŸèƒ½ | åœ¨çº¿æ¨¡å¼ï¼ˆAIï¼‰ | ç¦»çº¿æ¨¡å¼ï¼ˆè§„åˆ™å¼•æ“ï¼‰ |
|------|--------------|-------------------|
| **æ—¥æœŸè§£æ** | âœ… æ™ºèƒ½ç†è§£å„ç§è¡¨è¾¾ | âœ… æ”¯æŒå¸¸è§è¡¨è¾¾ï¼ˆæ˜å¤©ã€åå¤©ã€XæœˆXæ—¥ï¼‰ |
| **æ—¶é—´è§£æ** | âœ… æ™ºèƒ½ç†è§£æ—¶é—´è¡¨è¾¾ | âœ… æ”¯æŒå¸¸è§æ ¼å¼ï¼ˆXç‚¹Xåˆ†ã€ä¸Šåˆ/ä¸‹åˆï¼‰ |
| **ç±»å‹è¯†åˆ«** | âœ… ä¸Šä¸‹æ–‡ç†è§£ | âš ï¸ å…³é”®è¯åŒ¹é…ï¼ˆå‡†ç¡®åº¦è¾ƒä½ï¼‰ |
| **æ ‡ç­¾ç”Ÿæˆ** | âœ… æ™ºèƒ½æå– | âŒ ä¸æ”¯æŒ |
| **ä¼˜å…ˆçº§è¯„ä¼°** | âœ… æ™ºèƒ½è¯„ä¼° | âŒ ä¸æ”¯æŒ |
| **ç½®ä¿¡åº¦** | 0.8-0.95 | 0.5-0.7 |

**å»ºè®®**ï¼š
- ç¦»çº¿æ¨¡å¼å¯ä»¥æ»¡è¶³åŸºæœ¬éœ€æ±‚ï¼ˆæ—¥æœŸã€æ—¶é—´ã€æ ‡é¢˜ï¼‰
- å¤æ‚åœºæ™¯å»ºè®®è”ç½‘ä½¿ç”¨AIè§£æ
- ç¦»çº¿è§£æçš„ç»“æœç”¨æˆ·å¯ä»¥æ‰‹åŠ¨ç¼–è¾‘å®Œå–„

### 12.4 æˆæœ¬æ§åˆ¶
- ç¼“å­˜å¸¸ç”¨æŸ¥è¯¢
- é™åˆ¶APIè°ƒç”¨é¢‘ç‡
- æä¾›å…è´¹/ä»˜è´¹é€‰é¡¹
- **ç¦»çº¿æ¨¡å¼å‡å°‘APIè°ƒç”¨**ï¼šæ— ç½‘ç»œæ—¶è‡ªåŠ¨ä½¿ç”¨æœ¬åœ°è§„åˆ™å¼•æ“

### 12.5 ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### 12.5.1 æ·»åŠ ä»»åŠ¡æµç¨‹ï¼ˆåªéœ€æè¿°ï¼‰

**ç®€åŒ–æµç¨‹**ï¼š
```
1. ç”¨æˆ·è¾“å…¥è‡ªç„¶è¯­è¨€æè¿°
   "æ˜å¤©ä¸‹åˆ3ç‚¹å›¢é˜Ÿä¼šè®®ï¼Œè®¨è®ºQ2è§„åˆ’"
   
2. ç‚¹å‡»"AIè§£æ"æŒ‰é’®ï¼ˆæˆ–æŒ‰Ctrl+Enterï¼‰
   
3. ç³»ç»Ÿè‡ªåŠ¨è§£æå¹¶å¡«å……è¡¨å•
   - æ—¥æœŸï¼šæ˜å¤©
   - æ—¶é—´ï¼š15:00
   - æ ‡é¢˜ï¼šå›¢é˜Ÿä¼šè®®ï¼Œè®¨è®ºQ2è§„åˆ’
   - ç±»å‹ï¼šä¼šè®®
   - æé†’ï¼šæå‰30åˆ†é’Ÿ
   - æ ‡ç­¾ï¼š["ä¼šè®®", "è§„åˆ’", "Q2", "å›¢é˜Ÿ"]
   
4. ç”¨æˆ·ç¡®è®¤æˆ–ç¼–è¾‘
   
5. ä¿å­˜ä»»åŠ¡
```

**æ”¯æŒçš„æ“ä½œæ–¹å¼**ï¼š
- âœ… **è‡ªç„¶è¯­è¨€è¾“å…¥**ï¼šåªéœ€æè¿°ï¼ŒAIè‡ªåŠ¨è§£æ
- âœ… **ä¼ ç»Ÿè¡¨å•è¾“å…¥**ï¼šä¹Ÿå¯ä»¥æ‰‹åŠ¨å¡«å†™æ‰€æœ‰å­—æ®µ
- âœ… **æ··åˆæ¨¡å¼**ï¼šå…ˆç”¨AIè§£æï¼Œå†æ‰‹åŠ¨è°ƒæ•´

#### 12.5.2 ç¦»çº¿åœºæ™¯å¤„ç†

**åœºæ™¯1ï¼šå®Œå…¨ç¦»çº¿**
- ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹ç½‘ç»œçŠ¶æ€
- åˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼ï¼ˆè§„åˆ™å¼•æ“ï¼‰
- æç¤ºç”¨æˆ·å½“å‰ä¸ºç¦»çº¿æ¨¡å¼
- è§£æç»“æœå¯æ‰‹åŠ¨ç¼–è¾‘

**åœºæ™¯2ï¼šç½‘ç»œä¸ç¨³å®š**
- AIè°ƒç”¨å¤±è´¥æ—¶è‡ªåŠ¨é™çº§åˆ°ç¦»çº¿æ¨¡å¼
- æç¤ºç”¨æˆ·è§£æç»“æœå¯èƒ½ä¸å¤Ÿå‡†ç¡®
- å»ºè®®ç”¨æˆ·è”ç½‘åé‡æ–°è§£æ

**åœºæ™¯3ï¼šç”¨æˆ·åå¥½**
- ç”¨æˆ·å¯ä»¥é€‰æ‹©"ä»…ä½¿ç”¨ç¦»çº¿æ¨¡å¼"ï¼ˆèŠ‚çœAPIæˆæœ¬ï¼‰
- ç”¨æˆ·å¯ä»¥é€‰æ‹©"ä»…ä½¿ç”¨åœ¨çº¿æ¨¡å¼"ï¼ˆæ›´å‡†ç¡®ï¼‰
- é»˜è®¤ï¼šè‡ªåŠ¨åˆ‡æ¢ï¼ˆæ™ºèƒ½æ¨¡å¼ï¼‰

## åä¸‰ã€å•†ä¸šæ¨¡å¼ï¼ˆå‚è€ƒï¼‰

### 13.1 å®šä»·ç­–ç•¥

- **ä¸ªäººå…è´¹ç‰ˆ**ï¼š
  - åŸºç¡€ä»»åŠ¡ç®¡ç†
  - åŸºç¡€æé†’åŠŸèƒ½
  - æœ¬åœ°å­˜å‚¨
  - é™åˆ¶ï¼šAIåŠŸèƒ½æ¯æ—¥10æ¬¡è°ƒç”¨

- **ä¸ªäººä¸“ä¸šç‰ˆ**ï¼šÂ¥29/æœˆ
  - æ— é™AIåŠŸèƒ½
  - é«˜çº§æ™ºèƒ½å»ºè®®
  - å·¥ä½œæ—¥å¿—åˆ†æ
  - æ•°æ®å¯¼å‡º
  - ä¼˜å…ˆæ”¯æŒ

- **å›¢é˜Ÿç‰ˆ**ï¼šÂ¥99/æœˆ/5äºº
  - æ‰€æœ‰ä¸ªäººä¸“ä¸šç‰ˆåŠŸèƒ½
  - å›¢é˜Ÿåä½œ
  - å…±äº«ä»»åŠ¡å’Œæ—¥ç¨‹
  - å›¢é˜Ÿæ•°æ®åˆ†æ
  - ç®¡ç†å‘˜æ§åˆ¶å°

- **è‡ªæ‰˜ç®¡ç‰ˆ**ï¼šä¸€æ¬¡æ€§ä»˜è´¹ Â¥999
  - æœ¬åœ°éƒ¨ç½²AIæ¨¡å‹
  - å®Œå…¨æ•°æ®æ§åˆ¶
  - æ— APIè°ƒç”¨é™åˆ¶
  - ä¼ä¸šçº§æ”¯æŒ

### 13.2 ç›ˆåˆ©ç‚¹

1. **è®¢é˜…æ”¶å…¥**ï¼šä¸“ä¸šç‰ˆå’Œå›¢é˜Ÿç‰ˆæœˆè´¹
2. **ä¼ä¸šæˆæƒ**ï¼šå¤§ä¼ä¸šå®šåˆ¶åŒ–éƒ¨ç½²
3. **APIæœåŠ¡**ï¼šä¸ºå…¶ä»–åº”ç”¨æä¾›AIæ—¥å†API
4. **æ’ä»¶å¸‚åœº**ï¼šç¬¬ä¸‰æ–¹æ’ä»¶åˆ†æˆ

## åå››ã€æœªæ¥æ‰©å±•

1. **è¯­éŸ³è¾“å…¥**ï¼šæ”¯æŒè¯­éŸ³è½¬æ–‡å­—
2. **æ™ºèƒ½æ¨è**ï¼šåŸºäºå†å²æ•°æ®æ¨èæœ€ä½³æ—¶é—´
3. **å›¢é˜Ÿåä½œ**ï¼šå¤šäººæ—¥ç¨‹åè°ƒ
4. **æ™ºèƒ½æé†’**ï¼šæ ¹æ®ç”¨æˆ·ä¹ æƒ¯è°ƒæ•´æé†’æ—¶é—´
5. **äº‹ä»¶å…³è”**ï¼šè¯†åˆ«ç›¸å…³äº‹ä»¶å¹¶å»ºç«‹å…³è”
6. **é¢„æµ‹åˆ†æ**ï¼šé¢„æµ‹æœªæ¥å¿™ç¢Œç¨‹åº¦

---

## åäº”ã€æ€»ç»“

æœ¬æ–¹æ¡ˆç»“åˆäº† **Clawdbot çš„åˆ†å±‚è®°å¿†ç³»ç»Ÿ**å’Œ **DeepSeek çš„æ™ºèƒ½ä»»åŠ¡ç®¡ç†æ€è·¯**ï¼Œæ‰“é€ ä¸€ä¸ªå®Œæ•´çš„**æ™ºèƒ½ä¸ªäººå·¥ä½œç©ºé—´**ã€‚æ ¸å¿ƒä¼˜åŠ¿ï¼š

### 15.1 æŠ€æœ¯ä¼˜åŠ¿
- âœ… **æœ¬åœ°ä¼˜å…ˆ**ï¼šæ•°æ®å®Œå…¨åœ¨æœ¬åœ°ï¼Œéšç§æœ‰ä¿éšœ
- âœ… **AIå¢å¼º**ï¼šè‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œæ™ºèƒ½åˆ†æå’Œå»ºè®®
- âœ… **è®°å¿†ç³»ç»Ÿ**ï¼šMarkdownæ—¥å¿— + SQLiteç»“æ„åŒ–æ•°æ®
- âœ… **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šç†è§£ä½ åœ¨åšä»€ä¹ˆï¼Œæä¾›æ™ºèƒ½æé†’
- âœ… **ä¸»åŠ¨å­¦ä¹ **ï¼šä»å·¥ä½œæ¨¡å¼ä¸­å­¦ä¹ å¹¶ä¼˜åŒ–

### 15.2 äº§å“ä¼˜åŠ¿
- âœ… **å®ç”¨æ€§**ï¼šè§£å†³æ¯ä¸ªäººçš„æ—¥ç¨‹ç®¡ç†ç—›ç‚¹
- âœ… **æŠ€æœ¯å‰æ²¿**ï¼šAI + æœ¬åœ°åº”ç”¨çš„æœ€ä½³å®è·µ
- âœ… **å¸‚åœºéœ€æ±‚**ï¼šå¤§å®¶éƒ½åœ¨æ‰¾å¥½ç”¨çš„ä»»åŠ¡ç®¡ç†å·¥å…·
- âœ… **å¯æ‰©å±•æ€§**ï¼šæœªæ¥å¯ä»¥åŠ åä½œã€é›†æˆç­‰

### 15.3 å®æ–½å»ºè®®

1. **åˆ†é˜¶æ®µå®æ–½**ï¼šæŒ‰ç…§5ä¸ªPhaseé€æ­¥æ¨è¿›
2. **MVPä¼˜å…ˆ**ï¼šå…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå†æ‰©å±•é«˜çº§ç‰¹æ€§
3. **ç”¨æˆ·åé¦ˆ**ï¼šæ¯ä¸ªé˜¶æ®µæ”¶é›†ç”¨æˆ·åé¦ˆï¼Œè¿­ä»£ä¼˜åŒ–
4. **æŠ€æœ¯å€ºåŠ¡**ï¼šæ³¨æ„ä»£ç è´¨é‡ï¼Œé¿å…å¿«é€Ÿè¿­ä»£å¸¦æ¥çš„æŠ€æœ¯å€ºåŠ¡

### 15.4 ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… å®ŒæˆPhase 1ï¼ˆMVPï¼‰- åŸºç¡€åŠŸèƒ½å·²å®ç°
2. â¬œ å¼€å§‹Phase 2ï¼ˆAIé›†æˆï¼‰- åˆ›å»ºAIService
3. â¬œ å®ç°Phase 3ï¼ˆè®°å¿†ç³»ç»Ÿï¼‰- Markdownæ—¥å¿— + ç´¢å¼•ç³»ç»Ÿï¼ˆsqlite-vec + FTS5ï¼‰
4. â¬œ æ‰©å±•Phase 4ï¼ˆæ™ºèƒ½åŠŸèƒ½ï¼‰- ä¸Šä¸‹æ–‡æ„ŸçŸ¥ + å‹ç¼©ç­–ç•¥
5. â¬œ å®Œå–„Phase 5ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰- å¤šAIæ”¯æŒ + å¤šAgentéš”ç¦»

### 15.5 Clawdbotè®°å¿†ç³»ç»Ÿçš„æ ¸å¿ƒä»·å€¼

**çœŸæ­£é‡è¦çš„ï¼šç”¨æˆ·æŒæ¡è‡ªå·±çš„æ•°æ®**

æ­£å¦‚Clawdbotåˆ›å»ºè€…Peter Steinbergerçš„æƒ³æ³•ï¼š
> "ä»Šå¹´ä¼šæ˜¯ä¸ªäººagentä¹‹å¹´ï¼Œè¿™ä¸ªé¢†åŸŸå¾ˆå¯èƒ½ä¼šè¢«OpenAIã€Anthropicè¿™äº›å¤§å‚ä¸»å¯¼ã€‚ä½†æˆ‘æƒ³åšä¸€ä¸ªä¸åŒçš„é€‰æ‹©ï¼šä½ èƒ½æŒæ¡è‡ªå·±çš„æ•°æ®ï¼Œè€Œä¸æ˜¯æŠŠæ›´å¤šæ•°æ®äº¤ç»™è¿™äº›å·¨å¤´ã€‚"

**ä¼ é€’çš„ä¿¡å·**ï¼š
- âœ… **AIçš„è®°å¿†ï¼Œå¼€å§‹å›åˆ°ç”¨æˆ·æ‰‹é‡Œäº†**
- âœ… å¯ä»¥å­˜åœ¨æœ¬åœ°çš„ç£ç›˜é‡Œ
- âœ… ç”¨æˆ·å¯ä»¥åƒæ“ä½œè‡ªå·±çš„"å¾®ä¿¡èŠå¤©è®°å½•ä¸€æ ·"ï¼Œå¯è¯»ã€å¯æ§ã€å¯åˆ é™¤ã€å¯è¿ç§»
- âœ… å½“Agentå¼€å§‹é•¿æœŸé™ªä¼´ç”¨æˆ·ï¼Œå½“AIä¸å†åªæ˜¯å›ç­”é—®é¢˜ï¼Œè€Œæ˜¯å‚ä¸å†³ç­–ã€æ‰§è¡Œã€åä½œï¼Œ**è®°å¿†å°±ä»"åŠŸèƒ½"ï¼Œå˜æˆäº†"æƒåŠ›"**
- âœ… **è€Œè°æŒæ¡è¿™ä»½è®°å¿†ï¼Œå†³å®šäº†AIæœ€ç»ˆç«™åœ¨è°é‚£ä¸€è¾¹**

**Clawdbotçš„æˆåŠŸè¦ç´ **ï¼ˆ53k+ GitHub Starsï¼‰ï¼š
1. **é€æ˜èƒœè¿‡é»‘ç›’** - Memory is just Markdown
2. **æœç´¢èƒœè¿‡æ³¨å…¥** - å…ˆæœç´¢ï¼Œå†æ³¨å…¥ï¼Œä¸å¡æ»¡ä¸Šä¸‹æ–‡
3. **æŒä¹…æ€§ä¼˜äºä¼šè¯** - ç£ç›˜æ–‡ä»¶ > å¯¹è¯è®°å½•
4. **æ··åˆå‹æœç´¢** - å‘é‡æœç´¢ + å…³é”®è¯æœç´¢

---

## åå…­ã€å‚è€ƒèµ„æº

### 16.1 æ ¸å¿ƒå‚è€ƒ
- **Clawdbot**: åˆ†å±‚è®°å¿†ç³»ç»Ÿæ€è·¯ï¼ˆMemory is just Markdownï¼‰
  - GitHub: https://github.com/clawdbot/clawdbot (53k+ stars)
  - æ ¸å¿ƒè®¾è®¡ï¼šä¸Šä¸‹æ–‡â‰ è®°å¿†ã€æœç´¢èƒœè¿‡æ³¨å…¥ã€æŒä¹…æ€§ä¼˜äºä¼šè¯
  - æŠ€æœ¯æ ˆï¼šsqlite-vec + FTS5ï¼Œå®Œå…¨æœ¬åœ°åŒ–
- **DeepSeek**: æ™ºèƒ½ä»»åŠ¡ç®¡ç†æ–¹æ¡ˆ
  - æ™ºèƒ½ä»»åŠ¡è¾“å…¥ã€æ—¥ç¨‹æ’æœŸã€å·¥ä½œæ—¥å¿—ç”Ÿæˆ

### 16.2 æŠ€æœ¯æ–‡æ¡£
- **Electronå®˜æ–¹æ–‡æ¡£**: https://www.electronjs.org/
- **FullCalendaræ–‡æ¡£**: https://fullcalendar.io/
- **sqlite-vec**: SQLiteå‘é‡æœç´¢æ‰©å±•ï¼ˆhttps://github.com/asg017/sqlite-vecï¼‰
- **FTS5**: SQLiteå…¨æ–‡æœç´¢å¼•æ“ï¼ˆhttps://www.sqlite.org/fts5.htmlï¼‰
- **Chokidar**: æ–‡ä»¶ç³»ç»Ÿç›‘å¬åº“ï¼ˆhttps://github.com/paulmillr/chokidarï¼‰

### 16.3 ç›¸å…³æ–‡ç« å’Œç ”ç©¶
- Clawdbotè®°å¿†ç³»ç»Ÿæ·±åº¦è§£æï¼ˆManthan Guptaï¼‰
- OpenAI Codexå‹ç¼©ç­–ç•¥
- ä¸ªäººAIåŠ©æ‰‹è®¾è®¡åŸåˆ™
- å‘é‡æœç´¢ vs å…³é”®è¯æœç´¢æ··åˆç­–ç•¥

### 16.4 å…³é”®ä¾èµ–å®‰è£…

```bash
# å®‰è£…è®°å¿†ç³»ç»Ÿç›¸å…³ä¾èµ–
npm install chokidar better-sqlite3
npm install --save-dev @types/chokidar

# sqlite-vecéœ€è¦å•ç‹¬ç¼–è¯‘ï¼ˆå¯é€‰ï¼Œç”¨äºå‘é‡æœç´¢ï¼‰
# å‚è€ƒï¼šhttps://github.com/asg017/sqlite-vec
```

---

**æœ€åæ›´æ–°**: 2026-01-29  
**ç‰ˆæœ¬**: 2.0ï¼ˆæ•´åˆClawdbotè®°å¿†ç³»ç»Ÿ + DeepSeekæ™ºèƒ½ä»»åŠ¡ç®¡ç†ï¼‰  
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆæ ¸å¿ƒæ¶æ„è®¾è®¡ï¼Œå¾…å®æ–½

